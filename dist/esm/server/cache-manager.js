const _0x2c3c54=_0x5e76;!function(){for(var c=_0x5e76,e=_0x5d94();;)try{if(673135==+parseInt(c(187))*(-parseInt(c(205))/2)+parseInt(c(179))/3+parseInt(c(192))/4*(parseInt(c(217))/5)+-parseInt(c(197))/6*(parseInt(c(225))/7)+-parseInt(c(168))/8+-parseInt(c(174))/9+parseInt(c(207))/10*(parseInt(c(190))/11))break;e.push(e.shift())}catch(c){e.push(e.shift())}}();import _0x1dd175 from"fs-extra";import _0xd51fc8 from"os";import _0x45bb26 from"path";import{log}from"wechaty-puppet";function _0x5d94(){const c=["mkdirp","tXnBC","sep","push","PKuWz","5186160WZeWvX","r-raw-payl","setRoomMem","oad","che closed","3342594GwgaWs","Ngcfh","all","getRoom","join","setRoom","che not ex","_roomMembe","2TdTqoo","getUUID","vWmSA","26279341vWGVAm",".wechaty","8qEhiFk","deleteToke","get","RdzYy","ber","882muboCV","set","hasRoom","getRoomCou","Member","osing cach","size","_userName","393508XTUgCH","0|3|2|1|5|","10Ybdhna","_roomCache","close","room-raw-p","homedir","getRoomIds","_tokenCach","delete","init","close() ca","1412575VhVtEy","pathExists","already in","split","[CacheMana","Jsdok","getRoomMem","close() cl","56364ZNnKiC","keys","silly","close()","rCache","deleteRoom","9933856UhqUFf"];return(_0x5d94=function(){return c})()}import{FlashStore}from"flash-store";function _0x5e76(c,e){const t=_0x5d94();return(_0x5e76=function(c,e){return c-=165,t[c]})(c,e)}const PRE=_0x2c3c54(221)+"ger]";class CacheManager{["_userName"];[_0x2c3c54(213)+"e"];[_0x2c3c54(208)];[_0x2c3c54(186)+_0x2c3c54(166)];constructor(c){this._userName=c}async[_0x2c3c54(215)](){var c=_0x2c3c54,e={RdzYy:c(219)+"itialized",rHzOW:c(191),vWmSA:"uuid",JMxak:"room-membe"+c(175)+c(177)};if(this[c(208)])throw new Error(e[c(195)]);var t=_0x45bb26.join(_0xd51fc8[c(211)](),_0x45bb26[c(171)],e.rHzOW,"server-cache",_0x45bb26[c(171)],this[c(204)],_0x45bb26[c(171)]);await _0x1dd175[c(218)](t)||await _0x1dd175[c(169)](t),this._tokenCache=new FlashStore(_0x45bb26[c(183)](t,e[c(189)])),this._roomCache=new FlashStore(_0x45bb26.join(t,c(210)+"ayload")),this["_roomMembe"+c(166)]=new FlashStore(_0x45bb26[c(183)](t,e.JMxak))}async[_0x2c3c54(209)](){var e=_0x2c3c54,t={Ngcfh:e(165),Jsdok:e(206)+"4",XVAVb:e(224)+e(202)+"es ...",PKuWz:"close() ca"+e(178)+".",tXnBC:e(216)+e(185)+"ist."};if(log[e(227)](PRE,t[e(180)]),this[e(186)+"rCache"]&&this[e(208)]&&this._tokenCache){var a=t[e(222)][e(220)]("|");let c=0;for(;;){switch(a[c++]){case"0":log[e(227)](PRE,t.XVAVb);continue;case"1":this[e(208)]=void 0;continue;case"2":this[e(186)+e(166)]=void 0;continue;case"3":await Promise[e(181)]([this["_roomMembe"+e(166)][e(209)](),this[e(208)][e(209)](),this[e(213)+"e"][e(209)]()]);continue;case"4":log[e(227)](PRE,t[e(173)]);continue;case"5":this[e(213)+"e"]=void 0;continue}break}}else log[e(227)](PRE,t[e(170)])}async[_0x2c3c54(182)](c){var e=_0x2c3c54;return this[e(208)][e(194)](c)}async[_0x2c3c54(184)](c,e){await this[_0x2c3c54(208)].set(c,e)}async[_0x2c3c54(167)](c){var e=_0x2c3c54;await this._roomCache[e(214)](c)}async[_0x2c3c54(212)](){var c=_0x2c3c54,e=[];for await(const t of this._roomCache[c(226)]())e[c(172)](t);return e}async[_0x2c3c54(200)+"nt"](){var c=_0x2c3c54;return this[c(208)][c(203)]}async[_0x2c3c54(199)](c){return this[_0x2c3c54(208)].has(c)}async[_0x2c3c54(223)+_0x2c3c54(196)](c){var e=_0x2c3c54;return this[e(186)+"rCache"][e(194)](c)}async[_0x2c3c54(176)+_0x2c3c54(196)](c,e){var t=_0x2c3c54;await this[t(186)+t(166)].set(c,e)}async[_0x2c3c54(167)+_0x2c3c54(201)](c){var e=_0x2c3c54;await this[e(186)+e(166)][e(214)](c)}async[_0x2c3c54(188)](c){var e=_0x2c3c54;return this[e(213)+"e"][e(194)](c)}async["setUUID"](c,e){var t=_0x2c3c54;await this._tokenCache[t(198)](c,e)}async[_0x2c3c54(193)+"n"](c){var e=_0x2c3c54;await this[e(213)+"e"][e(214)](c)}}export{CacheManager};