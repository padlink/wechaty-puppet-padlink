function _0x9d71(){const e=["setRemark","/Msg/SendC","747","pid=","clientmsgi","tact","inviteChat","2aShhFS",".com/mp/wa","ApgoU","b02041424e","stringify","o8SkgbwX5o","cdnthumbur","at_redirec","sendContac","Signature","msgsource","getRoomMem","setMsgid","HUwwv","Image","addContact","ChatRoomAn","jfzTZ","mSZzB","4c4d3700","IqkYd","setCreatet","e_contact","code","服务出错","tdAhr","yZPkd","PnySk","vFgrL","ent","QzITO","hROQW","MsgType","eMiniProgr","revokeMess","ydNgx","mber","3d22d51b80","64580vThSyO","Out?wxid=","getSecondL","4855xmhtIA","inviterUse","smallHeadI","MsgId","79izHT2VeB","pCQyz","ChatRoomOw","http://wei","2d38666462","82a9c9eea8","sendVoiceM","getMessage","actRemark","ownerUserN","dbb0e647bd","tion","/User/GetC","onLoginSuc","xin.qq.com","11IDhivU","70f5fd6346","rname","setTousern","sendMessag","getLoginCo","2126fde509","setName","poll_heart","b249920203","txt","46cd881fa9","01000204cf","lOcyD","errpage?ap","NewChatroo","Alias","cess","15DqEqLx","3239643232","_client","bHRIm","ihHME","playlength","jpg","332322d343","FromUserNa","toObject","NOQLZ","eJAuI","failed aft","moji","0424373630","CreateTime","/Label/Add","1169890WXOqcm","KNMwx","a645d1f214","inGetQR","/Label/Get","ckName","revokeinfo","NickName","eLink","mberList","x5b2kETRF9","deleteChat","2d63643537","sufKS","voicemsg","exit","Uuid","SAQXh","wxid_kxbss","onQrCodeEv","MsgSource","0424373766","gpiqd","setMessage","7366327002","GetFriendR","bVhqv","msg","c9eea8140f","init","stop","1424e97802","/png;base6","getNicknam","uuid=","heart","8177193250","userInfo","get","_cacheMgr","Nrdzg","getContact","/Msg/SendE","EncryptUse","nVMfO","mCtpc","nickName","appattach","ggFOpF8kP4","mData","chatroomNi","attachid","chatroomMe","新建文本文档 (2)","post","Status","76f997e791","test","DNFile","cdnmidimgu","046690b731","remark",".weixin.qq","0270823229","labelID","mMembers","raCrW","poll_messa","setMsgcont","/Login/Hea","4020405140","6266616431","ber","acctSectRe","Group/GetC","8b32c04243","acceptUser","6336336376","p;upgradet","nouncement",".txt","PgYcQ","UserName","登录成功","/Friend/Se","mberDetail","mAwVe","userInfoEx","/User/GetQ","push","setAntispa","puppet_pad","cket","2f591b0204","mQrCode","lVlFY","/Group/Del","XpGaR","ssVerify","Vptkk","0490201000","onSync","yVNAc","EOQjd","chatroomme","uuid","tCardMessa","setDisplay","logout","filter","SmallHeadI","vBFHq","mwIoU","tRemarks","xCount","/Msg/Sync","getChatRoo","XvRss","EIr056iMnf","2f58b70204","QRCode","updateSelf","setAvatar","ISvqpWoFoE","forwardMes","plwsU","eat","oLHCd","4dfcfca645","userName","AddMsgs","d68d867756","List?wxid=","setNicknam","ge_timer","getLabelLi","ogin","setGender","ENNoJ","1534323XQOnwz","10300","6135646335","106112608","0100040500","UYDj/Zspdy","DsKsq","9da1c45bee","405004c505","GPuzYCdPvw","mAnnouncem","removeLabe","getInitMes","getChatCon","Data","CZEFD","getAlias","/Group/Qui","RoomMember","mmemberLis","339652d626","ieQzE","0514000502","0050201000","etail","/token/hea","/Friend/Pa","Event","2d30666231","184","getUsernam","zZOQQ","mbers","buffer","ChatRoomMe","ssage","setId","rName","data","2d34633965","/Msg/SendV","labelPairL","/User/Upda","sendHeartb","getTime","states","435372d346","appmsg","vOjzG","IQInN","231024DIzTsS","deByFirst","7009346818","username","ZyTKG","setUUID","Message","cc2100250f","abs","2283821063","Video","updateCont","poll","mowneruser","/Tools/Cdn","getChatroo","GxJCU","700_4dfcfc","05147db6b1","setChatRoo","contact","3044718gKSqWg","CpSoN","age","mmaxcount","dXEuj","ClLTDHZQ6R","d1f21482a9","sendVideoM","message","chatRoomNa","mgUrl","uhtCM","KBqiS","0518080302","setSignatu","inCheckQR?","ZTgfkeB","rtBeat?wxi","emit","onOneClick","/token/che","act","394837yYGYSg","ation","105138159","20100044b3","/Login/Log","iVKSS","OjpV/n9TRf","45aa6d4173","zuVed","length","204cfb2499","2d38373533","setAlias","wYlKG","WPGPT","HTOrU","2622yTGErB","YAIYY","ateList","deleteCont","2d34633235","THUMB","sage","warn","GIsHC","4c505700","chatroomMa","Jbqmv","view","nsEPX","xqqKh","HejxZ","a5c0085ef9","gHJjL","appid","cdnattachu","SxZrD","poll_chang","GTYDm","DisplayNam","atuserlist","eLUAf","/Friend/Ge","/Group/Cre","sagewenjia","ideo","jyPxmdi+Gj","45df3d1bd8","/Friend/De","65264","VKJxi","ThXFb","+nLFWQcFHc","5efa5257be","3057020100","vJqiL","videomsg","OARat","setUsernam","quitChatRo","close","qKhHI","labelName","wEjdT","string","split","fsZhm","name","wxid","checkLogin","AttachThum","/Tools/Dow","Card","selfContac","/Msg/SendA","DownloadIm","getRoomIds","xVMjJr8zu/","/Group/Set","mContact","RoomInvita","VBZUT","link_","v1_7wKTlnL","deNew","lPnUy","GbsFkl8KMI","lpxJA","3239663363","hatRoomInf","100","setRoomMem","xuMnv","ContactLis","send_text","KTiqJ","file?wxid=","/Msg/SendT","token","ckToken","checkToken","661e8de943","202032f591","login","oadFile","0343032396","teProfile","/Label/Upd","dImg","ChatRoomIn","oice","3539320204","getAllChat","totallen","https://mp","044b304902","/Group/Sca","vOnYo","/Msg/Share","setChatroo","mvlZj","callback","dKZNJ","ndRequest","createChat","Vtter","join","ToUserName","getMyConta","ist","url","978020466a","bURmKeTyO6","addLabel","mticket","setInviter","Code","elation","7363061356","foDetail","184 B","aeskey","kickout","ame","31948","setType","setContent"];return(_0x9d71=function(){return e})()}const _0x1f4836=_0x7be8;!function(){for(var e=_0x7be8,t=_0x9d71();;)try{if(254287==+parseInt(e(517))*(parseInt(e(671))/2)+parseInt(e(749))/3*(parseInt(e(709))/4)+parseInt(e(712))/5*(parseInt(e(533))/6)+-parseInt(e(424))/7+parseInt(e(474))/8+-parseInt(e(495))/9+-parseInt(e(766))/10*(parseInt(e(731))/11))break;t.push(t.shift())}catch(e){t.push(t.shift())}}();import{SyyyRequest,SsyyyRequest}from"../index.js";import _0x456497 from"cuid";import{Polling}from"../utils/polling.js";import{machineIdSync}from"node-machine-id";import{log}from"wechaty-puppet";function _0x7be8(e,t){const a=_0x9d71();return(_0x7be8=function(e,t){return e-=419,a[e]})(e,t)}import{Response,SendAppMessageResponse,ChatRoomMember,Contact,Message,Label}from"../../map/index.js";import{CacheManager}from"../../cache-manager.js";import{jsonToXml,xmlToJson}from"../../utils/xml-to-json.js";var ImageType;!function(e){var t=_0x7be8,a={GTYDm:t(538),PnySk:"NORMAL"};e[e[a.GTYDm]=0]=a[t(555)],e[e[a.PnySk]=1]=a[t(698)],e[e.HD=2]="HD"}(ImageType=ImageType||{});class Api{[_0x1f4836(805)];[_0x1f4836(751)];["token"];[_0x1f4836(871)];[_0x1f4836(585)];[_0x1f4836(638)];[_0x1f4836(833)+_0x1f4836(419)];constructor(e){this._client=e}async[_0x1f4836(795)](){var e=_0x1f4836;this._cacheMgr=new CacheManager(this[e(615)]),await this._cacheMgr[e(795)]()}async[_0x1f4836(620)](e,t){const a=_0x1f4836,n={oXqxp:function(e){return e()},nVMfO:function(e,t){return e!==t},zZOQQ:a(695),xqqKh:function(e,t,a){return e(t,a)},gHJjL:function(e,t){return e*t}};this[a(638)]=t;let s=this[a(751)][a(615)][a(582)](a(857)+a(599))[1];const i=n.oXqxp(machineIdSync);var t=await this[a(617)]({token:s});n[a(810)](t.code,1)?log[a(540)](t[a(793)]||n[a(455)]):(n[a(547)](setInterval,()=>this[a(467)+"eat"]({token:s,device_id:i}),n[a(550)](60,1e3)),this[a(467)+a(892)]({token:s,device_id:i}),this[a(615)]=s,await this[a(795)](),t=await this[a(805)].getUUID(s),this.uuid=t?.[a(871)],this[a(585)]=t?.[a(585)],t?.[a(585)]?this[a(711)+"ogin"]():await this["getLoginCo"+a(475)]())}async[_0x1f4836(467)+_0x1f4836(892)](e){var t=_0x1f4836;try{var a=await SsyyyRequest.post({url:t(449)+"rtbeat",data:e});!{eLUAf:function(e,t){return e===t}}[t(558)](a[t(694)],-2)||(console.error(a[t(793)]),process[t(781)](1))}catch(e){}}async[_0x1f4836(617)](e){var t=_0x1f4836;return SsyyyRequest[t(820)]({url:t(515)+t(616),data:e})}[_0x1f4836(736)+"deByFirst"]=async()=>{const i=_0x1f4836,r={qKhHI:function(e,t,a){return e(t,a)},jfzTZ:function(e,t){return e*t},YzwuZ:function(e,t){return e==t},vBFHq:function(e,t){return e==t},CZEFD:i(849),GxJCU:function(e,t){return e(t)}};try{let n=this[i(638)],s=await this[i(736)+i(601)](this.token);if(r[i(877)](s[i(653)],1)){this[i(871)]=s[i(438)][i(782)],n[i(514)+i(451)]({status:1,imageUrl:i(719)+i(730)+"/x/"+s[i(438)].Uuid});const o=new Polling;let t=null;o[i(486)](2e3,async()=>{const a=i;var e=await this["checkLogin"+a(821)]();if(t=t||r[a(578)](setTimeout,async()=>{var e=a;o[e(796)](),n[e(785)+e(700)]({status:5}),await this[e(736)+"deByFirst"]()},r[a(688)](e.Data.expiredTime,1e3)),r.YzwuZ(e.Code,0)){if(r[a(877)](e[a(438)][a(469)],1)&&n[a(785)+"ent"]({status:2}),r[a(877)](e[a(438)][a(469)],4)&&n[a(785)+"ent"]({status:4}),r[a(877)](e[a(480)],r[a(439)])){o.stop(),t&&(r[a(490)](clearTimeout,t),t=null),n[a(785)+a(700)]({status:3}),this[a(805)][a(479)](this[a(615)],{uuid:s[a(438)][a(782)],wxid:e[a(438)][a(839)+"sp"][a(895)]}),this.wxid=e[a(438)][a(839)+"sp"][a(895)];try{let{messageList:e,contactList:t}=await this[a(436)+"sage"]();this[a(751)].selfContact=await this[a(645)+"ct"](this[a(585)]),await n[a(729)+a(748)](this[a(751)][a(590)+"t"]),await n[a(867)]({getContactList(){return t},getMessageList(){return e}}),this[a(554)+a(693)](3e3),this[a(833)+"ge"](),this[a(739)]()}catch(e){}}}else e[a(653)]})}}catch(e){}};async[_0x1f4836(711)+_0x1f4836(421)](){var a=_0x1f4836;try{await this[a(801)]();let{messageList:e,contactList:t}=await this[a(436)+"sage"]();this._client[a(590)+"t"]=await this[a(645)+"ct"](this.wxid),await this.callback.onLoginSuccess(this[a(751)].selfContact),await this[a(638)][a(867)]({getContactList(){return t},getMessageList(){return e}}),this[a(833)+"ge"](),this[a(554)+"e_contact"](3e3),this[a(739)]()}catch(e){await this.getLoginCodeByFirst()}}[_0x1f4836(833)+"ge"](){const n=_0x1f4836,s={RwPtn:function(e,t){return t<e},raCrW:n(503)},e=new Polling;(this["poll_messa"+n(419)]=e)[n(486)](1e3,async()=>{var e=n,{messageList:t,contactList:a}=await this[e(723)]();s.RwPtn(t[e(526)],0)&&this._client.emit(s[e(832)],t),0<a[e(526)]&&this[e(751)].emit(e(494),a)})}async[_0x1f4836(736)+_0x1f4836(601)](e=""){var t=_0x1f4836;return SyyyRequest.post({url:t(521)+t(769),data:{DeviceID:e,DeviceName:t(581),Proxy:{ProxyIp:t(581),ProxyPassword:t(581),ProxyUser:"string"}}})}async[_0x1f4836(586)+_0x1f4836(821)](){var e=_0x1f4836;return SyyyRequest[e(820)]({url:"/Login/Log"+e(510)+e(800)+this[e(871)],data:{}})}[_0x1f4836(739)](){const e=_0x1f4836,t=function(e,t){return e*t},a=function(e,t){return e*t},n=new Polling;n[e(486)](t(a(2.5,60),1e3),async()=>{var t=e;try{await this[t(801)]()}catch(e){this[t(833)+t(419)][t(796)](),await this._cacheMgr?.[t(577)](),this._cacheMgr=void 0,this[t(751)][t(513)](t(659),"")}})}async[_0x1f4836(801)](e=20){var t=_0x1f4836,a={bVhqv:function(e,t){return e<t},ihHME:function(e,t){return e===t},Nrdzg:"HeartBeat "+t(761)+"er multiple attempts"};let n=0;for(;a[t(792)](n,e);){try{var s=await SyyyRequest[t(820)]({url:t(835)+t(512)+"d="+this.wxid});if(a[t(753)](s[t(480)],"成功")||!s)return s}catch(e){}n++}throw new Error(a[t(806)])}["poll_chang"+_0x1f4836(693)]=async t=>{for(var e=_0x1f4836,a={xyDZj:function(e,t){return t<e},ieQzE:function(e,t){return e<t},lpxJA:function(e,t){return e-t},zuVed:e(494),mwIoU:function(e,t){return e!==t}};;){try{var n=await this._cacheMgr?.[e(593)]();if(!n)return;for(const c of n)try{var s,i,r=await this[e(882)+"mContact"](c),o=await this[e(805)]?.[e(682)+"ber"](c);o&&a.xyDZj(r[e(489)+e(443)+"t"]().length,0)?(s=o,i=r[e(758)]()[e(870)+e(775)],(s[e(526)]!==i[e(526)]&&a[e(445)](Math[e(482)](a[e(604)](s[e(526)],i[e(526)])),3)||JSON[e(675)](s)!=JSON[e(675)](i))&&(this[e(805)]?.[e(608)+e(838)](c,r.toObject()[e(870)+e(775)]),this[e(751)][e(513)](a[e(525)],[r]))):a[e(878)](r["getChatroo"+e(443)+"t"]()[e(526)],0)&&this[e(805)]?.[e(608)+e(838)](c,r.toObject()[e(870)+e(775)])}catch(e){}}catch(e){}await new Promise(e=>setTimeout(e,t))}};async[_0x1f4836(436)+_0x1f4836(539)](){const s={Vtter:function(e,t){return e==t},dKZNJ:function(e){return e()}};let i=this,r=[],o=[];return await s.dKZNJ(async function e(){var t=_0x7be8,{messageList:a,contactList:n}=await i[t(723)](!0);r[t(855)](...a),o.push(...n),a&&s[t(642)](a.length,0)&&s[t(642)](n[t(526)],0)||await s[t(639)](e)}),{messageList:r,contactList:o}}async[_0x1f4836(723)](e){var t=_0x1f4836,a={jPRDP:t(581),uhtCM:function(e,t){return e==t},tdAhr:function(e,t){return t<e},PgYcQ:function(e,t){return e||t},wYlKG:function(e,t){return e(t)},nsEPX:function(e,t){return e(t)}},n=await SyyyRequest[t(820)]({url:t(881),data:{Scene:0,Synckey:a.jPRDP,Wxid:this[t(585)]}}),s=[];if(a[t(506)](n.Code,0)&&(n[t(438)].AddMsgs&&a[t(696)](n[t(438)][t(896)].length,0)))for(const c of n[t(438)][t(896)]){var i=(new Message)["setFromuse"+t(733)](c[t(757)+"me"].string)[t(734)+t(660)](c[t(644)][t(581)])[t(460)](c[t(715)])[t(662)](c[t(703)])[t(692)+"ime"](c[t(764)]),r=/@chatroom$/[t(823)](c[t(757)+"me"][t(581)]),o=/@chatroom$/.test(c[t(644)].string);let e=[];a[t(847)](r,o)&&(this[t(805)]?.setRoom(c[t(757)+"me"].string||c.ToUserName[t(581)],!0),r=(await a[t(530)](xmlToJson,c[t(786)]))[t(681)]?.atuserlist?(await a[t(546)](xmlToJson,c[t(786)]))[t(681)][t(557)][t(582)](","):[],e=r[t(875)](e=>""!==e)),i[t(663)](c.Content.string).setAtList(e),s.push(i)}return{messageList:s,contactList:[]}}async[_0x1f4836(611)](e,t,a){var n=_0x1f4836,s={CpSoN:function(e){return e()}};await SyyyRequest.post({url:n(614)+"xt",data:{At:a.join(","),Content:t,ToWxid:e,Type:0,Wxid:this[n(585)]}});return(new Response)[n(683)](_0x456497())[n(789)+"revokeinfo"]({clientmsgid:s[n(496)](_0x456497),newclientmsgid:s[n(496)](_0x456497),createtime:(new Date)[n(468)]()})}async["sendImageMessage"](e,t,a){const n=_0x1f4836,s=function(e){return e()};await SyyyRequest[n(820)]({url:"/Msg/Uploa"+n(625),data:{Base64:t,ToWxid:e,Wxid:this[n(585)]}});return(new Response)[n(683)](_0x456497())["setMessage"+n(772)]({clientmsgid:s(_0x456497),newclientmsgid:s(_0x456497),createtime:(new Date)[n(468)]()})}async[_0x1f4836(502)+"essage"](e,t,a){var n=_0x1f4836,s={iFmep:function(e){return e()},mvlZj:function(e){return e()}};await SyyyRequest[n(820)]({url:n(464)+n(562),data:{Base64:t,ImageBase64:"data:image"+n(798)+"4,"+a,PlayLength:0,ToWxid:e,Wxid:this[n(585)]}});return(new Response).setMsgid(s.iFmep(_0x456497))[n(789)+n(772)]({clientmsgid:s.mvlZj(_0x456497),newclientmsgid:s[n(637)](_0x456497),createtime:(new Date)[n(468)]()})}async["sendFileMe"+_0x1f4836(459)](e){var t=_0x1f4836,a={fsZhm:function(e){return e()},wEjdT:function(e){return e()}};await SyyyRequest[t(820)]({url:"/Tools/Upl"+t(621),data:{Base64:e,Wxid:this[t(585)]}});return(new Response).setMsgid(a[t(583)](_0x456497))[t(789)+"revokeinfo"]({clientmsgid:a.wEjdT(_0x456497),newclientmsgid:a[t(580)](_0x456497),createtime:(new Date)[t(468)]()})}async[_0x1f4836(735)+"eEmoji"](e,t,a){var n=_0x1f4836,s={SxZrD:function(e){return e()},XpGaR:function(e){return e()}};await SyyyRequest[n(820)]({url:n(808)+n(762),data:{Md5:t,ToWxid:e,TotalLen:a,Wxid:this[n(585)]}});return(new Response)[n(683)](_0x456497())[n(789)+n(772)]({clientmsgid:s[n(553)](_0x456497),newclientmsgid:s[n(863)](_0x456497),createtime:(new Date)[n(468)]()})}async[_0x1f4836(735)+_0x1f4836(774)](e,t,a){var n=_0x1f4836,s={lOcyD:n(545),atPJq:n(571)+n(632)+n(743)+n(740)+n(885)+n(790)+n(826)+n(787)+n(750)+n(720)+n(537)+n(528)+n(452)+n(837)+n(628)+n(508)+n(428)+n(690),mAwVe:n(425),vJqiL:n(607),SAQXh:"msg_825269"+n(829)+n(666),xuMnv:function(e,t){return e(t)},eJAuI:function(e,t){return e(t)},ThXFb:function(e){return e()},mSZzB:function(e){return e()}},a={appmsg:{$:{appid:"",sdkver:"0"},title:a.title,des:a.description,action:s[n(744)],type:"5",showtype:"0",content:"",url:a[n(647)],dataurl:"",lowurl:"",lowdataurl:"",recorditem:"",thumburl:a.thumbURL,messageaction:"",laninfo:"",extinfo:"",sourceusername:"",sourcedisplayname:"",commenturl:"",appattach:{totallen:"0",attachid:"",emoticonmd5:"",fileext:"",aeskey:"",cdnthumburl:s.atPJq,cdnthumbaeskey:"801f4f18eb"+n(492)+n(549)+"45",cdnthumbmd5:n(618)+n(483)+n(737)+"4b",cdnthumblength:s[n(852)],cdnthumbwidth:s[n(572)],cdnthumbheight:s.vJqiL},webviewshared:{publisherId:s[n(783)],publisherReqId:n(427)},weappinfo:{pagepath:"",username:"",appid:"",appservicetype:"0"},websearch:""}},i=await s[n(609)](jsonToXml,a),a=await s[n(760)](jsonToXml,{msg:a});await SyyyRequest[n(820)]({url:n(591)+"pp",data:{ToWxid:t,Type:0,Wxid:this[n(585)],Xml:i}});return(new SendAppMessageResponse)[n(683)](s[n(568)](_0x456497))[n(789)+n(772)]({clientmsgid:_0x456497(),newclientmsgid:s[n(689)](_0x456497),createtime:(new Date)[n(468)]()})[n(834)+n(700)](a)}async[_0x1f4836(735)+_0x1f4836(704)+"am"](e,t){var a=_0x1f4836,n={ENNoJ:a(545),GIsHC:a(524)+"8177193250"+a(742)+"2d",oLHCd:a(755),vOjzG:a(726)+a(564)+a(708)+"73",vOnYo:a(570)+a(732)+a(822)+"29",IQInN:"100",KNMwx:function(e,t){return e(t)},VBZUT:function(e){return e()},ZyTKG:function(e){return e()}},{appid:t,description:s,iconUrl:i,shareId:r,thumbKey:o,thumbUrl:c,username:u,title:d,pagePath:m}=t,d={appmsg:{appid:t,title:d,action:n[a(423)],type:"33",showtype:"0",url:a(631)+a(828)+a(672)+a(745)+a(667)+t+("&amp;type=upgrade&am"+a(844)+"ype=3#wech"+a(678))+"t",md5:n[a(541)],sourcedisplayname:s,appattach:{totallen:"0",fileext:n[a(893)],filekey:n[a(472)],cdnthumburl:c,aeskey:n[a(634)],cdnthumbaeskey:o,cdnthumbmd5:a(524)+a(802)+a(742)+"2d",encryver:"1",cdnthumblength:a(566),cdnthumbheight:n[a(473)],cdnthumbwidth:n[a(473)]},webviewshared:{publisherReqId:"0"},weappinfo:{pagepath:m,username:u,appid:t,type:"2",weappiconurl:i,appservicetype:"0",shareId:r}}},s=await jsonToXml(d),c=await n[a(767)](jsonToXml,{msg:d});await SyyyRequest[a(820)]({url:a(591)+"pp",data:{ToWxid:e,Type:0,Wxid:this[a(585)],Xml:s}});return(new SendAppMessageResponse).setMsgid(n[a(598)](_0x456497))[a(789)+"revokeinfo"]({clientmsgid:_0x456497(),newclientmsgid:n[a(478)](_0x456497),createtime:(new Date)[a(468)]()})[a(834)+a(700)](c)}async[_0x1f4836(890)+"sage"](e,t){var a=_0x1f4836,n={iVKSS:function(e,t){return e(t)},plwsU:function(e){return e()},ApgoU:function(e){return e()}},s=await xmlToJson(t),s=await n[a(522)](jsonToXml,{appmsg:s[a(793)].appmsg});await SyyyRequest.post({url:a(591)+"pp",data:{ToWxid:e,Type:0,Wxid:this[a(585)],Xml:s}});return(new SendAppMessageResponse)[a(683)](_0x456497())[a(789)+"revokeinfo"]({clientmsgid:n[a(891)](_0x456497),newclientmsgid:n[a(673)](_0x456497),createtime:(new Date)[a(468)]()})["setMsgcont"+a(700)](t)}async[_0x1f4836(890)+_0x1f4836(561)+"n"](e,t){var a=_0x1f4836,n={seejp:function(e,t){return e(t)},pCQyz:a(819)+a(846),EOQjd:a(657),CQkjq:a(545),Jbqmv:a(453),YAIYY:a(741),wDFzL:"@cdn_30570"+a(520)+a(866)+a(527)+a(619)+a(674)+a(648)+a(841)+a(655)+"463352d636"+a(470)+a(444)+a(756)+a(622)+a(843)+a(836)+a(447)+a(432)+a(491)+a(768)+a(721)+"140f3e_1",VKJxi:a(571)+a(632)+a(743)+a(740)+a(859)+a(797)+"0466a8b32c"+a(763)+a(426)+a(778)+a(463)+"2d626332322d34303430"+a(605)+"3637640204"+a(446)+a(428)+a(542),gpiqd:"wxid_yqw0irrcmoyd12_2764_17223"+a(661),HTOrU:a(476)+a(519),lPnUy:function(e){return e()}},s=await n.seejp(jsonToXml,{msg:{appmsg:{sdkver:"0",title:n[a(717)],des:n[a(869)],type:"6",action:n.CQkjq,appattach:{totallen:n[a(544)],fileext:n[a(534)],attachid:n.wDFzL,cdnattachurl:n[a(567)],aeskey:a(894)+a(501)+a(794)+"3e",encryver:"0",filekey:n[a(788)],overwrite_newmsgid:n[a(532)],fileuploadtoken:a(600)+a(429)+"nmg7opHS3F"+a(569)+"nJvZNQCfoF"+a(594)+a(716)+"P+4382v9Q7"+a(433)+a(500)+a(814)+a(776)+a(649)+"vidAQMyHYi"+a(563)+"kJzr34qhhd"+a(603)+"jVgk1sYTPs"+a(523)+a(884)+a(889)+a(676)+a(511)},md5:a(481)+a(431)+a(897)+"bb",webviewshared:{},mpsharetrace:{hasfinderelement:"0"},secretmsg:{isscrectmsg:"0"}},fromusername:a(784)+"8yjkqx122",scene:"1",appinfo:{version:"1"}}});await SyyyRequest[a(820)]({url:a(665)+a(824),data:{Content:s,ToWxid:e,Wxid:this[a(585)]}});return(new SendAppMessageResponse).setMsgid(n.lPnUy(_0x456497))[a(789)+a(772)]({clientmsgid:n[a(602)](_0x456497),newclientmsgid:n.lPnUy(_0x456497),createtime:(new Date)[a(468)]()})[a(834)+a(700)](t)}async[_0x1f4836(722)+"essage"](e,t,a){var n=_0x1f4836,s={XvRss:function(e){return e()}};await SyyyRequest.post({url:n(464)+n(627),data:{Base64:t,ToWxid:e,Type:4,VoiceTime:1,Wxid:this[n(585)]}});return(new Response)[n(683)](s.XvRss(_0x456497))[n(789)+"revokeinfo"]({clientmsgid:s[n(883)](_0x456497),newclientmsgid:s[n(883)](_0x456497),createtime:(new Date).getTime()})}async[_0x1f4836(629)+_0x1f4836(442)+"s"](){var e=_0x1f4836,t=[];for(const s of(await SyyyRequest.post({url:"/",data:{type:10114}}))[e(462)][e(462)].chatrooms){var a=[];for(const i in s[e(818)+e(456)])a[e(855)]((new ChatRoomMember)[e(575)+"e"](s[e(818)+"mbers"][i][e(895)])[e(888)](s.chatroomMembers[i][e(714)+e(505)])[e(899)+"e"](s[e(818)+"mbers"][i][e(812)])[e(652)+"username"](s[e(818)+e(456)][i][e(713)+e(461)])[e(873)+e(584)](s.chatroomMembers[i]?.[e(816)+e(771)]));var n=(new Contact)[e(575)+"e"](s[e(895)])[e(899)+"e"](s[e(812)])[e(888)](s[e(714)+"mgUrl"])[e(422)](0)[e(509)+"re"]("")[e(664)](s[e(827)])[e(636)+e(498)](s[e(543)+e(880)])[e(636)+e(443)+"t"](a)[e(636)+e(487)+"name"](s[e(725)+"ame"]);t[e(855)](n)}return t}async["getChatRoo"+_0x1f4836(831)](e){var t=_0x1f4836,e=await SyyyRequest[t(820)]({url:"/Group/Get"+t(458)+t(851),data:{QID:e,Wxid:this[t(585)]}}),a=[];if(e[t(438)]?.[t(746)+t(815)]["ChatRoomMe"+t(707)])for(const n of e.Data[t(746)+t(815)][t(458)+t(707)])a[t(855)]((new ChatRoomMember).setUsername(n[t(848)])[t(888)](n[t(876)+t(505)])[t(899)+"e"](n.NickName)[t(873)+"name"](n?.[t(556)+"e"]||""));return a}async[_0x1f4836(807)](e,t){var a=_0x1f4836,n=/@chatroom$/[a(823)](e);let s;return s=n?await this[a(882)+"mContact"](e):e==this[a(751)][a(590)+"t"][a(454)+"e"]()?this._client.selfContact:await this[a(437)+a(669)](e)}async[_0x1f4836(887)+_0x1f4836(773)](s){const i={WPGPT:function(e,t){return e(t)},YpqMp:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x7be8;try{var n=await SyyyRequest[a(820)]({url:"/User/Upda"+a(623),data:{NickName:s,Wxid:this[a(585)]}});i[a(531)](e,n)}catch(e){i.YpqMp(t,e)}})}async[_0x1f4836(887)+_0x1f4836(680)](n){const s={vFgrL:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x7be8;try{e(await SyyyRequest.post({url:a(466)+a(623),data:{Signature:n,Wxid:this[a(585)]}}))}catch(e){s[a(699)](t,e)}})}async["getContact"+_0x1f4836(886)](e,n){const s={mCtpc:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x7be8;try{e(await SyyyRequest.post({url:a(854)+"RCode",data:{Style:n,Wxid:this[a(585)]}}))}catch(e){s[a(811)](t,e)}})}async[_0x1f4836(485)+_0x1f4836(724)](e,t){var a=_0x1f4836;await SyyyRequest.post({url:a(850)+a(879),data:{Remarks:t,ToWxid:e,Wxid:this[a(585)]}})}async[_0x1f4836(791)+_0x1f4836(654)](e){var t=_0x1f4836;return await SyyyRequest.post({url:t(559)+"tFriendRel"+t(518),data:{UserName:e,Wxid:this[t(585)]}})}async[_0x1f4836(686)](e,t,a){var n=_0x1f4836;await SyyyRequest[n(820)]({url:n(850)+n(640),data:{Scene:0,V1:e,V2:t,VerifyContent:a,Wxid:this.wxid}})}async[_0x1f4836(536)+_0x1f4836(516)](e){var t=_0x1f4836;await SyyyRequest[t(820)]({url:t(565)+"lete",data:{ToWxid:e,Wxid:this.wxid}})}async["getChatCon"+_0x1f4836(669)](e){var t=_0x1f4836,a={KTiqJ:t(581)},a=(await SyyyRequest.post({url:"/Friend/GetContractD"+t(448),data:{ChatRoom:a[t(612)],Towxids:e,Wxid:this[t(585)]}}))[t(438)][t(610)+"t"][0];return(new Contact)[t(575)+"e"](a[t(848)][t(581)])[t(899)+"e"](a[t(773)][t(581)])[t(888)](a["SmallHeadI"+t(505)]).setGender(a.Sex)[t(509)+"re"](a[t(680)])[t(856)+t(651)](a["AntispamTi"+t(858)])[t(529)](a[t(747)])}async[_0x1f4836(645)+"ct"](e){const i={NOQLZ:function(e,t){return e(t)},bHRIm:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x7be8;try{var n=(await SyyyRequest[a(820)]({url:a(728)+"ontractPro"+a(613)+this[a(585)],data:{}}))[a(438)],s=(new Contact)[a(575)+"e"](n[a(803)][a(848)].string)[a(899)+"e"](n[a(803)][a(773)][a(581)]).setAvatar(n[a(853)+"t"]["SmallHeadI"+a(505)])[a(422)](n[a(803)].Sex)[a(509)+"re"](n.userInfo[a(680)])[a(856)+a(651)](n.AntispamTicket||"");i[a(759)](e,s)}catch(e){i[a(752)](t,e)}})}async["getChatRoo"+_0x1f4836(596)](i){const r={dXEuj:function(e,t){return e==t},HUwwv:function(e,t){return e(t)},DipYi:function(e,t){return e(t)},lVlFY:"数据出错"};return new Promise(async(e,t)=>{var a,n=_0x7be8,s=await SyyyRequest[n(820)]({url:n(840)+n(606)+"o",data:{QID:i,Wxid:this[n(585)]}});r[n(499)](s.Code,0)&&s[n(438)][n(610)+"t"]?(s=s[n(438)][n(610)+"t"][0],a=await this[n(882)+n(831)](i),a=(new Contact)[n(575)+"e"](s.UserName[n(581)])[n(899)+"e"](s.NickName[n(581)]).setAvatar(s.SmallHeadImgUrl).setGender(0).setSignature("")[n(664)]("")[n(636)+n(498)](500)[n(636)+n(443)+"t"](a)[n(636)+"mownerusername"](s[n(718)+"ner"])["setEncrypt"+n(477)](s[n(809)+n(461)]),r[n(684)](e,a)):r.DipYi(t,r[n(861)])})}async["acceptChat"+_0x1f4836(597)+_0x1f4836(727)](e,t){var a=_0x1f4836;return SyyyRequest[a(820)]({url:a(633)+"nIntoGroup",data:{Url:t,Wxid:this.wxid}})}async[_0x1f4836(576)+"om"](e){var t=_0x1f4836;return SyyyRequest[t(820)]({url:t(441)+"t",data:{QID:e,Wxid:this[t(585)]}})}async[_0x1f4836(723)+_0x1f4836(685)](i,e,r){const o={sufKS:function(e,t){return e(t)},IqkYd:function(e,t){return e(t)}};return new Promise(async(t,e)=>{var a=_0x7be8;try{var n=(await o[a(779)](xmlToJson,i))[a(793)].img.$,s=await SyyyRequest[a(820)]({url:"/Tools/CdnDownloadIm"+a(497),data:{FileAesKey:n[a(658)],FileNo:n[a(825)+"rl"],Wxid:this[a(585)]}});o[a(691)](t,{imageType:r,imageData:s[a(438)][a(685)]})}catch(e){o[a(691)](t,e)}})}async[_0x1f4836(723)+"Voice"](e,t,a){var n=_0x1f4836,s={KBqiS:function(e,t){return e(t)}},t=(await s[n(507)](xmlToJson,t))[n(793)][n(780)].$;return(await SyyyRequest[n(820)]({url:n(588)+"nloadVoice",data:{Bufid:t[n(668)+"d"],FromUserName:a,Length:s[n(507)](Number,t[n(526)]),MsgId:e,Wxid:this[n(585)]}}))[n(438)][n(462)][n(457)]}async[_0x1f4836(723)+_0x1f4836(484)](e,t,a){var n=_0x1f4836,t=(await{hROQW:function(e,t){return e(t)}}[n(702)](xmlToJson,t))[n(793)][n(573)].$;return(await SyyyRequest.post({url:n(588)+"nloadVideo",data:{CompressType:0,DataLen:Number(t[n(526)]),MsgId:e,Section:{DataLen:Number(t[n(754)]),StartPos:0},ToWxid:a,Wxid:this[n(585)]}}))[n(438)][n(462)][n(457)]}async[_0x1f4836(723)+"Attach"](e,t){var a=_0x1f4836,n={HejxZ:function(e,t){return e(t)},yZPkd:function(e,t){return e(t)}},e=await n[a(548)](xmlToJson,e),s=e.msg[a(471)][a(813)];return(await SyyyRequest[a(820)]({url:a(588)+"nloadFile",data:{AppID:e[a(793)][a(471)].$[a(551)],AttachId:s[a(817)],DataLen:n[a(697)](Number,s[a(630)]),Section:{DataLen:0,StartPos:0},UserName:t,Wxid:this[a(585)]}}))[a(438)][a(462)][a(457)]}async[_0x1f4836(723)+"MiniProgramThumb"](e,t){var a=_0x1f4836,e=(await xmlToJson(e))[a(793)].appmsg[a(813)];return(await SyyyRequest[a(820)]({url:a(488)+a(592)+a(497),data:{FileAesKey:e[a(658)],FileNo:e[a(552)+"rl"],Wxid:this[a(585)]}}))[a(438)][a(685)]}async["getMessage"+_0x1f4836(587)+"b"](e,t){var a=_0x1f4836,e=(await{ydNgx:function(e,t){return e(t)}}[a(706)](xmlToJson,e))[a(793)][a(471)][a(813)];return(await SyyyRequest.post({url:a(488)+a(592)+"age",data:{FileAesKey:e[a(658)],FileNo:e[a(677)+"l"],Wxid:this[a(585)]}})).Data[a(685)]}async[_0x1f4836(679)+_0x1f4836(872)+"ge"](e,t){var a=_0x1f4836;await SyyyRequest.post({url:a(635)+a(589),data:{ToWxid:e,CardWxId:t[a(454)+"e"](),CardNickName:t[a(799)+"e"](),CardAlias:t[a(440)](),Wxid:this[a(585)]}});return(new Response)[a(683)](_0x456497())[a(789)+"revokeinfo"]({clientmsgid:_0x456497(),newclientmsgid:{QzITO:function(e){return e()}}[a(701)](_0x456497),createtime:(new Date)[a(468)]()})}async[_0x1f4836(874)](){var e=_0x1f4836,t={Vptkk:function(e){return e()},XRNXB:function(e){return e()}};return await SyyyRequest[e(804)]({url:e(521)+e(710)+this[e(585)],data:{}}),(new Response)[e(683)](t[e(865)](_0x456497))["setMessage"+e(772)]({clientmsgid:t.XRNXB(_0x456497),newclientmsgid:t[e(865)](_0x456497),createtime:(new Date)[e(468)]()})}async[_0x1f4836(705)+_0x1f4836(497)](e,t,a){var n=_0x1f4836;return SyyyRequest[n(820)]({url:"/Msg/Revoke",data:{ClientMsgId:t,CreateTime:0,NewMsgId:a,ToUserName:e,Wxid:this[n(585)]}})}async[_0x1f4836(641)+"Room"](e,t){var a=_0x1f4836;return(await SyyyRequest.post({url:a(560)+"ateChatRoom",data:{UserList:e,Wxid:this[a(585)]}}))[a(438)][a(504)+"me"][a(581)]}async[_0x1f4836(670)+"roomMembers"](e,t){var a=_0x1f4836;await SyyyRequest.post({url:"/Group/Add"+a(458)+a(707),data:{ChatRoomName:e,ToWxids:t,Wxid:this[a(585)]}})}async[_0x1f4836(777)+_0x1f4836(442)](e,t){var a=_0x1f4836;await SyyyRequest[a(820)]({url:a(862)+a(458)+"mber",data:{ChatRoomName:e,ToWxids:t,Wxid:this[a(585)]}})}async["getChatRoo"+_0x1f4836(860)](n){const s={yVNAc:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x7be8;try{e(await SyyyRequest[a(820)]({url:"/Group/Get"+a(886),data:{QID:n,Wxid:this[a(585)]}}))}catch(e){s[a(868)](t,e)}})}async[_0x1f4836(493)+"mName"](e,t){var a=_0x1f4836;await SyyyRequest[a(820)]({url:a(595)+"ChatRoomName",data:{Content:t,QID:e,Wxid:this.wxid}})}async[_0x1f4836(882)+_0x1f4836(434)+_0x1f4836(700)](e){var t=_0x1f4836;await SyyyRequest[t(820)]({url:"/Group/Get"+t(626)+t(656),data:{QID:e,Wxid:this[t(585)]}})}async["setChatRoomAnnouncem"+_0x1f4836(700)](e,t){var a=_0x1f4836;await SyyyRequest.post({url:a(595)+a(687)+a(845),data:{Content:t,QID:e,Wxid:this[a(585)]}})}async[_0x1f4836(842)](e,t,a,n){var s=_0x1f4836;await SyyyRequest[s(820)]({url:s(450)+s(864),data:{V1:a,V2:t,Wxid:this[s(585)],Scene:n}})}async[_0x1f4836(420)+"st"](){const o={OARat:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x7be8;try{var n=await SyyyRequest[a(820)]({url:a(770)+a(898)+this[a(585)],data:{}}),s=[];if(n[a(438)]["labelPairL"+a(646)])for(const r of n[a(438)][a(465)+a(646)]){var i=(new Label)[a(460)](r[a(830)])[a(738)](r[a(579)]);s[a(855)](i)}o[a(574)](e,s)}catch(e){}})}async[_0x1f4836(650)](e){var t=_0x1f4836;return await SyyyRequest[t(820)]({url:t(765),data:{LabelName:e,wxid:this[t(585)]}})}async[_0x1f4836(435)+"l"](s){const i={DsKsq:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x7be8;try{var n=await SyyyRequest[a(820)]({url:"/Label/Delete",data:{LabelID:String(s),Wxid:this.wxid}});i[a(430)](e,n)}catch(e){}})}async["setContactLabel"](s,i){return new Promise(async(e,t)=>{var a=_0x7be8,n=i[a(875)](e=>!isNaN(e));try{e(await SyyyRequest[a(820)]({url:a(624)+a(535),data:{LabelID:n[a(643)](",")||"",ToWxids:s,wxid:this[a(585)]}}))}catch(e){}})}}export{Api};