const _0x209dbe=_0xb718;function _0x43ae(){const t=["initialize","1213226sjUowL","setUUID","set","30975oXHWDm","17104MLALop","pathExists","323632ebfRWM","ger]","1398186briTfA","793587ySbwce","it() first","deleteToke","delete","close","baseDir","getUUID","FMHoH","token-cach","tokenStore",".wechaty","14qjwSim","er is not ","VhQNb","1123060HKrRif","4Nvoaaw","d. Call in","36xMgwHa","TokenManag","mkdirp","homedir","init","FrCHG","join"];return(_0x43ae=function(){return t})()}!function(){for(var t=_0xb718,e=_0x43ae();;)try{if(136185==-parseInt(t(227))*(parseInt(t(243))/2)+-parseInt(t(232))/3*(-parseInt(t(247))/4)+-parseInt(t(226))/5+parseInt(t(231))/6+parseInt(t(223))/7+parseInt(t(229))/8+-parseInt(t(249))/9*(parseInt(t(246))/10))break;e.push(e.shift())}catch(t){e.push(e.shift())}}();import _0x4f8df6 from"fs-extra";function _0xb718(t,e){const r=_0x43ae();return(_0xb718=function(t,e){return t-=219,r[t]})(t,e)}import _0x32f935 from"os";import _0x325f53 from"path";import"wechaty-puppet";import{FlashStore}from"flash-store";const PRE="[TokenMana"+_0x209dbe(230);class TokenManager{[_0x209dbe(241)];[_0x209dbe(237)];constructor(){var t=_0x209dbe,e={XPaOq:t(242)};this[t(237)]=_0x325f53[t(221)](_0x32f935[t(252)](),e.XPaOq,t(240)+"e")}async[_0x209dbe(219)](){var t=_0x209dbe,e={FrCHG:t(241)};await _0x4f8df6[t(228)](this[t(237)])||await _0x4f8df6[t(251)](this[t(237)]),this.tokenStore=new FlashStore(_0x325f53[t(221)](this[t(237)],e[t(220)]))}async[_0x209dbe(238)](t){var e=_0x209dbe,r={FMHoH:"TokenManag"+e(244)+e(222)+e(248)+e(233)+"."};if(this[e(241)])return this[e(241)].get(t);throw new Error(r[e(239)])}async[_0x209dbe(224)](t,e){var r=_0x209dbe,a={VhQNb:r(250)+r(244)+"initialize"+r(248)+"it() first."};if(!this.tokenStore)throw new Error(a[r(245)]);await this[r(241)][r(225)](t,e)}async[_0x209dbe(234)+"n"](t){var e=_0x209dbe,r={zXBoQ:e(250)+e(244)+e(222)+e(248)+"it() first."};if(!this[e(241)])throw new Error(r.zXBoQ);await this[e(241)][e(235)](t)}async[_0x209dbe(236)](){var t=_0x209dbe,e={nuUYS:"TokenManager is not "+t(222)+t(248)+t(233)+"."};if(!this[t(241)])throw new Error(e.nuUYS);await this.tokenStore.close()}}export{TokenManager};