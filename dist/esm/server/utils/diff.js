const _0x2c68e9=_0x4c80;function _0x4c80(e,r){const t=_0x1a18();return(_0x4c80=function(e,r){return e-=359,t[e]})(e,r)}!function(){for(var e=_0x4c80,r=_0x1a18();;)try{if(421497==+parseInt(e(397))+-parseInt(e(390))/2+parseInt(e(401))/3*(parseInt(e(381))/4)+parseInt(e(396))/5*(parseInt(e(363))/6)+-parseInt(e(382))/7*(parseInt(e(362))/8)+parseInt(e(370))/9*(parseInt(e(398))/10)+-parseInt(e(377))/11)break;r.push(r.shift())}catch(e){r.push(r.shift())}}();import{EventEmitter}from"events";function _0x1a18(){const e=["hasDeviceC","emit","members","processCha","newDevices","4087578rahVdC","diffMember","length","removed","44xiEjOh","1075543eFfDIJ","notifyChan","ZZfXs","nges","entries","added","poll","oldDevices","1538070raHNXH","size","setOldDevi","ces","updated","get","5ceDFIj","498025MlosFZ","190RvBLOM","push","changes","198267aTJwoa","baBqC","轮询时出错:","has","sfMwv","deviceId","8SbUtKg","2367696RCmvwC","change","checkAllDe","forEach","vices","stringify","Qtdfc","45549SRXEKs","hanged"];return(_0x1a18=function(){return e})()}class DeviceManager extends EventEmitter{[_0x2c68e9(389)]=new Map;[_0x2c68e9(376)]=new Map;constructor(){super()}async[_0x2c68e9(388)](r){for(var t=_0x2c68e9;;){try{var e=this[t(365)+t(367)]();this[t(375)+t(385)](e)}catch(e){console.error(t(403),e)}await new Promise(e=>setTimeout(e,r))}}[_0x2c68e9(392)+_0x2c68e9(393)](e){this[_0x2c68e9(389)]=e}["setNewDevices"](e){this[_0x2c68e9(376)]=e}[_0x2c68e9(365)+_0x2c68e9(367)](){var e,r,t=_0x2c68e9,s={sfMwv:function(e,r){return r<e},baBqC:function(e,r){return r<e},Qtdfc:function(e,r){return r<e}},n=[];for([e,r]of this[t(376)][t(386)]()){var c=this[t(389)].get(e)||new Map;if(this["hasDeviceC"+t(371)](c,r))for(var[a,i]of r[t(386)]()){i=this.diffMembers(c[t(395)](a)?.members||new Map,i[t(374)]);(s[t(360)](i[t(387)][t(379)],0)||s[t(402)](i[t(380)][t(379)],0)||s[t(369)](i[t(394)][t(379)],0))&&n[t(399)]({deviceId:e,groupId:a,changes:i})}}return n}[_0x2c68e9(372)+_0x2c68e9(371)](e,r){var t,s,n=_0x2c68e9;if(e.size!==r[n(391)])return!0;for([t,s]of r.entries()){var c=e[n(395)](t);if(!c||JSON.stringify(c)!==JSON[n(368)](s))return!0}return!1}[_0x2c68e9(378)+"s"](s,n){const c=_0x2c68e9,a=[],i=[],o=[];return n[c(366)]((e,r)=>{var t=c;s[t(359)](r)?(r=s[t(395)](r),JSON[t(368)](r)!==JSON[t(368)](e)&&o[t(399)](e)):a[t(399)](e)}),s[c(366)]((e,r)=>{var t=c;n.has(r)||i[t(399)](e)}),{added:a,removed:i,updated:o}}[_0x2c68e9(375)+"nges"](e){var r=_0x2c68e9;for(const t of e)this[r(383)+"ge"](t[r(361)],t.groupId,t[r(400)])}[_0x2c68e9(383)+"ge"](e,r,t){var s=_0x2c68e9,n={ZZfXs:s(364)};this[s(373)](n[s(384)],{deviceId:e,groupId:r,changes:t})}}export{DeviceManager};