"use strict";function _0x4a9e(e,r){const t=_0x34bf();return(_0x4a9e=function(e,r){return e-=146,t[e]})(e,r)}const _0x5c8e5b=_0x4a9e;function _0x34bf(){const e=["diffMember","emit","DeviceMana","get","push","轮询时出错:","checkAllDe","defineProp","error","entries","added","727764cmkPxk","events","forEach","10sNsAsu","910609YnVedc","ces","setNewDevi","updated","deviceId","2539LGOUTF","size","8QcRiGz","change","members","QhSaQ","EventEmitt","length","3118761ncJKib","oldDevices","erty","poll","ger","194foThxN","HfSdn","has","processCha","setOldDevi","290376rDTRxP","nges","stringify","mIsyU","removed","vices","notifyChan","hasDeviceC","1074590bjXjuk","newDevices","323694ydCJhi","fkkyw"];return(_0x34bf=function(){return e})()}!function(){for(var e=_0x4a9e,r=_0x34bf();;)try{if(359261==+parseInt(e(149))*(-parseInt(e(162))/2)+parseInt(e(177))/3+-parseInt(e(167))/4+parseInt(e(175))/5+-parseInt(e(190))/6+-parseInt(e(194))/7*(-parseInt(e(151))/8)+-parseInt(e(157))/9*(-parseInt(e(193))/10))break;r.push(r.shift())}catch(e){r.push(r.shift())}}(),Object[_0x5c8e5b(186)+_0x5c8e5b(159)](exports,"__esModule",{value:!0}),exports[_0x5c8e5b(181)+"ger"]=void 0;const events_1=require(_0x5c8e5b(191));class DeviceManager extends events_1[_0x5c8e5b(155)+"er"]{[_0x5c8e5b(158)]=new Map;[_0x5c8e5b(176)]=new Map;constructor(){super()}async[_0x5c8e5b(160)](r){for(var t=_0x5c8e5b,n={wOEpu:t(184)};;){try{var e=this[t(185)+t(172)]();this[t(165)+t(168)](e)}catch(e){console[t(187)](n.wOEpu,e)}await new Promise(e=>setTimeout(e,r))}}[_0x5c8e5b(166)+_0x5c8e5b(195)](e){this.oldDevices=e}[_0x5c8e5b(146)+_0x5c8e5b(195)](e){this[_0x5c8e5b(176)]=e}[_0x5c8e5b(185)+_0x5c8e5b(172)](){var e,r,t=_0x5c8e5b,n={fkkyw:function(e,r){return r<e},QhSaQ:function(e,r){return r<e}},c=[];for([e,r]of this.newDevices[t(188)]()){var s=this.oldDevices[t(182)](e)||new Map;if(this[t(174)+"hanged"](s,r))for(var[i,a]of r[t(188)]()){a=this[t(179)+"s"](s.get(i)?.members||new Map,a[t(153)]);(n.fkkyw(a[t(189)][t(156)],0)||n[t(154)](a[t(171)].length,0)||n[t(178)](a[t(147)][t(156)],0))&&c[t(183)]({deviceId:e,groupId:i,changes:a})}}return c}["hasDeviceChanged"](e,r){var t,n,c=_0x5c8e5b;if({HfSdn:function(e,r){return e!==r}}[c(163)](e[c(150)],r[c(150)]))return!0;for([t,n]of r[c(188)]()){var s=e[c(182)](t);if(!s||JSON.stringify(s)!==JSON[c(169)](n))return!0}return!1}[_0x5c8e5b(179)+"s"](n,c){const s=_0x5c8e5b,i={mIsyU:function(e,r){return e!==r}},a=[],o=[],f=[];return c[s(192)]((e,r)=>{var t=s;n[t(164)](r)?(r=n[t(182)](r),i[t(170)](JSON.stringify(r),JSON[t(169)](e))&&f[t(183)](e)):a[t(183)](e)}),n[s(192)]((e,r)=>{var t=s;c[t(164)](r)||o[t(183)](e)}),{added:a,removed:o,updated:f}}[_0x5c8e5b(165)+_0x5c8e5b(168)](e){var r=_0x5c8e5b;for(const t of e)this[r(173)+"ge"](t[r(148)],t.groupId,t.changes)}[_0x5c8e5b(173)+"ge"](e,r,t){var n=_0x5c8e5b;this[n(180)](n(152),{deviceId:e,groupId:r,changes:t})}}exports[_0x5c8e5b(181)+_0x5c8e5b(161)]=DeviceManager;