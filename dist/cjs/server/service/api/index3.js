"use strict";const _0x51afaf=_0x2fe9;function _0x3230(){const a=["List?wxid=","/Group/Del","Image","Content","url","chatrooms","978020466a","GetFriendR","/Friend/De","700_4dfcfc","eEmoji","EIr056iMnf","QDfCx","CacheManag","0270823229","init","p;upgradet","mQrCode","callback","../../util","sktLZ","/Login/Log","140f3e_1","JDLvi","logout","errpage?ap","../../cach","/User/GetQ","EsdQr","sage","RHMOo","token","xin.qq.com","Sex","sJkCA","/Msg/Uploa","actRemark","getContact","push","tjqir","RCode","mThumb","getLoginCo","xgONn","rrcmoyd12_","ChatRoomMe","sendImageM","../utils/p","join","/Msg/Share","aeskey","uEIaA","NickName","@cdn_30570","../../map/","index.js","setUUID","/Group/Set","HzFbD","/Tools/Dow","jsonToXml","/x/","3057020100","zsMoc","UYDj/Zspdy","ge_timer","mmaxcount","服务出错","P+4382v9Q7","mmemberLis","FYSmZ","__importDe","onLoginSuc","checkToken","AddMsgs","ner","xmlToJson","d68d867756","Label","chatroomme","msg_825269","setMsgid","DisplayNam","msg","204cfb2499","tCardMessa","ist","0518080302","stringify","sendFileMe","SsyyyReque","updateSelf","RoomInvita","data","EUxDJ","setDisplay","nickName","ogin","mAnnouncem","https://mp","setSignatu","cess","userName","labelName","get","setMessage","MiniProgra","ClLTDHZQ6R","addLabel","post","title","ime","/Msg/SendA","mberList","0424373630","revokeMess","close","SendAppMes","/Msg/SendE","setAvatar","appid","DownloadIm","txt","ateList","435372d346","v1_7wKTlnL","9668574vlmUOH","467376frJhSg","default","/Friend/Se","getInitMes","8177193250","/Group/Qui","kJzr34qhhd","MsgSource","setContact","oadFile","getChatroo","message","Room","acctSectRe","UserName","username","MsgId","o8SkgbwX5o","poll_heart","cdnmidimgu","a645d1f214","heart","getMyConta","stop","SyyyReques","removeLabe","../index.j","chatroomNi","setInviter","CPFHa","xfghX","21BjgTdS","age","2f58b70204","2d38666462","AntispamTi","setAtList","HeartBeat ","msgsource","70f5fd6346","a5c0085ef9","2283821063","sendMessag","044b304902","ZTgfkeB","machineIdS","checkLogin","2126fde509","length","0050201000","wWOQM","labelID","79izHT2VeB","buffer","foDetail","YaOmG","4c4d3700","0100040500","4146460uqGcwP","code","cc2100250f","essage","atuserlist","QRCode","b249920203","Data","getRoomIds","vCxLV","son.js","/Msg/SendC","b02041424e","onSync","test","332322d343","idpaR","46cd881fa9","oice","jbBKt","d1f21482a9","setTousern","quitChatRo","mberDetail","/Msg/Revok","3239643232","Out?wxid=","7009346818","/Msg/SendT","45aa6d4173","Response","AbkxO","801f4f18eb","184","exit","/Tools/Upl","selfContac","Polling","onQrCodeEv","202032f591","file?wxid=","ame","nJvZNQCfoF","name","NewChatroo","8yjkqx122","Xhmdb","c9eea8140f","0343032396","+nLFWQcFHc","/User/GetC","warn",".weixin.qq","__esModule","labelPairL","onOneClick","elation","cdnattachu","poll_messa","smallHeadI","setNicknam","KgGhh","nloadVoice","setAntispa",".com/mp/wa","/Label/Upd","129960phFBdh","01000204cf","deByFirst","sendHeartb","x5b2kETRF9","setUsernam","ent","RoomMember","getAlias","ckName","kickout","DNFile","82a9c9eea8","1491926LBparD","eNFId","ype=3#wech","clientmsgi","setContent","9da1c45bee","ndRequest","IBNUg","/Group/Add","jVgk1sYTPs","toObject","Code","dImg","_cacheMgr","3239663363","poll_chang","_client","Event","65264","videomsg","8b32c04243","/Msg/Sync","string","2d34633235","0466a8b32c","getChatRoo","sendVoiceM","/Friend/Ge","emit","setRoomMem","inviteChat","NORMAL","getSecondL","Alias","Attach","at_redirec","新建文本文档 (2)","Signature","Api","2d30666231","sageRespon","attachid","bXjeE","inCheckQR?","filter","ssVerify","ppet","/User/Upda","erty","31948","ber","cuid","eLink","remark","Message","CGKOs","mticket","eat","nmg7opHS3F","forwardMes","405004c505","SmallHeadI","moji","RWGHD","KOSdq","rName","getChatCon","5efa5257be","setChatRoo","jyPxmdi+Gj","ayvZX","appmsg","/Login/Hea","setRoom","nIntoGroup","wechaty-pu","339652d626","chatroomMa","setAlias","3208eydXlX","er multipl","getTime","getMessage","hatRoomInf","10300","roomMember","teProfile","revokeinfo","ChatRoomOw","mber","pid=","6336336376","createChat","ContactLis","etail","view","dkmyP","FromUserNa","aSRvk","Voice","userInfo","SBmFd","getLabelLi","/Msg/SendV","states","e_contact","setMsgcont","45df3d1bd8","data:image","LkwIO","setChatroo","lete","mData","deNew","Uuid","ghNFJ","ZPely","sagewenjia","inGetQR","playlength","7363061356","106112608","/Tools/Cdn","Contact","TpFKQ","105138159","woSuw","split","EvNsE","ontractPro","rtBeat?wxi","bURmKeTyO6","wxid","rname","ELBGO","mgUrl","tact","ejtJe","getNicknam","26410AFExLD","appattach","/Group/Cre","thumbURL",".txt","ggFOpF8kP4","setCreatet","contact","6266616431","255ZBdUgC","mbers","expiredTim","uuid","vidAQMyHYi","7366327002","COXxa","eMiniProgr","184 B","Video","2d34633965","chatroomMe","100","mName","4020405140","ation","mMembers","/Group/Get","cdnthumbur","2764_17223","MsgType","747","getRoomMem","setGender","vhJUZ","ISvqpWoFoE","登录成功","mContact","tion","setName","error","3539320204","mowneruser","chatRoomNa","setRemark","CVabo","tContractD","getUUID","3637640204","AttachThum","setId","ChatRoomIn","inviterUse","4c505700","poll","setType","2d38373533","ToUserName","16389RQSBMS","wxid_yqw0i","ckToken","SeEiU","cket","2f591b0204"];return(_0x3230=function(){return a})()}!function(){for(var a=_0x2fe9,e=_0x3230();;)try{if(944845==-parseInt(a(621))+-parseInt(a(700))/2*(-parseInt(a(769))/3)+-parseInt(a(484))/4+-parseInt(a(542))/5+-parseInt(a(483))/6+-parseInt(a(515))/7*(-parseInt(a(608))/8)+parseInt(a(817))/9*(parseInt(a(760))/10))break;e.push(e.shift())}catch(a){e.push(e.shift())}}();var ImageType,__importDefault=this&&this[_0x51afaf(428)+"fault"]||function(a){var e=_0x51afaf;return a&&a[e(595)]?a:{default:a}};Object["defineProp"+_0x51afaf(669)](exports,_0x51afaf(595),{value:!0}),exports[_0x51afaf(659)]=void 0;const index_js_1=require(_0x51afaf(510)+"s"),cuid_1=__importDefault(require(_0x51afaf(672))),polling_js_1=require(_0x51afaf(404)+"olling.js"),node_machine_id_1=require("node-machine-id"),wechaty_puppet_1=require(_0x51afaf(696)+_0x51afaf(667)),index_js_2=require(_0x51afaf(411)+_0x51afaf(412)),cache_manager_js_1=require(_0x51afaf(849)+"e-manager.js"),xml_to_json_js_1=require(_0x51afaf(842)+"s/xml-to-j"+_0x51afaf(552));function _0x2fe9(a,e){const t=_0x3230();return(_0x2fe9=function(a,e){return a-=390,t[a]})(a,e)}!function(a){var e=_0x51afaf,t={dkmyP:"THUMB",sktLZ:e(652)};a[a[t[e(717)]]=0]=t[e(717)],a[a.NORMAL=1]=t[e(843)],a[a.HD=2]="HD"}(ImageType=ImageType||{});class Api{["_cacheMgr"];[_0x51afaf(637)];[_0x51afaf(854)];["uuid"];[_0x51afaf(753)];[_0x51afaf(841)];[_0x51afaf(600)+_0x51afaf(422)];constructor(a){this._client=a}async[_0x51afaf(838)](){var a=_0x51afaf;this[a(634)]=new cache_manager_js_1[a(836)+"er"](this.token),await this[a(634)][a(838)]()}async["login"](a,e){const t=_0x51afaf,i={eNFId:"puppet_padlink_",aSRvk:t(424),RWGHD:function(a,e){return a*e}};this[t(841)]=e;let s=this[t(637)][t(854)][t(748)](i[t(622)])[1];const n=(0,node_machine_id_1[t(529)+"ync"])();var e=await this[t(430)]({token:s});1!==e[t(543)]?wechaty_puppet_1.log[t(593)](e[t(440)]||i[t(719)]):(setInterval(()=>this[t(611)+"eat"]({token:s,device_id:n}),i[t(684)](60,1e3)),this[t(611)+"eat"]({token:s,device_id:n}),this[t(854)]=s,await this[t(838)](),e=await this._cacheMgr[t(806)](s),this[t(772)]=e?.[t(772)],this.wxid=e?.wxid,e?.wxid?this[t(653)+t(454)]():await this["getLoginCo"+t(610)]())}async[_0x51afaf(611)+_0x51afaf(678)](a){var e=_0x51afaf;try{var t=await index_js_1[e(447)+"st"][e(466)]({url:"/token/heartbeat",data:a});-2===t.code&&(console[e(799)](t[e(440)]),process[e(576)](1))}catch(a){}}async[_0x51afaf(430)](a){var e=_0x51afaf;return index_js_1[e(447)+"st"].post({url:"/token/che"+e(819),data:a})}["getLoginCo"+_0x51afaf(610)]=async()=>{const n=_0x51afaf,r={SBmFd:function(a,e){return a*e},CGKOs:function(a,e){return a==e},FYSmZ:function(a,e){return a==e},tjqir:function(a,e){return a(e)}};try{let i=this[n(841)],s=await this[n(399)+n(734)](this[n(854)]);if(1==s[n(632)]){this[n(772)]=s[n(549)].Uuid,i[n(597)+n(638)]({status:1,imageUrl:"http://wei"+n(855)+n(418)+s[n(549)][n(735)]});const o=new polling_js_1[n(579)];let e=null;o[n(813)](2e3,async()=>{const t=n;var a=await this[t(530)+"Status"]();if(e=e||setTimeout(async()=>{var a=t;o[a(507)](),i[a(580)+a(614)]({status:5}),await this[a(399)+a(610)]()},r[t(722)](a[t(549)][t(771)+"e"],1e3)),r[t(676)](a.Code,0)){if(r[t(676)](a.Data[t(725)],1)&&i["onQrCodeEv"+t(614)]({status:2}),r[t(676)](a[t(549)][t(725)],4)&&i[t(580)+t(614)]({status:4}),r[t(427)](a[t(675)],t(795))){o[t(507)](),e&&(r[t(396)](clearTimeout,e),e=null),i["onQrCodeEv"+t(614)]({status:3}),this[t(634)][t(413)](this[t(854)],{uuid:s.Data[t(735)],wxid:a[t(549)][t(497)+"sp"][t(459)]}),this[t(753)]=a[t(549)].acctSectResp.userName;try{let{messageList:a,contactList:e}=await this.getInitMessage();this[t(637)].selfContact=await this[t(506)+"ct"](this[t(753)]),await i["onLoginSuc"+t(458)](this[t(637)].selfContact),await i[t(555)]({getContactList(){return e},getMessageList(){return a}}),this.poll_change_contact(3e3),this[t(600)+"ge"](),this[t(502)]()}catch(a){}}}else a[t(632)]})}}catch(a){}};async[_0x51afaf(653)+"ogin"](){var t=_0x51afaf;try{await this[t(505)]();let{messageList:a,contactList:e}=await this[t(487)+t(852)]();this._client[t(578)+"t"]=await this.getMyContact(this[t(753)]),await this[t(841)][t(429)+"cess"](this._client[t(578)+"t"]),await this.callback[t(555)]({getContactList(){return e},getMessageList(){return a}}),this[t(600)+"ge"](),this[t(636)+"e_contact"](3e3),this.poll_heart()}catch(a){await this[t(399)+t(610)]()}}[_0x51afaf(600)+"ge"](){const i=_0x51afaf,s={ayvZX:i(495),KOSdq:function(a,e){return e<a}},a=new polling_js_1.Polling;(this.poll_message_timer=a)[i(813)](1e3,async()=>{var a=i,{messageList:e,contactList:t}=await this[a(703)]();0<e[a(532)]&&this[a(637)].emit(s[a(691)],e),s[a(685)](t[a(532)],0)&&this._client.emit(a(767),t)})}async[_0x51afaf(399)+_0x51afaf(734)](a=""){var e=_0x51afaf,t={EUxDJ:e(643)};return index_js_1[e(508)+"t"].post({url:e(844)+e(739),data:{DeviceID:a,DeviceName:t[e(451)],Proxy:{ProxyIp:e(643),ProxyPassword:t[e(451)],ProxyUser:t[e(451)]}}})}async[_0x51afaf(530)+"Status"](){var a=_0x51afaf;return index_js_1[a(508)+"t"][a(466)]({url:"/Login/Log"+a(664)+"uuid="+this[a(772)],data:{}})}[_0x51afaf(502)](){const a=_0x51afaf,e=new polling_js_1[a(579)];e[a(813)]({AbkxO:function(a,e){return a*e}}[a(573)](150,1e3),async()=>{var e=a;try{await this[e(505)]()}catch(a){this[e(600)+"ge_timer"].stop(),await this[e(634)]?.[e(473)](),this[e(634)]=void 0,this._client[e(649)](e(618),"")}})}async["heart"](a=20){var e=_0x51afaf,t={idpaR:function(a,e){return a===e},KgGhh:e(521)+"failed aft"+e(701)+"e attempts"};let i=0;for(;i<a;){try{var s=await index_js_1[e(508)+"t"][e(466)]({url:e(693)+e(751)+"d="+this[e(753)]});if(t[e(558)](s[e(675)],"成功")||!s)return s}catch(a){}i++}throw new Error(t[e(603)])}[_0x51afaf(636)+_0x51afaf(726)]=async e=>{for(var a=_0x51afaf,t={woSuw:function(a,e){return a!==e},zFwJe:function(a,e){return a<e},vhJUZ:function(a,e){return a!=e}};;){try{var i=await this._cacheMgr?.[a(550)]();if(!i)return;for(const d of i)try{var s,n,r=await this[a(646)+a(796)](d),o=await this._cacheMgr?.[a(791)+"ber"](d);o&&0<r[a(494)+a(426)+"t"]()[a(532)]?(s=o,n=r[a(631)]().chatroommemberList,(t[a(747)](s[a(532)],n[a(532)])&&t.zFwJe(Math.abs(s.length-n[a(532)]),3)||t[a(793)](JSON[a(445)](s),JSON[a(445)](n)))&&(this[a(634)]?.[a(650)+a(671)](d,r[a(631)]()["chatroomme"+a(470)]),this._client[a(649)](a(767),[r]))):0!==r["getChatroo"+a(426)+"t"]()[a(532)]&&this._cacheMgr?.[a(650)+"ber"](d,r[a(631)]()[a(436)+a(470)])}catch(a){}}catch(a){}await new Promise(a=>setTimeout(a,e))}};async[_0x51afaf(487)+"sage"](){const a=_0x51afaf,s={JDLvi:function(a){return a()},EsdQr:function(a){return a()}};let n=this,r=[],o=[];return await s[a(851)](async function a(){var e=_0x2fe9,{messageList:t,contactList:i}=await n[e(703)](!0);r[e(395)](...t),o[e(395)](...i),t&&0==t[e(532)]&&0==i.length||await s[e(846)](a)}),{messageList:r,contactList:o}}async[_0x51afaf(703)](a){var e=_0x51afaf,t={bXjeE:function(a,e){return a==e},uEIaA:function(a,e){return a||e}},i=await index_js_1[e(508)+"t"][e(466)]({url:e(642),data:{Scene:0,Synckey:e(643),Wxid:this[e(753)]}}),s=[];if(t[e(663)](i.Code,0)&&(i[e(549)][e(431)]&&0<i.Data[e(431)].length))for(const d of i.Data.AddMsgs){var n=(new index_js_2[e(675)])["setFromuse"+e(754)](d[e(718)+"me"][e(643)])[e(563)+e(583)](d.ToUserName[e(643)])[e(809)](d[e(500)])[e(814)](d[e(789)])[e(766)+e(468)](d.CreateTime),r=/@chatroom$/[e(556)](d.FromUserName[e(643)]),o=/@chatroom$/[e(556)](d.ToUserName[e(643)]);let a=[];t[e(408)](r,o)&&(this._cacheMgr?.[e(694)](d[e(718)+"me"][e(643)]||d[e(816)][e(643)],!0),r=(await(0,xml_to_json_js_1[e(433)])(d[e(491)])).msgsource?.[e(546)]?(await(0,xml_to_json_js_1[e(433)])(d[e(491)]))[e(522)][e(546)][e(748)](","):[],a=r[e(665)](a=>""!==a)),n[e(625)](d[e(826)][e(643)])[e(520)](a),s[e(395)](n)}return{messageList:s,contactList:[]}}async["send_text"](a,e,t){var i=_0x51afaf;await index_js_1[i(508)+"t"][i(466)]({url:i(570)+"xt",data:{At:t.join(","),Content:e,ToWxid:a,Type:0,Wxid:this[i(753)]}});return(new index_js_2[i(572)])[i(438)]((0,cuid_1[i(485)])())[i(462)+i(708)]({clientmsgid:(0,cuid_1[i(485)])(),newclientmsgid:(0,cuid_1.default)(),createtime:(new Date)[i(702)]()})}async[_0x51afaf(403)+"essage"](a,e,t){var i=_0x51afaf;await index_js_1[i(508)+"t"].post({url:i(392)+i(633),data:{Base64:e,ToWxid:a,Wxid:this[i(753)]}});return(new index_js_2.Response)[i(438)]((0,cuid_1[i(485)])())["setMessage"+i(708)]({clientmsgid:(0,cuid_1[i(485)])(),newclientmsgid:(0,cuid_1[i(485)])(),createtime:(new Date)[i(702)]()})}async["sendVideoM"+_0x51afaf(545)](a,e,t){var i=_0x51afaf;await index_js_1.SyyyRequest.post({url:i(724)+"ideo",data:{Base64:e,ImageBase64:i(729)+"/png;base64,"+t,PlayLength:0,ToWxid:a,Wxid:this[i(753)]}});return(new index_js_2[i(572)])[i(438)]((0,cuid_1[i(485)])())[i(462)+"revokeinfo"]({clientmsgid:(0,cuid_1[i(485)])(),newclientmsgid:(0,cuid_1.default)(),createtime:(new Date)[i(702)]()})}async[_0x51afaf(446)+"ssage"](a){var e=_0x51afaf;await index_js_1.SyyyRequest[e(466)]({url:e(577)+e(493),data:{Base64:a,Wxid:this[e(753)]}});return(new index_js_2.Response)[e(438)]((0,cuid_1[e(485)])())[e(462)+e(708)]({clientmsgid:(0,cuid_1.default)(),newclientmsgid:(0,cuid_1[e(485)])(),createtime:(new Date).getTime()})}async[_0x51afaf(526)+_0x51afaf(833)](a,e,t){var i=_0x51afaf;await index_js_1[i(508)+"t"].post({url:i(475)+i(683),data:{Md5:e,ToWxid:a,TotalLen:t,Wxid:this.wxid}});return(new index_js_2[i(572)])[i(438)]((0,cuid_1[i(485)])())["setMessage"+i(708)]({clientmsgid:(0,cuid_1[i(485)])(),newclientmsgid:(0,cuid_1[i(485)])(),createtime:(new Date)[i(702)]()})}async["sendMessag"+_0x51afaf(673)](a,e,t){var i=_0x51afaf,s={YaOmG:"view",RHMOo:i(419)+i(527)+i(609)+i(548)+i(517)+i(774)+"046690b7310424373766"+i(567)+i(518)+i(644)+i(815)+i(660)+i(768)+i(800)+i(444)+i(541)+i(540),qenHt:i(574)+"05147db6b1"+i(524)+"45",fooLJ:i(705),AikEO:i(781),wWOQM:i(437)+i(837)+i(790),ejtJe:i(742)},t={appmsg:{$:{appid:"",sdkver:"0"},title:t[i(467)],des:t.description,action:s[i(539)],type:"5",showtype:"0",content:"",url:t[i(827)],dataurl:"",lowurl:"",lowdataurl:"",recorditem:"",thumburl:t[i(763)],messageaction:"",laninfo:"",extinfo:"",sourceusername:"",sourcedisplayname:"",commenturl:"",appattach:{totallen:"0",attachid:"",emoticonmd5:"",fileext:"",aeskey:"",cdnthumburl:s[i(853)],cdnthumbaeskey:s.qenHt,cdnthumbmd5:"661e8de943"+i(525)+i(531)+"4b",cdnthumblength:s.fooLJ,cdnthumbwidth:s.AikEO,cdnthumbheight:s.AikEO},webviewshared:{publisherId:s[i(534)],publisherReqId:s[i(758)]},weappinfo:{pagepath:"",username:"",appid:"",appservicetype:"0"},websearch:""}},s=await(0,xml_to_json_js_1[i(417)])(t),t=await(0,xml_to_json_js_1[i(417)])({msg:t});await index_js_1[i(508)+"t"][i(466)]({url:i(469)+"pp",data:{ToWxid:e,Type:0,Wxid:this[i(753)],Xml:s}});return(new index_js_2[i(474)+i(661)+"se"]).setMsgid((0,cuid_1.default)())[i(462)+i(708)]({clientmsgid:(0,cuid_1[i(485)])(),newclientmsgid:(0,cuid_1.default)(),createtime:(new Date)[i(702)]()})[i(727)+"ent"](t)}async[_0x51afaf(526)+_0x51afaf(776)+"am"](a,e){var t=_0x51afaf,i={EvNsE:t(716),QDfCx:t(571)+t(488)+t(559)+"2d",TpFKQ:"jpg",HzFbD:"dbb0e647bd"+t(728)+"3d22d51b8073",xrVtv:t(688)+t(523)+"76f997e79129",jbBKt:t(781)},{appid:e,description:s,iconUrl:n,shareId:r,thumbKey:o,thumbUrl:d,username:c,title:_,pagePath:f}=e,_={appmsg:{appid:e,title:_,action:i[t(749)],type:"33",showtype:"0",url:t(456)+t(594)+t(606)+t(848)+t(711)+e+("&amp;type=upgrade&am"+t(839)+t(623)+t(656))+"t",md5:i[t(835)],sourcedisplayname:s,appattach:{totallen:"0",fileext:i[t(745)],filekey:i[t(415)],cdnthumburl:d,aeskey:i.xrVtv,cdnthumbaeskey:o,cdnthumbmd5:i.QDfCx,encryver:"1",cdnthumblength:t(639),cdnthumbheight:i.jbBKt,cdnthumbwidth:i[t(561)]},webviewshared:{publisherReqId:"0"},weappinfo:{pagepath:f,username:c,appid:e,type:"2",weappiconurl:n,appservicetype:"0",shareId:r}}},s=await(0,xml_to_json_js_1[t(417)])(_),d=await(0,xml_to_json_js_1.jsonToXml)({msg:_});await index_js_1[t(508)+"t"][t(466)]({url:t(469)+"pp",data:{ToWxid:a,Type:0,Wxid:this.wxid,Xml:s}});return(new index_js_2[t(474)+"sageResponse"]).setMsgid((0,cuid_1.default)())[t(462)+t(708)]({clientmsgid:(0,cuid_1[t(485)])(),newclientmsgid:(0,cuid_1.default)(),createtime:(new Date)[t(702)]()})["setMsgcont"+t(614)](d)}async[_0x51afaf(680)+_0x51afaf(852)](a,e){var t=_0x51afaf,i=await(0,xml_to_json_js_1[t(433)])(e),i=await(0,xml_to_json_js_1[t(417)])({appmsg:i[t(440)][t(692)]});await index_js_1[t(508)+"t"][t(466)]({url:t(469)+"pp",data:{ToWxid:a,Type:0,Wxid:this[t(753)],Xml:i}});return(new index_js_2[t(474)+t(661)+"se"])[t(438)]((0,cuid_1[t(485)])())[t(462)+t(708)]({clientmsgid:(0,cuid_1.default)(),newclientmsgid:(0,cuid_1[t(485)])(),createtime:(new Date)[t(702)]()}).setMsgcontent(e)}async[_0x51afaf(680)+_0x51afaf(738)+"n"](a,e){var t=_0x51afaf,i={CVabo:t(777),ZPely:t(716),xfghX:t(419)+t(527)+t(609)+t(548)+t(822)+"1424e97802"+t(645)+t(471)+"61356463352d63643537"+t(779)+"2d626332322d34303430"+t(635)+t(807)+"0514000502"+t(541)+t(812),ghNFJ:"4dfcfca645"+t(562)+t(589)+"3e",NJZmD:t(569)+t(746),pqxgQ:t(544)+t(626)+t(434)+"bb",cZNXb:"wxid_kxbss"+t(587)},i=await(0,xml_to_json_js_1.jsonToXml)({msg:{appmsg:{sdkver:"0",title:t(657)+t(764),des:i[t(804)],type:"6",action:i[t(737)],appattach:{totallen:t(575),fileext:t(479),attachid:t(410)+"20100044b30490201000"+t(441)+t(581)+t(554)+t(829)+t(641)+t(741)+"463352d636"+t(481)+t(697)+t(557)+t(590)+t(712)+t(783)+t(533)+t(681)+t(832)+t(504)+t(620)+t(845),cdnattachurl:i[t(514)],aeskey:i[t(736)],encryver:"0",filekey:t(818)+t(401)+t(788)+t(670),overwrite_newmsgid:i.NJZmD,fileuploadtoken:t(482)+t(421)+t(679)+t(591)+t(584)+"xVMjJr8zu/"+t(536)+t(425)+"GPuzYCdPvw"+t(464)+t(765)+t(612)+t(752)+t(773)+t(690)+t(490)+"GbsFkl8KMI"+t(630)+"OjpV/n9TRf"+t(834)+t(794)+t(501)+t(528)},md5:i.pqxgQ,webviewshared:{},mpsharetrace:{hasfinderelement:"0"},secretmsg:{isscrectmsg:"0"}},fromusername:i.cZNXb,scene:"1",appinfo:{version:"1"}}});await index_js_1[t(508)+"t"][t(466)]({url:t(553)+t(619),data:{Content:i,ToWxid:a,Wxid:this[t(753)]}});return(new index_js_2[t(474)+t(661)+"se"])[t(438)]((0,cuid_1[t(485)])())[t(462)+t(708)]({clientmsgid:(0,cuid_1[t(485)])(),newclientmsgid:(0,cuid_1.default)(),createtime:(new Date)[t(702)]()})[t(727)+t(614)](e)}async[_0x51afaf(647)+_0x51afaf(545)](a,e,t){var i=_0x51afaf;await index_js_1.SyyyRequest.post({url:i(724)+i(560),data:{Base64:e,ToWxid:a,Type:4,VoiceTime:1,Wxid:this.wxid}});return(new index_js_2.Response).setMsgid((0,cuid_1[i(485)])())[i(462)+i(708)]({clientmsgid:(0,cuid_1[i(485)])(),newclientmsgid:(0,cuid_1[i(485)])(),createtime:(new Date)[i(702)]()})}async["getAllChatRoomMembers"](){var a=_0x51afaf,e=[];for(const s of(await index_js_1.SyyyRequest.post({url:"/",data:{type:10114}}))[a(450)][a(450)][a(828)]){var t=[];for(const n in s[a(780)+a(770)])t[a(395)]((new index_js_2[a(402)+a(710)]).setUsername(s[a(780)+a(770)][n].userName).setAvatar(s[a(780)+"mbers"][n]["smallHeadI"+a(756)])[a(602)+"e"](s[a(780)+"mbers"][n][a(453)])[a(512)+a(499)](s[a(780)+a(770)][n][a(811)+a(686)])["setDisplay"+a(585)](s[a(780)+a(770)][n]?.[a(511)+a(617)]));var i=(new index_js_2[a(744)])[a(613)+"e"](s[a(459)]).setNickname(s.nickName)[a(476)](s[a(601)+a(756)])[a(792)](0)[a(457)+"re"]("")[a(803)](s[a(674)])[a(731)+a(423)](s[a(698)+"xCount"])[a(731)+"mmemberList"](t)[a(731)+"mowneruser"+a(585)](s["ownerUserN"+a(583)]);e[a(395)](i)}return e}async[_0x51afaf(646)+"mMembers"](a){var e=_0x51afaf,a=await index_js_1.SyyyRequest[e(466)]({url:e(786)+e(402)+e(565),data:{QID:a,Wxid:this[e(753)]}}),t=[];if(a[e(549)]?.[e(586)+e(733)][e(402)+e(710)])for(const i of a[e(549)][e(586)+e(733)][e(402)+"mber"])t[e(395)]((new index_js_2[e(402)+e(710)])[e(613)+"e"](i[e(498)])[e(476)](i["SmallHeadI"+e(756)])[e(602)+"e"](i[e(409)])[e(452)+e(585)](i?.[e(439)+"e"]||""));return t}async[_0x51afaf(394)](a,e){var t=_0x51afaf,i=/@chatroom$/[t(556)](a);let s;return s=i?await this[t(646)+t(796)](a):{COXxa:function(a,e){return a==e}}[t(775)](a,this[t(637)][t(578)+"t"].getUsername())?this[t(637)][t(578)+"t"]:await this[t(687)+t(757)](a)}async[_0x51afaf(448)+"NickName"](s){const n={LkwIO:function(a,e){return a(e)}};return new Promise(async(a,e)=>{var t=_0x2fe9;try{var i=await index_js_1[t(508)+"t"][t(466)]({url:t(668)+t(707),data:{NickName:s,Wxid:this[t(753)]}});n[t(730)](a,i)}catch(a){n[t(730)](e,a)}})}async[_0x51afaf(448)+_0x51afaf(658)](i){return new Promise(async(a,e)=>{var t=_0x2fe9;try{a(await index_js_1[t(508)+"t"][t(466)]({url:t(668)+t(707),data:{Signature:i,Wxid:this[t(753)]}}))}catch(a){e(a)}})}async[_0x51afaf(394)+_0x51afaf(547)](a,s){const n={CsQfk:function(a,e){return a(e)}};return new Promise(async(a,e)=>{var t=_0x2fe9;try{var i=await index_js_1.SyyyRequest.post({url:t(850)+t(397),data:{Style:s,Wxid:this[t(753)]}});n.CsQfk(a,i)}catch(a){e(a)}})}async["updateCont"+_0x51afaf(393)](a,e){var t=_0x51afaf;await index_js_1[t(508)+"t"][t(466)]({url:t(486)+"tRemarks",data:{Remarks:e,ToWxid:a,Wxid:this.wxid}})}async[_0x51afaf(830)+_0x51afaf(598)](a){var e=_0x51afaf;return await index_js_1.SyyyRequest[e(466)]({url:e(648)+"tFriendRel"+e(784),data:{UserName:a,Wxid:this[e(753)]}})}async["addContact"](a,e,t){var i=_0x51afaf;await index_js_1[i(508)+"t"][i(466)]({url:"/Friend/Se"+i(627),data:{Scene:0,V1:a,V2:e,VerifyContent:t,Wxid:this[i(753)]}})}async["deleteContact"](a){var e=_0x51afaf;await index_js_1[e(508)+"t"][e(466)]({url:e(831)+e(732),data:{ToWxid:a,Wxid:this[e(753)]}})}async["getChatCon"+_0x51afaf(757)](a){var e=_0x51afaf,a=(await index_js_1[e(508)+"t"][e(466)]({url:e(648)+e(805)+e(715),data:{ChatRoom:{vCxLV:"string"}[e(551)],Towxids:a,Wxid:this[e(753)]}}))[e(549)][e(714)+"t"][0];return(new index_js_2[e(744)])[e(613)+"e"](a[e(498)].string)[e(602)+"e"](a[e(409)][e(643)])[e(476)](a[e(682)+"mgUrl"])[e(792)](a[e(390)])[e(457)+"re"](a.Signature)[e(605)+e(677)](a["AntispamTi"+e(821)])[e(699)](a[e(654)])}async[_0x51afaf(506)+"ct"](a){const n={ELBGO:function(a,e){return a(e)}};return new Promise(async(a,e)=>{var t=_0x2fe9;try{var i=(await index_js_1[t(508)+"t"][t(466)]({url:t(592)+t(750)+t(582)+this.wxid,data:{}}))[t(549)],s=(new index_js_2[t(744)])[t(613)+"e"](i[t(721)].UserName.string)[t(602)+"e"](i.userInfo.NickName[t(643)])[t(476)](i.userInfoExt[t(682)+t(756)])[t(792)](i[t(721)][t(390)])[t(457)+"re"](i[t(721)][t(658)])[t(605)+"mticket"](i[t(519)+"cket"]||"");n[t(755)](a,s)}catch(a){n[t(755)](e,a)}})}async[_0x51afaf(646)+_0x51afaf(796)](n){const r={Xhmdb:function(a,e){return a(e)},zXucE:"数据出错"};return new Promise(async(a,e)=>{var t,i=_0x2fe9,s=await index_js_1[i(508)+"t"][i(466)]({url:"Group/GetC"+i(704)+"o",data:{QID:n,Wxid:this[i(753)]}});0==s.Code&&s[i(549)].ContactList?(s=s.Data[i(714)+"t"][0],t=await this[i(646)+i(785)](n),t=(new index_js_2.Contact)[i(613)+"e"](s[i(498)].string)[i(602)+"e"](s[i(409)][i(643)])[i(476)](s[i(682)+i(756)]).setGender(0)[i(457)+"re"]("")[i(803)]("")[i(731)+i(423)](500)[i(731)+i(426)+"t"](t)[i(731)+i(801)+i(585)](s[i(709)+i(432)]).setEncryptusername(s.EncryptUserName),r[i(588)](a,t)):r[i(588)](e,r.zXucE)})}async["acceptChat"+_0x51afaf(449)+_0x51afaf(797)](a,e){var t=_0x51afaf;return index_js_1.SyyyRequest[t(466)]({url:"/Group/Sca"+t(695),data:{Url:e,Wxid:this[t(753)]}})}async[_0x51afaf(564)+"om"](a){var e=_0x51afaf;return index_js_1.SyyyRequest[e(466)]({url:e(489)+"t",data:{QID:a,Wxid:this[e(753)]}})}async["getMessage"+_0x51afaf(825)](n,a,r){const o={CPFHa:function(a,e){return a(e)}};return new Promise(async(e,a)=>{var t=_0x2fe9;try{var i=(await(0,xml_to_json_js_1[t(433)])(n))[t(440)].img.$,s=await index_js_1[t(508)+"t"][t(466)]({url:"/Tools/CdnDownloadImage",data:{FileAesKey:i.aeskey,FileNo:i[t(503)+"rl"],Wxid:this[t(753)]}});o[t(513)](e,{imageType:r,imageData:s[t(549)][t(825)]})}catch(a){o[t(513)](e,a)}})}async[_0x51afaf(703)+_0x51afaf(720)](a,e,t){var i=_0x51afaf,e=(await(0,xml_to_json_js_1[i(433)])(e)).msg.voicemsg.$;return(await index_js_1[i(508)+"t"][i(466)]({url:i(416)+i(604),data:{Bufid:e[i(624)+"d"],FromUserName:t,Length:{SeEiU:function(a,e){return a(e)}}[i(820)](Number,e.length),MsgId:a,Wxid:this[i(753)]}})).Data[i(450)].buffer}async[_0x51afaf(703)+_0x51afaf(778)](a,e,t){var i=_0x51afaf,s={IBNUg:function(a,e){return a(e)}},e=(await(0,xml_to_json_js_1.xmlToJson)(e))[i(440)][i(640)].$;return(await index_js_1.SyyyRequest[i(466)]({url:i(416)+"nloadVideo",data:{CompressType:0,DataLen:s.IBNUg(Number,e.length),MsgId:a,Section:{DataLen:s[i(628)](Number,e[i(740)]),StartPos:0},ToWxid:t,Wxid:this[i(753)]}}))[i(549)].data.buffer}async[_0x51afaf(703)+_0x51afaf(655)](a,e){var t=_0x51afaf,a=await(0,xml_to_json_js_1[t(433)])(a),i=a.msg[t(692)].appattach;return(await index_js_1[t(508)+"t"][t(466)]({url:t(416)+"nloadFile",data:{AppID:a[t(440)][t(692)].$[t(477)],AttachId:i[t(662)],DataLen:{sJkCA:function(a,e){return a(e)}}[t(391)](Number,i.totallen),Section:{DataLen:0,StartPos:0},UserName:e,Wxid:this[t(753)]}})).Data.data[t(537)]}async[_0x51afaf(703)+_0x51afaf(463)+_0x51afaf(398)](a,e){var t=_0x51afaf,a=(await(0,xml_to_json_js_1.xmlToJson)(a))[t(440)][t(692)].appattach;return(await index_js_1[t(508)+"t"].post({url:t(743)+t(478)+t(516),data:{FileAesKey:a.aeskey,FileNo:a[t(599)+"rl"],Wxid:this[t(753)]}}))[t(549)][t(825)]}async[_0x51afaf(703)+_0x51afaf(808)+"b"](a,e){var t=_0x51afaf,a=(await(0,xml_to_json_js_1[t(433)])(a)).msg[t(692)][t(761)];return(await index_js_1[t(508)+"t"][t(466)]({url:"/Tools/Cdn"+t(478)+t(516),data:{FileAesKey:a[t(407)],FileNo:a[t(787)+"l"],Wxid:this[t(753)]}})).Data[t(825)]}async["sendContac"+_0x51afaf(442)+"ge"](a,e){var t=_0x51afaf;await index_js_1.SyyyRequest[t(466)]({url:t(406)+"Card",data:{ToWxid:a,CardWxId:e.getUsername(),CardNickName:e[t(759)+"e"](),CardAlias:e[t(616)](),Wxid:this[t(753)]}});return(new index_js_2.Response)[t(438)]((0,cuid_1[t(485)])())[t(462)+t(708)]({clientmsgid:(0,cuid_1[t(485)])(),newclientmsgid:(0,cuid_1[t(485)])(),createtime:(new Date)[t(702)]()})}async[_0x51afaf(847)](){var a=_0x51afaf;return await index_js_1[a(508)+"t"][a(461)]({url:"/Login/Log"+a(568)+this[a(753)],data:{}}),(new index_js_2.Response)[a(438)]((0,cuid_1[a(485)])())[a(462)+a(708)]({clientmsgid:(0,cuid_1.default)(),newclientmsgid:(0,cuid_1.default)(),createtime:(new Date)[a(702)]()})}async[_0x51afaf(472)+_0x51afaf(516)](a,e,t){var i=_0x51afaf;return index_js_1[i(508)+"t"][i(466)]({url:i(566)+"e",data:{ClientMsgId:e,CreateTime:0,NewMsgId:t,ToUserName:a,Wxid:this.wxid}})}async[_0x51afaf(713)+_0x51afaf(496)](a,e){var t=_0x51afaf;return(await index_js_1[t(508)+"t"].post({url:t(762)+"ateChatRoom",data:{UserList:a,Wxid:this[t(753)]}}))[t(549)][t(802)+"me"].string}async[_0x51afaf(651)+_0x51afaf(706)+"s"](a,e){var t=_0x51afaf;await index_js_1.SyyyRequest.post({url:t(629)+t(402)+t(710),data:{ChatRoomName:a,ToWxids:e,Wxid:this[t(753)]}})}async["deleteChat"+_0x51afaf(615)](a,e){var t=_0x51afaf;await index_js_1[t(508)+"t"].post({url:t(824)+t(402)+t(710),data:{ChatRoomName:a,ToWxids:e,Wxid:this[t(753)]}})}async[_0x51afaf(646)+_0x51afaf(840)](s){const n={LKzXb:function(a,e){return a(e)},zsMoc:function(a,e){return a(e)}};return new Promise(async(a,e)=>{var t=_0x2fe9;try{var i=await index_js_1[t(508)+"t"][t(466)]({url:t(786)+t(547),data:{QID:s,Wxid:this[t(753)]}});n.LKzXb(a,i)}catch(a){n[t(420)](e,a)}})}async[_0x51afaf(689)+_0x51afaf(782)](a,e){var t=_0x51afaf;await index_js_1[t(508)+"t"][t(466)]({url:t(414)+"ChatRoomName",data:{Content:e,QID:a,Wxid:this.wxid}})}async[_0x51afaf(646)+_0x51afaf(455)+_0x51afaf(614)](a){var e=_0x51afaf;await index_js_1[e(508)+"t"][e(466)]({url:"/Group/Get"+e(810)+e(538),data:{QID:a,Wxid:this[e(753)]}})}async[_0x51afaf(689)+_0x51afaf(455)+_0x51afaf(614)](a,e){var t=_0x51afaf;await index_js_1.SyyyRequest.post({url:t(414)+"ChatRoomAnnouncement",data:{Content:e,QID:a,Wxid:this.wxid}})}async["acceptUser"](a,e,t,i){var s=_0x51afaf;await index_js_1[s(508)+"t"].post({url:"/Friend/Pa"+s(666),data:{V1:t,V2:e,Wxid:this.wxid,Scene:i}})}async[_0x51afaf(723)+"st"](){return new Promise(async(a,e)=>{var t=_0x2fe9;try{var i=await index_js_1[t(508)+"t"][t(466)]({url:"/Label/Get"+t(823)+this[t(753)],data:{}}),s=[];if(i[t(549)]["labelPairL"+t(443)])for(const r of i[t(549)][t(596)+"ist"]){var n=(new index_js_2.Label)[t(809)](r[t(535)])[t(798)](r[t(460)]);s[t(395)](n)}a(s)}catch(a){}})}async[_0x51afaf(465)](a){var e=_0x51afaf;return await index_js_1[e(508)+"t"][e(466)]({url:"/Label/Add",data:{LabelName:a,wxid:this.wxid}})}async[_0x51afaf(509)+"l"](s){const n={xgONn:function(a,e){return a(e)}};return new Promise(async(a,e)=>{var t=_0x2fe9;try{var i=await index_js_1[t(508)+"t"][t(466)]({url:"/Label/Delete",data:{LabelID:String(s),Wxid:this.wxid}});n[t(400)](a,i)}catch(a){}})}async[_0x51afaf(492)+_0x51afaf(435)](s,n){return new Promise(async(a,e)=>{var t=_0x2fe9,i=n[t(665)](a=>!isNaN(a));try{a(await index_js_1[t(508)+"t"][t(466)]({url:t(607)+t(480),data:{LabelID:i[t(405)](",")||"",ToWxids:s,wxid:this.wxid}}))}catch(a){}})}}exports.Api=Api;