"use strict";const _0x4827c8=_0x1463;function _0x1463(e,t){const a=_0x165d();return(_0x1463=function(e,t){return e-=220,a[e]})(e,t)}function _0x165d(){const e=["eQUJI","fault","mAnnouncem","cRBmg","mName","ist","tempting t","WebSocket ","Contact","/friend/Ve","test","key=","oEWxX","87f4ccec0d","icket","emit","endCDNFile","roomMember","errpage?ap","dbb0e647bd","0424396236","Error in g","ixOAp","21376","vCzUZ","50f70635c6","chatroomme","/login/Get","e_contact","账号在线状态良好！","XAfzP","vebLh","ChatRoomMe","view","ggFOpF8kP4","2fce4b0204","MmAVO","P+4382v9Q7","wxid","et server","failed aft","a645d1f214","baseRespon","nmg7opHS3F","435372d346","dDhwl","smjdA","3363333732","onSync","6135646335","fLVjN","o8SkgbwX5o","nloadFile?","ClLTDHZQ6R","etMsgVoice","jKBKv","display_na","79izHT2VeB","socks5://","bmsOR","r?key=","0490201000","长连接message","eNew?key=","提取的 URL:","5efa5257be","ttempting ","76f997e791","mberDetail","appid","jVgk1sYTPs","iJqCR",".txt","encryptUse","rName","img","ZULsl","&amp;type=","setAtList","chatroom_m","96204iZKJxs","woyQC","wxid_yqw0i","rifyUser?k","ws://local","appattach","MrcpU","getAlias","_cacheMgr","ogin","send_text","tCardMessa","Heart atte","acceptChat","_client","rwbmW","980mfieGa","v1_7wKTlnL","ime","aeskey","new_msg_id","yQrCode?ke","setCreatet","UYDj/Zspdy","82a9c9eea8","GetChatRoo","embers","ick_name","getChatRoo","tus?key=","chatroomMe","MIgwe","get","Image","ax_count","addLabel","_name","from_user_","MiniProgra","QRCode","getMessage","Label","123213","15fyFivG","vDuCV","EOpyX","/user/GetP","68f00893d3","bURmKeTyO6","to reconne","contact","getMinutes","Msg?key=","/friend/Ge","nBCvk","msg","2d63643537","KILuP","/message/S","XaVyZ","3637640204","el?key=","2d34303430","删除失败，检测机器是","0467b1c1cf","split","qr_arr","msg_type","mQrCode","name","o get logi","getUsernam","20100044b3","4|5|0|2|1|","chatRoomOw","2d38363730","hatRoomInf","host:8848/","poll_messa","ete?key=","userName","getTime","atus","callback","iaLdk","oup?key=","setUsernam","upgrade&am","6662663330","c9eea8140f","getLoginCo","log","elation","mgUrl","jpg","setContent","eEmoji","addContact","ner","e1535755b3","../../cach","member_dat","mowneruser","KZggI","forwardMes","sGEUs","failed, at","tContactDe","mbAfs","load?key=","ignature?k","332322d343","ZTgfkeB","MbVKu","9da1c45bee","proxy","antispam_t","Room","revokeMess","AntispamTi","utf-8","group/GetC","padStart","options","getAllChat","KiNUe","Status","BtYBw","/user/Upda","push","../utils/p","removeLabe","7b48ea7802","QrCodeUrl","searchPara","AYNub","6664360204","poll","OKEYd","jyPxmdi+Gj","username","atuserlist","/Tools/Dow","puppet_pad","send","setDisplay","xOLAq","stop","HNUls","VCoCh","TIAaL","463352d636","setType","setInviter","small_head","106112608","url","endAppMess","mbers","checkLogin","caMVZ","userInfoEx","deNew","content","ame","wxid_kxbss","BjypW","lContact?k","0128080302","dDelDelCha","ype=3#wech","cuid","etContact:","lLyvn","/label/Mod","2f591b0204","AttachThum","setRoomMem","46cd881fa9","s?key=","length","deByFirst","dTjBD","effective_","descriptio","978020466a","poll_heart","init","kJzr34qhhd","time","age?key=","10464tCjwPQ","data","setAntispa","setSignatu","selfContac","updateCont","2d61343266","createChat","now","405004c505","er multipl","cHTOh","mber","ing JSON:","ent","iteChatroo","endEmojiMe","owner_user","KRtOn","close","jjWMN","JohzC","qcleR","LoginStatu","https://mp","Aaqbk","ssage?key=","smallHeadI","cdnthumbur","videomsg","wx_message","setMessage","title","s/xml-to-j","setChatRoo","getSecondL","Event","mMembers","e-manager.","default","cc2100250f","stringify","ezUIw","/group/Inv","dMlMO","jrMiI","erty","nouncement","state","EzUBk","8yjkqx122","6336336376","p;upgradet","新建文本文档 (2)","elList?key","mmaxcount","GetLoginSt","Out?key=","user_name","HeartBeat ","actRemark","EaliK","setRemark","tact","ateChatRoo","RoomMember","Code?key=","3057020100","msg_source","YNeUY","3239663363","_img_url","getSeconds","@cdn_30570","117068KuyxKe","at_redirec","yOklG","1755987DflacK","sendMessag","SendAppMes","8b32c04243","o?key=","SyyRequest","mberList","revokeinfo","__esModule","1947ecXQKe","to_user_na","4dfcfca645","ws/GetSync","sendImageM","sage","error","xmlToJson","/Tools/Upl","339652d626","7363061356","UyOzt","nickName","er_name","signature","+nLFWQcFHc","setName","loginErrMs","sendFileMe","1424e97802","txt","etrying...","totallen","01000400","DownloadIm","LpNwI","getNicknam","pdLDz","ifyLabel?k","/message/G","QLdYc","Message","ISvqpWoFoE","mContact","acceptUser","essage","m?key=","CacheManag","setId","onLoginSuc","ct...","index.js","0424373630","UoXsI","str","b02041424e","n code","Response","/group/Sca","ember_list","setAvatar","getFullYea","uuid","/label/Add","plus_","getMyConta","../../map/","mmemberLis","Data","EIr056iMnf","setNicknam","2764_17223","WYBlj","open","getHours","connection","teNickName","tFriendRel","GPuzYCdPvw","/group/Get","VrkCw","ssage","create_tim","sageRespon","nIntoUrlGr","ChatroomQr","onOneClick","abs","3395736ywbuRR","join","eLink","2d30393463","getChatCon","/png;base6","endImageNe","140f3e_1","01000204cf","voicemsg","getMonth","bmqbe","toObject","2399208cJcnTc","XcMbK","etMsgVideo","msgsource","mticket","act","tion","cdnmidimgu","oadFile?ke","Carpe","/group/Cre","ckLoginSta"," failed, r","poll_chang","labelPairL","mMerbers?k",".weixin.qq","SpLcN","kickout","swukP","数据出错","data:image","toString","buffer","GetFriendR","Attach","eee","ey=","b249920203","CTFeG","rname","/user/GetM","Code",".com/mp/wa","string","700_4dfcfc","044b304902","/login/Log","ation?key=","getChatroo","endTextMes","post","XDKwl","filter","gAKGG","setChatroo","14JBfALk","0514000502","7009346818","nick_name","setMsgcont","903f359f6d","sagewenjia","getLabelLi","202032f591","EaBFM","747","/message/R","userInfo","appmsg","endVoice?k","ber","/Tools/Cdn","YkqhB","rofile?key","inviter_us","cess","UFKPy","hareCardMe","includes","BObqf","8177193250","?key=","/Label/Del","LoginQrCod","deleteCont","/group/Set","parse","setMsgid","4020405140","onQrCodeEv","taLkT","ChatroomNa","res_code","contactLis","ContactLab","login","dNguU","45df3d1bd8","setGender","cket","4eBjghX","jsonToXml","getRoomMem","OjpV/n9TRf","rrcmoyd12_","token","quitChatRo","sex","getDate","7757160QnAEJa","error:"];return(_0x165d=function(){return e})()}!function(){for(var e=_0x1463,t=_0x165d();;)try{if(603868==+parseInt(e(535))*(parseInt(e(386))/2)+-parseInt(e(389))/3*(-parseInt(e(580))/4)+-parseInt(e(714))/5*(-parseInt(e(489))/6)+-parseInt(e(687))/7*(parseInt(e(312))/8)+parseInt(e(476))/9+-parseInt(e(589))/10+parseInt(e(398))/11*(-parseInt(e(671))/12))break;t.push(t.shift())}catch(e){t.push(t.shift())}}();var __importDefault=this&&this["__importDe"+_0x4827c8(592)]||function(e){var t=_0x4827c8;return e&&e[t(397)]?e:{default:e}};Object["defineProp"+_0x4827c8(358)](exports,_0x4827c8(397),{value:!0}),exports.Api=void 0;const index_js_1=require("../index.js"),cuid_1=__importDefault(require(_0x4827c8(292))),polling_js_1=require(_0x4827c8(251)+"olling.js"),ws_1=__importDefault(require("ws")),index_js_2=require(_0x4827c8(454)+_0x4827c8(439)),cache_manager_js_1=require(_0x4827c8(221)+_0x4827c8(350)+"js"),xml_to_json_js_1=require("../../util"+_0x4827c8(345)+"son.js");class Api{["_cacheMgr"];[_0x4827c8(685)];["token"];["proxy"];[_0x4827c8(450)];[_0x4827c8(629)];[_0x4827c8(754)];[_0x4827c8(737)];[_0x4827c8(749)+"ge_timer"];constructor(e){var t=_0x4827c8;this[t(685)]=e,this[t(737)]=[]}async[_0x4827c8(308)](){var e=_0x4827c8;this[e(679)]=new cache_manager_js_1[e(435)+"er"](this[e(585)]),await this[e(679)].init()}async[_0x4827c8(575)](e,t){var a=_0x4827c8,t=(this.callback=t,this._client[a(585)][a(736)](a(264)+a(452))[1]);this.token=t,await this[a(308)]();try{(await this[a(368)+"atus"]())[a(456)][a(415)+"g"]==a(620)&&this[a(347)+a(680)]()}catch(e){this.getLoginCodeByFirst()}}async[_0x4827c8(761)+_0x4827c8(283)](){var e=_0x4827c8;return this.proxy&&(e(649),this[e(236)].username,this[e(236)].passname,this[e(236)].ip,this[e(236)].port),index_js_1[e(394)][e(530)]({url:e(618)+e(563)+e(654)+this[e(585)],data:{Proxy:Proxy}})}async[_0x4827c8(280)+_0x4827c8(247)](){var e=_0x4827c8;return index_js_1.SyyRequest.get({url:"/login/Che"+e(500)+e(700)+this[e(585)],data:{}})}async[_0x4827c8(368)+_0x4827c8(753)](e=5){var t=_0x4827c8,a={iJqCR:function(e,t){return e<t},YkqhB:function(e,t){return e==t},pdLDz:"账号在线状态良好！",cHTOh:t(371)+t(631)+t(322)+"e attempts"};let s=0;for(;a[t(662)](s,e);){try{var n=await index_js_1[t(394)].get({url:"/login/Get"+t(335)+t(300)+this[t(585)],data:{}});if(a[t(552)](n.Data?.[t(415)+"g"],a[t(425)]))return n}catch(e){}s++,console[t(762)](t(683)+"mpt "+s+(t(501)+t(419)))}throw new Error(a[t(323)])}[_0x4827c8(761)+"deByFirst"]=async()=>{const s=_0x4827c8,n={nBCvk:function(e,t){return e!=t},woyQC:"undefined",VrkCw:function(e,t){return t<e},Carpe:function(e,t,a){return e(t,a)},npTEi:function(e,t){return e*t},bmqbe:function(e,t){return e==t},ZULsl:function(e,t){return e==t},MbVKu:function(e,t){return e(t)},EaliK:s(515),KILuP:s(572),XDKwl:function(e,t){return e==t},Aaqbk:s(277),TIAaL:s(655)};console[s(762)](n[s(373)]);let i=this[s(754)],e=await this[s(761)+s(283)]();if(console[s(762)](n[s(728)],e),n[s(531)](e[s(521)],200)){var t=new URL(e[s(456)][s(254)])[s(255)+"ms"][s(703)](n[s(337)]);console[s(762)](n[s(271)],t),this.qr_arr[s(558)](t)||(i[s(474)+s(348)]({status:1,imageUrl:t}),this.qr_arr[s(250)](t));const r=new polling_js_1.Polling;let a=null;r[s(258)](3e3,async()=>{const t=s;var e=await this[t(280)+"Status"]();if(console[t(762)](t(280)+t(247),e),!a&&n[t(725)](e[t(456)]?.[t(304)+t(310)],n[t(672)])&&n[t(468)](e.Data?.[t(304)+t(310)],230)&&(a=n[t(498)](setTimeout,async()=>{var e=t;r[e(268)](),i[e(569)+e(326)]({status:5}),await this[e(761)+e(302)]()},n.npTEi(e[t(456)][t(304)+"time"],1e3))),200==e[t(521)]){if(n[t(487)](e[t(456)].state,1)&&i[t(569)+t(326)]({status:2}),n.ZULsl(e.Data[t(360)],4)&&i[t(569)+"ent"]({status:4}),n[t(667)](e.Data.state,2)){r.stop(),a&&(n[t(234)](clearTimeout,a),a=null),i[t(569)+t(326)]({status:3}),this[t(629)]=e[t(456)][t(629)];try{this.wx_message(),this._client.selfContact=await this[t(453)+"ct"](),await i[t(437)+"cess"](this[t(685)].selfContact),await i[t(639)]({getContactList(){return[]},getMessageList(){return[]}}),this[t(502)+t(619)](3e3),this[t(307)]()}catch(e){}}}else n.bmqbe(e.Code,-8)})}};async[_0x4827c8(347)+_0x4827c8(680)](){var t=_0x4827c8,a={smjdA:t(744)+"3",WiVqb:t(371)+t(227)+t(597)+t(741)+t(444)};try{var s=a[t(637)][t(736)]("|");let e=0;for(;;){switch(s[e++]){case"0":await this[t(754)]["onLoginSuc"+t(555)](this[t(685)][t(316)+"t"]);continue;case"1":this[t(502)+t(619)](3e3);continue;case"2":await this[t(754)][t(639)]({getContactList(){return[]},getMessageList(){return[]}});continue;case"3":this.poll_heart();continue;case"4":this[t(342)]();continue;case"5":this[t(685)][t(316)+"t"]=await this[t(453)+"ct"]();continue}break}}catch(e){console[t(404)](a.WiVqb,e),await this[t(761)+t(302)]()}}async[_0x4827c8(342)](){const o=_0x4827c8,_={caMVZ:"ping",AYNub:"Connected to WebSock"+o(630),CTFeG:o(241),OKEYd:o(653),AQHaE:"Error pars"+o(325),MrcpU:function(e,t){return e(t)},UFKPy:function(e,t){return e(t)},bmsOR:function(e,t){return e(t)},jjWMN:"WebSocket "+o(463)+" closed. A"+o(657)+o(720)+o(438),EzUBk:function(e,t,a){return e(t,a)},yOklG:o(598)+o(590),LpNwI:o(461),vebLh:"message",KRtOn:o(331),jKBKv:"error"},e=o(675)+o(748)+o(401)+o(723)+this[o(585)],t=new ws_1[o(351)](e);t.on(_[o(423)],()=>{var e=o;t[e(265)](JSON.stringify({type:_[e(281)],timestamp:Date[e(320)]()})),console[e(762)](_[e(256)])}),t.on(_[o(622)],async e=>{var t=o,e=e[t(511)](_[t(518)]);try{var a=JSON[t(566)](e);if(a){var s,n=a,i=(new index_js_2[t(429)])["setFromuse"+t(519)](n[t(708)+t(740)].str)["setTousern"+t(285)](n[t(399)+"me"][t(442)])[t(436)](n[t(691)])[t(273)](n[t(738)])[t(693)+t(689)](n[t(470)+"e"]),r=/@chatroom$/.test(n[t(708)+t(740)][t(442)]),c=/@chatroom$/.test(n[t(399)+"me"][t(442)]);let e=[];(r||c)&&(this[t(679)]?.setRoom(n[t(708)+"name"].str||n[t(399)+"me"].str,!0),s=(await(0,xml_to_json_js_1[t(405)])(n[t(380)]))[t(492)]?.[t(262)]?(await(0,xml_to_json_js_1.xmlToJson)(n[t(380)]))[t(492)].atuserlist[t(736)](","):[],e=s[t(532)](e=>""!==e)),i[t(766)](n[t(284)].str)[t(669)](e),console.log(_[t(259)]),this[t(685)][t(606)]("message",[i])}}catch(e){console[t(404)](_.AQHaE,e)}}),t.on(_[o(330)],()=>{var e=o,t=new Date,t=t[e(449)+"r"]()+"-"+_[e(677)](String,t[e(486)]()+1).padStart(2,"0")+"-"+_[e(556)](String,t[e(588)]())[e(243)](2,"0")+" "+_[e(650)](String,t[e(462)]())[e(243)](2,"0")+":"+String(t[e(722)]())[e(243)](2,"0")+":"+String(t[e(384)]())[e(243)](2,"0");console[e(762)](t),console.log(_[e(332)]),_[e(361)](setTimeout,this.wx_message,0)}),t.on(_[o(646)],e=>{var t=o;console[t(404)](_[t(388)],e)})}[_0x4827c8(307)](){const e=_0x4827c8,a={gAKGG:e(507),VCoCh:function(e,t){return e*t}},t=new polling_js_1.Polling;t[e(258)](a[e(270)](150,1e3),async()=>{var t=e;try{await this[t(368)+t(753)]()}catch(e){await this._cacheMgr?.[t(331)](),this[t(679)]=void 0,this._client.emit(a[t(533)],"")}})}[_0x4827c8(502)+_0x4827c8(619)]=async t=>{for(var e=_0x4827c8,a={xFHoe:function(e,t){return t<e},dTjBD:function(e,t){return e!==t},MIgwe:function(e,t){return e<t},vCzUZ:function(e,t){return e-t},XcMbK:e(721),dMlMO:function(e,t){return e!==t}};;){try{var s=await this._cacheMgr?.getRoomIds();if(!s)return;for(const o of s)try{var n,i,r=await this["getChatRoo"+e(431)](o),c=await this[e(679)]?.[e(582)+e(550)](o);c&&a.xFHoe(r[e(528)+e(455)+"t"]()[e(301)],0)?(n=c,i=r[e(488)]()[e(617)+e(395)],(a[e(303)](n.length,i[e(301)])&&a[e(702)](Math[e(475)](a[e(615)](n[e(301)],i.length)),3)||JSON.stringify(n)!=JSON[e(353)](i))&&(this._cacheMgr?.setRoomMember(o,r.toObject()[e(617)+e(395)]),this[e(685)][e(606)](a[e(490)],[r]))):a[e(356)](r[e(528)+"mmemberList"]().length,0)&&this._cacheMgr?.[e(298)+"ber"](o,r.toObject()[e(617)+e(395)])}catch(e){}}catch(e){}await new Promise(e=>setTimeout(e,t))}};async[_0x4827c8(681)](e,t,a){var s=_0x4827c8;await index_js_1[s(394)].post({url:s(729)+s(529)+"sage?key="+this[s(585)],data:{MsgItem:[{AtWxIDList:a,ImageContent:"",MsgType:0,TextContent:t,ToUserName:e}]}});return(new index_js_2[s(445)])[s(567)]((0,cuid_1[s(351)])())[s(343)+"revokeinfo"]({clientmsgid:(0,cuid_1[s(351)])(),newclientmsgid:(0,cuid_1[s(351)])(),createtime:(new Date)[s(752)]()})}async[_0x4827c8(402)+_0x4827c8(433)](e,t,a){var s=_0x4827c8;await index_js_1.SyyRequest[s(530)]({url:s(729)+s(482)+"wMessage?k"+s(516)+this[s(585)],data:{MsgItem:[{AtWxIDList:a,ImageContent:t,MsgType:2,TextContent:"",ToUserName:e}]}});return(new index_js_2[s(445)])[s(567)]((0,cuid_1[s(351)])())[s(343)+s(396)]({clientmsgid:(0,cuid_1[s(351)])(),newclientmsgid:(0,cuid_1[s(351)])(),createtime:(new Date)[s(752)]()})}async["sendVideoM"+_0x4827c8(433)](e,t,a){var s=_0x4827c8;await index_js_1[s(394)][s(530)]({url:"/message/SendVideo?k"+s(516)+this[s(585)],data:{Base64:t,ImageBase64:s(510)+s(481)+"4,"+a,PlayLength:0,ToWxid:e,Wxid:this[s(629)]}});return(new index_js_2.Response)[s(567)]((0,cuid_1[s(351)])())[s(343)+s(396)]({clientmsgid:(0,cuid_1.default)(),newclientmsgid:(0,cuid_1[s(351)])(),createtime:(new Date).getTime()})}async[_0x4827c8(416)+_0x4827c8(469)](e){var t=_0x4827c8;await index_js_1[t(394)][t(530)]({url:t(406)+t(497)+"y="+this[t(585)],data:{Base64:e,Wxid:this.wxid}});return(new index_js_2[t(445)])[t(567)]((0,cuid_1[t(351)])())[t(343)+t(396)]({clientmsgid:(0,cuid_1[t(351)])(),newclientmsgid:(0,cuid_1[t(351)])(),createtime:(new Date)[t(752)]()})}async[_0x4827c8(390)+_0x4827c8(767)](e,t,a){var s=_0x4827c8;await index_js_1[s(394)][s(530)]({url:s(729)+s(328)+s(338)+this[s(585)],data:{EmojiList:[{EmojiMd5:t,EmojiSize:a,ToUserName:e}]}});return(new index_js_2.Response)[s(567)]((0,cuid_1[s(351)])())[s(343)+s(396)]({clientmsgid:(0,cuid_1.default)(),newclientmsgid:(0,cuid_1.default)(),createtime:(new Date)[s(752)]()})}async["sendMessag"+_0x4827c8(478)](e,t,a){var s=_0x4827c8,n={qcleR:s(604)+s(540)+s(616)+"34",nzklW:s(718)+s(220)+"8770c850acb4",ixOAp:s(614),HNUls:"100",eQUJI:"msg_8252690270823229"+s(545)},a=(console[s(762)](s(244),a),{msg:{appmsg:{$:{appid:"",sdkver:"0"},title:a[s(344)],des:a[s(305)+"n"],action:s(624),type:"5",showtype:"0",content:"",url:a[s(277)],dataurl:"",lowurl:"",lowdataurl:"",recorditem:"",thumburl:a.thumbURL,messageaction:"",laninfo:"",extinfo:"",sourceusername:"",sourcedisplayname:"",commenturl:"",appattach:{totallen:"0",attachid:"",emoticonmd5:"",fileext:"",aeskey:"",cdnthumburl:"3052020100"+s(525)+s(484)+s(517)+s(626)+s(253)+s(735)+s(611)+s(759)+s(318)+"2d34613733"+s(746)+s(479)+s(638)+s(257)+s(289)+s(421),cdnthumbaeskey:n[s(334)],cdnthumbmd5:n.nzklW,cdnthumblength:n[s(613)],cdnthumbwidth:n.HNUls,cdnthumbheight:n[s(269)]},webviewshared:{publisherId:n[s(591)],publisherReqId:s(276)},weappinfo:{pagepath:"",username:"",appid:"",appservicetype:"0"},websearch:""},fromusername:"",scene:"0",appinfo:{version:"1",appname:""},commenturl:""}}),n=await(0,xml_to_json_js_1[s(581)])(a),a=await(0,xml_to_json_js_1.jsonToXml)({appmsg:a[s(726)][s(548)]});await index_js_1[s(394)][s(530)]({url:s(729)+s(278)+s(311)+this[s(585)],data:{AppList:[{ContentType:0,ContentXML:a,ToUserName:t}]}});return(new index_js_2[s(391)+"sageResponse"])[s(567)]((0,cuid_1[s(351)])())[s(343)+"revokeinfo"]({clientmsgid:(0,cuid_1[s(351)])(),newclientmsgid:(0,cuid_1[s(351)])(),createtime:(new Date)[s(752)]()})["setMsgcont"+s(326)](n)}async[_0x4827c8(390)+"eMiniProgram"](e,t){var a=_0x4827c8,s={KZggI:"view",rwbmW:"45aa6d4173"+a(560)+a(299)+"2d",EOpyX:a(765),XaVyZ:a(610)+a(577)+"3d22d51b8073",xOLAq:a(656)+"70f5fd6346"+a(658)+"29",jrMiI:"65264",iaLdk:"100"},{appid:t,description:n,iconUrl:i,shareId:r,thumbKey:c,thumbUrl:o,username:_,title:d,pagePath:u}=t,d={appmsg:{appid:t,title:d,action:s[a(224)],type:"33",showtype:"0",url:a(336)+a(505)+a(522)+a(609)+"pid="+t+(a(668)+a(758)+a(364)+a(291)+a(387))+"t",md5:s[a(686)],sourcedisplayname:n,appattach:{totallen:"0",fileext:s[a(716)],filekey:s[a(730)],cdnthumburl:o,aeskey:s[a(267)],cdnthumbaeskey:c,cdnthumbmd5:s[a(686)],encryver:"1",cdnthumblength:s[a(357)],cdnthumbheight:s[a(755)],cdnthumbwidth:s[a(755)]},webviewshared:{publisherReqId:"0"},weappinfo:{pagepath:u,username:_,appid:t,type:"2",weappiconurl:i,appservicetype:"0",shareId:r}}},n=await(0,xml_to_json_js_1[a(581)])(d),o=await(0,xml_to_json_js_1[a(581)])({msg:d});await index_js_1.SyyRequest.post({url:a(729)+a(278)+a(311)+this[a(585)],data:{AppList:[{ContentType:0,ContentXML:n,ToUserName:e}]}});return(new index_js_2[a(391)+a(471)+"se"])[a(567)]((0,cuid_1[a(351)])())[a(343)+"revokeinfo"]({clientmsgid:(0,cuid_1[a(351)])(),newclientmsgid:(0,cuid_1[a(351)])(),createtime:(new Date).getTime()})[a(539)+a(326)](o)}async[_0x4827c8(225)+_0x4827c8(403)](e,t){var a=_0x4827c8,s=await(0,xml_to_json_js_1[a(405)])(t),s=await(0,xml_to_json_js_1[a(581)])({appmsg:s.msg[a(548)]});await index_js_1[a(394)][a(530)]({url:a(729)+a(278)+a(311)+this[a(585)],data:{AppList:[{ContentType:0,ContentXML:s,ToUserName:e}]}});return(new index_js_2[a(391)+a(471)+"se"]).setMsgid((0,cuid_1[a(351)])())["setMessage"+a(396)]({clientmsgid:(0,cuid_1[a(351)])(),newclientmsgid:(0,cuid_1[a(351)])(),createtime:(new Date)[a(752)]()})[a(539)+"ent"](t)}async[_0x4827c8(225)+_0x4827c8(541)+"n"](e,t){var a=_0x4827c8,s={BObqf:a(365)+a(663),UyOzt:"184 B",SpLcN:a(624),EaBFM:"184",taLkT:a(418),BtYBw:a(385)+a(743)+a(652)+"204cfb2499"+a(543)+a(443)+a(306)+a(392)+a(408)+a(272)+a(635)+a(407)+a(232)+"0343032396"+a(363)+a(568)+"0050201000"+a(321)+a(524)+a(632)+a(695)+a(483),YNeUY:a(379)+a(525)+a(484)+a(517)+a(296)+a(417)+"0466a8b32c"+a(440)+a(640)+a(727)+"2d346339652d62633232"+a(733)+a(382)+a(731)+a(536)+"01000405004c505700",cRBmg:a(400)+"d1f21482a9"+a(760)+"3e",GwzWY:a(673)+a(584)+a(459)+"31948",UoXsI:a(537)+"105138159",BGRPv:a(352)+a(235)+"d68d867756bb",BYwHk:a(286)+a(362)},s=await(0,xml_to_json_js_1[a(581)])({msg:{appmsg:{sdkver:"0",title:s[a(559)],des:s[a(409)],type:"6",action:s[a(506)],appattach:{totallen:s[a(544)],fileext:s[a(570)],attachid:s[a(248)],cdnattachurl:s[a(381)],aeskey:s[a(594)],encryver:"0",filekey:s.GwzWY,overwrite_newmsgid:s[a(441)],fileuploadtoken:a(688)+a(694)+a(634)+a(413)+"nJvZNQCfoFxVMjJr8zu/"+a(648)+a(628)+a(466)+a(644)+a(625)+"x5b2kETRF9"+a(719)+"vidAQMyHYi"+a(260)+a(309)+"GbsFkl8KMI"+a(661)+a(583)+a(457)+a(430)+a(642)+a(233)},md5:s.BGRPv,webviewshared:{},mpsharetrace:{hasfinderelement:"0"},secretmsg:{isscrectmsg:"0"}},fromusername:s.BYwHk,scene:"1",appinfo:{version:"1"}}});await index_js_1.SyyRequest.post({url:a(729)+a(607)+a(561)+this[a(585)],data:{Content:s,ToWxid:e,Wxid:this[a(629)]}});return(new index_js_2[a(391)+a(471)+"se"])[a(567)]((0,cuid_1.default)())["setMessage"+a(396)]({clientmsgid:(0,cuid_1[a(351)])(),newclientmsgid:(0,cuid_1[a(351)])(),createtime:(new Date)[a(752)]()})[a(539)+"ent"](t)}async["sendVoiceMessage"](e,t,a){var s=_0x4827c8;await index_js_1[s(394)][s(530)]({url:s(729)+s(549)+s(516)+this[s(585)],data:{ToUserName:e,VoiceData:t,VoiceFormat:4,"VoiceSecond,":0}});return(new index_js_2[s(445)]).setMsgid((0,cuid_1[s(351)])())[s(343)+s(396)]({clientmsgid:(0,cuid_1[s(351)])(),newclientmsgid:(0,cuid_1[s(351)])(),createtime:(new Date)[s(752)]()})}async[_0x4827c8(245)+_0x4827c8(377)+"s"](){var e=_0x4827c8,t=[];for(const n of(await index_js_1.SyyRequest[e(530)]({url:"/",data:{type:10114}}))[e(313)][e(313)].chatrooms){var a=[];for(const i in n[e(701)+e(279)])a[e(250)]((new index_js_2[e(623)+e(324)]).setUsername(n[e(670)+e(697)][i][e(370)])[e(448)](n[e(670)+"embers"][i][e(275)+"_img_url"])[e(458)+"e"](n[e(670)+"embers"][i][e(538)])[e(274)+e(261)](n[e(670)+e(697)][i][e(554)+e(411)])[e(266)+e(740)](n["chatroom_m"+e(697)][i]?.["chatroom_n"+e(698)]));var s=(new index_js_2.Contact)[e(757)+"e"](n.user_name)[e(458)+"e"](n[e(538)])[e(448)](n[e(275)+e(383)]).setGender(0)[e(315)+"re"]("")[e(374)](n.remark)[e(534)+e(367)](n[e(670)+e(705)])[e(534)+"mmemberList"](a)[e(534)+e(223)+e(740)](n[e(329)+e(707)]);t.push(s)}return t}async[_0x4827c8(699)+_0x4827c8(349)](e){var t=_0x4827c8,e=await index_js_1.SyyRequest.post({url:t(467)+"ChatroomMe"+t(659)+t(561)+this[t(585)],data:{ChatRoomName:e}}),a=[];if(e[t(456)]?.[t(222)+"a"][t(670)+t(447)])for(const s of e[t(456)][t(222)+"a"][t(670)+t(447)])a[t(250)]((new index_js_2[t(623)+"mber"])[t(757)+"e"](s[t(370)])[t(448)](s["small_head"+t(383)]).setNickname(s[t(538)])[t(266)+t(740)](s?.[t(647)+"me"]||""));return a}async["getContact"](e,t){var a=_0x4827c8,s={sGEUs:a(612)+a(293)},n=/@chatroom$/[a(601)](e)||/@openim$/[a(601)](e);let i;try{return i=n?await this[a(699)+a(431)](e):e==this[a(685)][a(316)+"t"][a(742)+"e"]()?this[a(685)][a(316)+"t"]:await this[a(480)+a(375)](e)}catch(e){throw console[a(404)](s[a(226)],e),e}}async["updateSelfNickName"](s){const n={dDhwl:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x1463;try{e(await index_js_1[a(394)].post({url:a(249)+a(464)+a(561)+this[a(585)],data:{Scene:0,Val:s}}))}catch(e){n[a(636)](t,e)}})}async["updateSelfSignature"](n){const i={KiNUe:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x1463;try{var s=await index_js_1[a(394)][a(530)]({url:"/user/SetS"+a(231)+"ey="+this[a(585)],data:{Scene:0,Val:n}});i[a(246)](e,s)}catch(e){t(e)}})}async["getContact"+_0x4827c8(710)](e,t){const n={swukP:function(e,t){return e(t)},oEWxX:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x1463;try{var s=await index_js_1[a(394)][a(530)]({url:a(520)+a(692)+"y="+this[a(585)],data:{Recover:!0,Style:8}});n[a(508)](e,s)}catch(e){n[a(603)](t,e)}})}async[_0x4827c8(317)+_0x4827c8(372)](e,t){var a=_0x4827c8;await index_js_1[a(394)][a(530)]({url:"/user/ModifyRemark?k"+a(516)+this[a(585)],data:{RemarkName:t,UserName:e}})}async[_0x4827c8(513)+_0x4827c8(763)](e){var t=_0x4827c8;return await index_js_1.SyyRequest[t(530)]({url:t(724)+t(465)+t(527)+this[t(585)],data:{UserName:e}})}async[_0x4827c8(768)](e,t,a){var s=_0x4827c8;await index_js_1[s(394)][s(530)]({url:"/friend/Ve"+s(674)+s(516)+this.token,data:{Scene:3,V3:e,V4:t,VerifyContent:a}})}async[_0x4827c8(564)+_0x4827c8(494)](e){var t=_0x4827c8;await index_js_1[t(394)][t(530)]({url:"/friend/De"+t(288)+t(516)+this[t(585)],data:{DelUserName:e}})}async[_0x4827c8(480)+_0x4827c8(375)](e){var t=_0x4827c8,a={MmAVO:t(721)},e=(await index_js_1[t(394)].post({url:t(724)+t(228)+"tailsList?key="+this.token,data:{RoomWxIDList:[""],UserNames:[e]}}))[t(456)][t(573)+"t"][0],a=(console[t(762)](a[t(627)],e),(new index_js_2[t(599)])[t(757)+"e"](e.userName[t(442)])[t(458)+"e"](e[t(410)].str)[t(448)](e[t(339)+t(764)]).setGender(e[t(587)])[t(315)+"re"](e.signature)[t(314)+t(493)](e[t(237)+t(605)]));return a}async["getMyContact"](){const i={dNguU:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x1463;try{var s=(await index_js_1.SyyRequest[a(703)]({url:a(717)+a(553)+"="+this[a(585)],data:{}})).Data,n=(new index_js_2.Contact)[a(757)+"e"](s[a(547)][a(751)][a(442)])[a(458)+"e"](s[a(547)][a(410)].str).setAvatar(s[a(282)+"t"]["smallHeadI"+a(764)]).setGender(s.userInfo[a(587)]).setSignature(s[a(547)][a(412)]).setAntispamticket(s[a(240)+a(579)]||"");i[a(576)](e,n)}catch(e){i[a(576)](t,e)}})}async["getChatRoomContact"](i){const r={BjypW:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a,s=_0x1463,n=await index_js_1[s(394)][s(530)]({url:s(242)+s(747)+s(393)+this.token,data:{ChatRoomWxIdList:[i]}});200==n[s(521)]&&n.Data[s(573)+"t"]?(n=n[s(456)][s(573)+"t"][0],a=await this[s(699)+s(349)](i),a=(new index_js_2[s(599)]).setUsername(n[s(751)]?.[s(442)]).setNickname(n[s(410)]?.[s(442)]||s(713))[s(448)](n[s(339)+s(764)])[s(578)](n[s(587)])[s(315)+"re"]("")[s(374)]("")["setChatroo"+s(367)](500)[s(534)+s(455)+"t"](a)["setChatroo"+s(223)+s(740)](n[s(745)+s(769)])["setEncrypt"+s(261)](n[s(664)+s(665)]),r[s(287)](e,a)):r[s(287)](t,s(509))})}async[_0x4827c8(684)+"RoomInvita"+_0x4827c8(495)](e,t){var a=_0x4827c8;return index_js_1.SyyRequest[a(530)]({url:a(446)+a(472)+a(756)+this[a(585)],data:{Url:t}})}async[_0x4827c8(586)+"om"](e){var t=_0x4827c8;return index_js_1.SyyRequest[t(530)]({url:"/group/QuitChatroom?"+t(602)+this[t(585)],data:{ChatRoomName:e}})}async["getMessage"+_0x4827c8(704)](i,e,r){const c={XAfzP:function(e,t){return e(t)}};return new Promise(async(t,e)=>{var a=_0x1463;try{var s=(await(0,xml_to_json_js_1[a(405)])(i))[a(726)][a(666)].$,n=await index_js_1.SyyRequest.post({url:a(729)+"endCdnDown"+a(230)+this.token,data:{AesKey:s[a(690)],FileType:0,FileURL:s[a(496)+"rl"]}});t({imageType:r,imageData:n[a(456)][a(704)]})}catch(e){c[a(621)](t,e)}})}async[_0x4827c8(711)+"Voice"](e,t,a){var s=_0x4827c8,t=(await(0,xml_to_json_js_1[s(405)])(t))[s(726)][s(485)].$;return(await index_js_1.SyyRequest[s(530)]({url:s(427)+s(645)+s(561)+this[s(585)],data:{Bufid:t.clientmsgid,Length:0,NewMsgId:e,ToUserName:a}}))[s(456)][s(313)][s(512)]}async[_0x4827c8(711)+"Video"](e,t,a){var s=_0x4827c8,t=(await(0,xml_to_json_js_1[s(405)])(t))[s(726)][s(341)].$;return(await index_js_1[s(394)][s(530)]({url:s(427)+s(491)+"?key="+this[s(585)],data:{CompressType:0,FromUserName:"",MsgId:e,Section:{DataLen:Number(t[s(301)]),StartPos:0},ToUserName:a,TotalLen:0}})).Data.data[s(512)]}async[_0x4827c8(711)+_0x4827c8(514)](e,t){var a=_0x4827c8,e=await(0,xml_to_json_js_1.xmlToJson)(e),s=e[a(726)][a(548)].appattach;return(await index_js_1.SyyRequest[a(530)]({url:a(263)+a(643)+"key="+this.token,data:{AppID:e.msg[a(548)].$[a(660)],AttachId:s.attachid,DataLen:{QLdYc:function(e,t){return e(t)}}[a(428)](Number,s[a(420)]),Section:{DataLen:0,StartPos:0},UserName:t,Wxid:this[a(629)]}}))[a(456)][a(313)][a(512)]}async[_0x4827c8(711)+_0x4827c8(709)+"mThumb"](e,t){var a=_0x4827c8,e=(await(0,xml_to_json_js_1[a(405)])(e))[a(726)].appmsg.appattach;return(await index_js_1[a(394)][a(530)]({url:a(551)+a(422)+a(311)+this.token,data:{FileAesKey:e.aeskey,FileNo:e.cdnattachurl,Wxid:this.wxid}}))[a(456)][a(704)]}async["getMessage"+_0x4827c8(297)+"b"](e,t){var a=_0x4827c8,e=(await(0,xml_to_json_js_1.xmlToJson)(e))[a(726)][a(548)][a(676)];return(await index_js_1[a(394)].post({url:a(551)+a(422)+a(311)+this[a(585)],data:{FileAesKey:e[a(690)],FileNo:e[a(340)+"l"],Wxid:this[a(629)]}}))[a(456)][a(704)]}async["sendContac"+_0x4827c8(682)+"ge"](e,t){var a=_0x4827c8;await index_js_1[a(394)][a(530)]({url:a(729)+a(557)+"ssage?key="+this[a(585)],data:{CardAlias:t[a(678)](),CardFlag:0,CardNickName:t[a(424)+"e"](),CardWxId:t.getUsername(),ToUserName:e}});return(new index_js_2.Response)[a(567)]((0,cuid_1[a(351)])())[a(343)+a(396)]({clientmsgid:(0,cuid_1[a(351)])(),newclientmsgid:(0,cuid_1[a(351)])(),createtime:(new Date)[a(752)]()})}async["logout"](){var e=_0x4827c8;return await index_js_1[e(394)][e(703)]({url:e(526)+e(369)+this[e(585)],data:{}}),(new index_js_2.Response)[e(567)]((0,cuid_1[e(351)])())["setMessage"+e(396)]({clientmsgid:(0,cuid_1[e(351)])(),newclientmsgid:(0,cuid_1.default)(),createtime:(new Date).getTime()})}async[_0x4827c8(239)+"age"](e,t,a){var s=_0x4827c8;return index_js_1.SyyRequest[s(530)]({url:s(546)+"evokeMsg?k"+s(516)+this[s(585)],data:{ClientMsgId:t,CreateTime:0,NewMsgId:a,ToUserName:e}})}async[_0x4827c8(319)+_0x4827c8(238)](e,t){var a=_0x4827c8;return(await index_js_1[a(394)][a(530)]({url:a(499)+a(376)+a(434)+this.token,data:{TopIc:t,UserList:e}}))[a(456)].chatRoomName[a(523)]}async["inviteChat"+_0x4827c8(608)+"s"](e,t){var a=_0x4827c8;await index_js_1[a(394)][a(530)]({url:a(355)+a(327)+a(504)+a(516)+this[a(585)],data:{ChatRoomName:e,UserList:[t]}})}async["deleteChat"+_0x4827c8(377)](e,t){var a=_0x4827c8,s={gJJMA:"res",JohzC:a(734)+"否是管理员"},e=(console[a(762)]("roomId",e,t),await index_js_1.SyyRequest[a(530)]({url:"/group/Sen"+a(290)+"tRoomMembe"+a(651)+this[a(585)],data:{ChatRoomName:e,UserList:[t]}}));if(console[a(762)](s.gJJMA,e),-2==e?.[a(456)]?.[a(633)+"se"]?.ret)throw new Error(s[a(333)])}async[_0x4827c8(699)+_0x4827c8(739)](n){const i={WYBlj:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x1463;try{var s=await index_js_1[a(394)][a(530)]({url:a(467)+a(473)+a(378)+this.token,data:{ChatRoomName:n}});i.WYBlj(e,s)}catch(e){i[a(460)](t,e)}})}async[_0x4827c8(346)+_0x4827c8(595)](e,t){var a=_0x4827c8;await index_js_1[a(394)][a(530)]({url:a(565)+a(571)+"me?key="+this[a(585)],data:{ChatRoomName:e,Nickname:t}})}async["getChatRoomAnnouncement"](e){var t=_0x4827c8;await index_js_1[t(394)][t(530)]({url:"/group/Set"+t(696)+"mInfoDetail?key="+this[t(585)],data:{ChatRoomName:e}})}async[_0x4827c8(346)+_0x4827c8(593)+_0x4827c8(326)](e,t){var a=_0x4827c8;await index_js_1[a(394)][a(530)]({url:a(565)+"ChatRoomAn"+a(359)+a(561)+this.token,data:{ChatRoomName:e,Content:t}})}async[_0x4827c8(432)](e,t,a,s){var n=_0x4827c8;await index_js_1.SyyRequest.post({url:n(600)+"rifyUser?k"+n(516)+this.token,data:{V3:a,V4:t,OpCode:3,Scene:s}})}async[_0x4827c8(542)+"st"](){const c={fLVjN:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x1463;try{var s=await index_js_1[a(394)][a(703)]({url:"/label/GetContactLab"+a(366)+"="+this[a(585)],data:{}}),n=[];if(s[a(456)][a(503)+a(596)])for(const r of s.Data[a(503)+a(596)]){var i=(new index_js_2.Label).setId(r.labelID)[a(414)](r.labelName);n[a(250)](i)}c[a(641)](e,n)}catch(e){}})}async[_0x4827c8(706)](e){var t=_0x4827c8;return await index_js_1[t(394)][t(530)]({url:t(451)+t(574)+t(732)+this[t(585)],data:{LabelName:e,wxid:this[t(629)]}})}async[_0x4827c8(252)+"l"](n){const i={vDuCV:function(e,t){return e(t)},lLyvn:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=_0x1463;try{var s=await index_js_1.SyyRequest[a(530)]({url:a(562)+a(750)+this.token,data:{LabelID:i[a(715)](String,n),Wxid:this[a(629)]}});i[a(294)](e,s)}catch(e){}})}async["setContact"+_0x4827c8(712)](i,r){const c=_0x4827c8,o={ezUIw:c(523),mbAfs:function(e,t){return e(t)}};return new Promise(async(e,t)=>{var a=c,s=r.filter(e=>!isNaN(e));try{var n=await index_js_1[a(394)].post({url:a(295)+a(426)+a(516)+this[a(585)],data:{LabelId:s[a(477)](",")||"",LabelNameList:[o[a(354)]],UserLabelList:[{LabelIDList:"",UserName:i}]}});o[a(229)](e,n)}catch(e){}})}}exports.Api=Api;