"use strict";const _0x1a545a=_0x32bf;function _0x3457(){const a=["/room.js","roomAnnoun","-emoticon.","parseEvent","stranger","parseAppms","UBIuY","h name: ","Confirmed","init","hasContact","_refreshCo","ls/cached-","age type m","_onPushCon","SNzyT","./mock/mes","md5","GkdCA","iend:: ","Payload","_updateRoo","execute","g: ","floor","onStop","GetFriendR","roomCreate","thumburl","city","on push co","essage","./mock/sch","mticket","supported","voicemsg","version","ess: ","-video.mp4","_stopClien","username","generateEm","ion: ","vPjCm","initialize","getRoomIds","PackageMan","ding(%s)","cription","avatar","_friendshi","program, c","eMiniProgr",", status: ","[动画表情]","thumbnailU","actStrange","yqhFy","pSearch","ageManager","ias","7uQzuED","tactCache","currentUse"," not mini ","packageJso"," is not im","ntact: ","info","eImageFile",";base64,","Attachment","alias","sage","./lib/Pack","province","NTqsT","file-box","ct: ","values","lbcfH","es.js","setName",") called f","AkPQN","voicelengt","mThumb"," MiniProgr","23/08/14/e","./package-","roomAvatar","12616PCFYaD","img.yp.yey","Text","ppet","./mock/eve","setId","roomMember","padPlusToW","setMessage","tionRawPay","setChatRoo","api","buffer","Ids","roomId","then","Member","getNicknam","agePayload","Message fo","_getRoomMe","RYpoO","getContact","eId: ","roomQuit","http://con","_findTagWi","hip for id","wechaty-pu","RoomLeave",".js","向你推荐了","contactSel","dText","FriendRela","ema-mapper","tagContact","3d-467d-a4","hasOwnProp","ertyDescri","getChatCon","Contact","kCxHY","ssageId:","QRCode","tent","SearchPhon","-avatar.jp","_startClie","337585bKmQpL","voiceLengt","mQrCode","username i","nd friends","updateCont","StrangerAl","Unknown","_getTagLis","mark","silly","_onPushSer","url","24CkEZtg","metadata","newclientm","removeLabe","gender","create","qAUer","tVNpZ","ent","setUsernam","or id: ","_onSendMes","sendContac","\n      ===","ScDGH","deleteChat",", type:","Add","MObwn","irBOa","setTitle","sages/mess","setAlias","hJwSf","ding","thumb","room-invit","mMembers","quitChatRo","setCountry","jpg","Message","mrwUT","scan event","dirtyPaylo","/contact.j",": [视频]","messageMin","isLoggedIn","LocalClien","gMMWg","nickname","n with typ","getRoomInv","-image-thu","_cacheMgr","roomInvita","nding","eLink","EventType","eEmoji","find","content","catch",": [语音]","Friendship","qr-","des","thName","Label","now","ber","he-manager","YYJJH","client","tousername","r miniprog","ice","ward","./cleanup.","binarypayl","default","send_text","setGender","List","t file for","contactadd","Can not fi","uqfgt","getAntispa","PuppetPadl","IDjHf","contactPho","signature","inviteChat","labelList","[图片]","./mock/cac","_printVers","imageType","LiJod","[语音]","sagewenjia","sendVideoM",": [文件]","hod not su","setContent","load","title","_setupClie","echaty","iseFunc","toBase64","TpAlf","getUsernam","[文件]","oad","rname","contactRaw","cription("," doesn't e","type","setContact","room-join","getEncrypt","forwardMes","nd room in","fromBase64","iginal mes","payload"," in cache ","15582160qlqJdI","setRoomInv","tCardMessa",": [图片]","options","sendVoiceM","kickout","Delete","porationRe","fromBuffer","tbngo","setRemark","contact: ","XwjDG","setLabel","chatRoomMe","RawPayload","messageRec","addContact","ialExecuto","emit","ImageType","data:","PuppetXp","4|0|2|3|1","updateSelf","[链接] ","sage: ","getTime","get","fromUrl","hWpmh","ssage","ayload","==========",": [动画表情]","parseEmoti","not implem","deleteRoom","am-thumb.j","message","oDIpc","tion","tar","contactAli","eDefault","=======\n  ","4630990UoJqfl","getRoom","FileBox","setTousern","RevokeInfo","3215781VkNhAO","rId","getChatRoo","forEach","eDebouncin","can not fi","./server/u","Emoticon","Puppet","from","AppMessage","set avatar","$search$-","qelUl","setSignatu","fKaer","message-","deleteCont","Timeout","padPlusCon","amPayload","getCreatet","Url","Remove","[视频]","mAnnouncem","writable","getName","退出登录","genIdempot","getLabelLi","Box","WeDmI","Image","ework!\n   ","types","setFromuse",": [小程序] ","s not a fr","FfzWY","stack","scan","getMsgid","string","imageData","ageType","message is","RoomTopic","setPushcon","setNicknam","wrapAsync","act","Accept","setRoom","messageFil","onRead(%s,","./mock/uti","[小程序] ","Parser","ime","mb.jpg","filter","aty Padlin","setCity","-audio.sil","onMessageP","mberToCont","RoomMember","ScanStatus","Scanned","nQTAO","indexOf","cdnurl"," has no ta","GNWSo","ne(","keys","5c4085a-99","messageUrl","start clie","push","LCQjh","lete conta","fxnab","r url mess","__esModule","ls/is-type","emoticon","itation","inviterId","PayloadPar","label","MiniProgra","contactAva","ztSbr","hello"," message: ","getMessage","tactToWech","room-leave","friendship","yload","ram messag","messageSen","can not de","bnBze","TbnLn","NickName","teGNx","onReadMark","messageIma","configurab","_getMessag","873yxJZbj","padPlusRoo","log","audio/silk","162Rvlaon","__importSt","status","setStrange","lExecutor.","getStrange","12VOWYxV","getMsgcont","setThumbur","GcrrV",": [链接] ","ted for me","setAvatar","fail to ge","image/","setUrl","age","roomList","CachedProm","imageUrl","start logi","THUMB","dMiniProgr","exit","age-appmsg","scene","CRaNS","contact","CNGZj","mediaType","ypLUS","Search","for messag","message ","base64","tact","ogram.js","createChat","dong","fSignature","nd message","map","nts/event-","contactCor","mMemberToW","dContact","split","roomDel","getId","riFdc","actRemark",", payload:","ion","SearchWeix","avatar-","isteners","ailed: Met","mberList","mName","Can not ge","msg","setProvinc","CacheManag","contactDel","length","Data","nd tag wit","WMzyT","dkPgw"," non url p","warn","splice","messageRaw","elation","erty","an not get","addLabel","toObject","roomRawPay","conversati","mMember","ser","toQRCode","abs","__setModul","❌ 环境检测失败:","join","App","age-emotio","getRoomid","VERSION","-url-thumb","error","SmZrm","Thumbnail","ntact","otionPaylo","hUEHL","WechatMess","messageCon","fQRCode","logout","dy assigne","country","6866717Pihalx","jllNE","Link","vitation f","prototype","_findRoomI","stringify","__createBi","32017vPAfmK","onStart","setType","isIMContac","Adeaf","len","room-","entId","GXVSd","TAnLv",".jpg","SerialExec","sendMessag","pushconten","DRtBP","age-minipr","pported.","Video","parseMiniP","1.0.0","isRoomId","RoomJoin","t thumb fo","hasMessage","wSyeB","ame","n.js","yHhXs","loadParser","BWrWZ","chatroomme","qrcode","cSSgB","Attach","serId","_client","./server/m","selfContac","Waiting","roomQRCode","fast-xml-p","revokeinfo","./mock/typ","hipRawPayl","getOwnProp","ticket","login","ink","utor","defineProp","roomAdd","startsWith","contactDes","gMessagePa","_updateCon","remark","ap/index.j","getRoomMem","contactLis","LBjjx","aty","on push or","all","Audio","_onPushMes","-image-","Room","mark(","dFile","fromuserna","PuppetServ","JdqVo","t url from","invitation","Cancel","Payload-"];return(_0x3457=function(){return a})()}!function(){for(var a=_0x32bf,t=_0x3457();;)try{if(976115==-parseInt(a(318))*(-parseInt(a(212))/2)+-parseInt(a(202))/3*(parseInt(a(485))/4)+-parseInt(a(534))/5*(-parseInt(a(206))/6)+parseInt(a(455))/7*(parseInt(a(668))/8)+-parseInt(a(720))/9+-parseInt(a(715))/10+-parseInt(a(310))/11*(parseInt(a(547))/12))break;t.push(t.shift())}catch(a){t.push(t.shift())}}();var __createBinding=this&&this[_0x1a545a(317)+_0x1a545a(594)]||(Object[_0x1a545a(552)]?function(a,t,e,s){var i=_0x1a545a,r={FfzWY:function(a,t){return a===t},wSyeB:function(a,t){return a in t}},n=(r[i(128)](s,void 0)&&(s=e),Object[i(362)+i(524)+"ptor"](t,e));n&&(r[i(342)](i(697),n)?t[i(174)]:!n[i(746)]&&!n[i(200)+"le"])||(n={enumerable:!0,get:function(){return t[e]}}),Object[i(367)+i(280)](a,s,n)}:function(a,t,e,s){a[s=void 0===s?e:s]=t[e]}),__setModuleDefault=this&&this[_0x1a545a(290)+_0x1a545a(713)]||(Object[_0x1a545a(552)]?function(a,t){var e=_0x1a545a,s={WeDmI:e(618)};Object["defineProp"+e(280)](a,s[e(121)],{enumerable:!0,value:t})}:function(a,t){a[_0x1a545a(618)]=t}),__importStar=this&&this[_0x1a545a(207)+"ar"]||function(a){var t=_0x1a545a,e={mrwUT:t(692),yHhXs:function(a,t){return a!=t},JdqVo:function(a,t,e,s){return a(t,e,s)},oDIpc:function(a,t,e){return a(t,e)}},s=e[t(579)][t(252)]("|");let i=0;for(;;){switch(s[i++]){case"0":var r={};continue;case"1":return r;case"2":if(e[t(345)](a,null))for(var n in a)n!==t(618)&&Object[t(314)][t(523)+t(280)].call(a,n)&&e[t(389)](__createBinding,r,a,n);continue;case"3":e[t(709)](__setModuleDefault,r,a);continue;case"4":if(a&&a[t(174)])return a;continue}break}};function _0x32bf(a,t){const e=_0x3457();return(_0x32bf=function(a,t){return a-=117,e[a]})(a,t)}Object["defineProp"+_0x1a545a(280)](exports,_0x1a545a(174),{value:!0}),exports[_0x1a545a(627)+_0x1a545a(365)]=void 0;const XMLParser=__importStar(require(_0x1a545a(358)+"arser")),Utils_js_1=require(_0x1a545a(726)+"tils/Utils"+_0x1a545a(515)),index_js_1=require("./server/index.js"),SerialExecutor_js_1=require(_0x1a545a(726)+"tils/Seria"+_0x1a545a(210)+"js"),PadPlus=__importStar(require(_0x1a545a(354)+_0x1a545a(374)+"s")),message_appmsg_js_1=require(_0x1a545a(410)+_0x1a545a(568)+_0x1a545a(230)+_0x1a545a(515)),message_miniprogram_js_1=require(_0x1a545a(410)+_0x1a545a(568)+_0x1a545a(333)+_0x1a545a(242)),types_js_1=require(_0x1a545a(360)+_0x1a545a(475)),message_emotion_js_1=require(_0x1a545a(410)+"sages/mess"+_0x1a545a(294)+_0x1a545a(344)),PUPPET=__importStar(require(_0x1a545a(513)+"ppet")),wechaty_puppet_1=require(_0x1a545a(513)+_0x1a545a(488)),file_box_1=require(_0x1a545a(471)),mod_js_1=require(_0x1a545a(489)+"nts/mod.js"),cache_manager_js_1=require(_0x1a545a(634)+_0x1a545a(609)+".js"),cleanup_js_1=require(_0x1a545a(616)+"js"),package_json_js_1=require(_0x1a545a(483)+"json.js"),cached_promise_js_1=require(_0x1a545a(145)+_0x1a545a(406)+"promise.js"),message_js_1=require(_0x1a545a(426)+_0x1a545a(520)+"/message.js"),is_type_js_1=require(_0x1a545a(145)+_0x1a545a(175)+_0x1a545a(515)),event_room_leave_js_1=require(_0x1a545a(489)+_0x1a545a(248)+"room-leave.js"),contact_js_1=require("./mock/schema-mapper"+_0x1a545a(582)+"s"),room_js_1=require(_0x1a545a(426)+_0x1a545a(520)+_0x1a545a(394)),PackageManager_1=require(_0x1a545a(468)+_0x1a545a(453)),SEARCH_CONTACT_PREFIX=_0x1a545a(732),STRANGER_SUFFIX="@stranger",PRE="[PuppetPadPlus]",VERSION=package_json_js_1[_0x1a545a(459)+"n"][_0x1a545a(430)]||_0x1a545a(337);class PuppetPadlink extends PUPPET[_0x1a545a(728)]{[_0x1a545a(672)];static[_0x1a545a(296)]=VERSION;[_0x1a545a(635)+"ion"]=!0;[_0x1a545a(545)+_0x1a545a(687)+"r"]=new SerialExecutor_js_1[_0x1a545a(329)+_0x1a545a(366)];[_0x1a545a(592)];[_0x1a545a(353)];get[_0x1a545a(611)](){return this._client}constructor(a={}){var t=_0x1a545a;super(a),this[t(672)]=a}[_0x1a545a(430)](){return VERSION}async[_0x1a545a(419)](){await this[_0x1a545a(433)+"t"](!1)}async[_0x1a545a(433)+"t"](a){const t=_0x1a545a;this[t(353)]&&this[t(353)]["removeAllL"+t(261)](),this[t(353)]=void 0,this["__currentU"+t(352)]=void 0,this[t(592)]&&(await this[t(592)].close(),this[t(592)]=void 0),(0,cleanup_js_1.removeRunningPuppet)(this),a&&{qelUl:function(a,t){return a(t)}}[t(733)](setTimeout,()=>{var a=t;this[a(139)](this[a(533)+"nt"]())})}async[_0x1a545a(319)](){var t=_0x1a545a,e={ypLUS:t(291)},a=new PackageManager_1[t(440)+"ager"];try{await a[t(438)](),await this._startClient()}catch(a){console[t(298)](e[t(236)],a[t(708)]),process[t(229)](1)}}async[_0x1a545a(364)](a){var t=_0x1a545a,a=(this[t(592)]||(this._cacheMgr=new cache_manager_js_1[t(268)+"er"](a),await this._cacheMgr[t(403)]()),await super.login(a),await this[t(592)][t(507)](this["currentUse"+t(721)]));a||await this[t(372)+t(456)](this[t(353)].selfContact.toObject())}[_0x1a545a(571)](a){const t=_0x1a545a,e={CNGZj:t(691),ztSbr:function(a,t,e){return a(t,e)}};wechaty_puppet_1[t(204)].silly(e[t(234)],t(441),a||""),e[t(183)](setTimeout,()=>this[t(688)](t(244),{data:a||""}),1e3)}async["contactSelfName"](a){var t=_0x1a545a,e=(await this[t(353)].api[t(693)+t(196)](a),this[t(353)][t(355)+"t"][t(138)+"e"](a),await this["contactRaw"+t(414)](this._client[t(355)+"t"][t(651)+"e"]()));e[t(588)]=a,await this[t(372)+t(456)](e)}async[_0x1a545a(517)+_0x1a545a(306)](){var a=_0x1a545a,t=await this._client[a(496)][a(507)+a(529)](this[a(353)][a(355)+"t"][a(651)+"e"](),1);return file_box_1[a(717)][a(664)](""+t.Data[a(349)].buffer,a(603)+this[a(457)+a(721)]+a(328))[a(288)]()}async[_0x1a545a(517)+_0x1a545a(245)](a){var t=_0x1a545a,e=(await this[t(353)].api[t(693)+"Signature"](a),this[t(353)][t(355)+"t"][t(734)+"re"](a),await this[t(655)+t(414)](this[t(353)].selfContact[t(651)+"e"]()));e.signature=a,await this[t(372)+"tactCache"](e)}async["contactAlias"](a,t){var e=_0x1a545a,s=await this[e(655)+"Payload"](a);if(!t)return s[e(373)];!{fKaer:function(a,t){return a!==t}}[e(735)](s[e(434)].indexOf(STRANGER_SUFFIX),-1)?(await this._client[e(496)][e(539)+e(256)](s[e(434)],t),s.remark=t,await this[e(372)+e(456)](s)):(await this[e(592)][e(659)+e(540)+e(454)](s[e(434)],t),a.startsWith(SEARCH_CONTACT_PREFIX)&&(s=await this[e(592)]?.["getContact"+e(237)](a))&&s[e(233)]&&(s[e(233)].remark=t,await this._cacheMgr.setContactSearch(a,s)))}async[_0x1a545a(182)+_0x1a545a(711)](a,t){var e=_0x1a545a,s={kCxHY:e(731)+" is not un"+e(428)};if(t)throw new Error(s[e(527)]);t=await this[e(655)+e(414)](a);return file_box_1[e(717)][e(698)](t[e(443)],{name:e(260)+a+e(328)})}async[_0x1a545a(376)+"t"](){var a=_0x1a545a;return this[a(592)][a(507)+a(498)]()}[_0x1a545a(249)+_0x1a545a(676)+_0x1a545a(543)](a,t){var e=_0x1a545a;throw new Error(e(249)+e(676)+e(385)+a+", "+t+e(477)+"ailed: Met"+e(642)+e(334))}[_0x1a545a(370)+_0x1a545a(442)](a,t){var e=_0x1a545a;throw new Error(e(370)+e(656)+a+", "+t+e(477)+"ailed: Met"+e(642)+"pported.")}[_0x1a545a(629)+"ne"](a,t){var e=_0x1a545a;throw new Error(e(629)+e(164)+a+", "+t+") called f"+e(262)+e(642)+"pported.")}async[_0x1a545a(285)+_0x1a545a(198)](a,t){var e=_0x1a545a;wechaty_puppet_1[e(204)].verbose(e(388)+e(614),e(285)+e(144)+" %s)",a,t)}async[_0x1a545a(305)+_0x1a545a(241)](a){var t=_0x1a545a,e={TAnLv:t(705)+t(555)};throw new Error(e[t(327)])}async[_0x1a545a(143)+"e"](t){var e=_0x1a545a,s={BHdus:function(a,t){return a===t},hUEHL:e(132),tVNpZ:e(240),dkPgw:function(a,t,e){return a(t,e)},SNzyT:e(176)},i=await this[e(278)+"Payload"](t),r=await this["messageRawPayloadPar"+e(287)](i);switch(r[e(658)]){case PUPPET[e(124)].Message[e(122)]:return this[e(201)+e(463)+"Box"](t,i,PUPPET[e(124)][e(122)].HD);case PUPPET[e(124)][e(578)][e(381)]:{let a;a=i.binarypayload&&i["binarypayl"+e(653)][e(270)]?s.BHdus(typeof i[e(617)+e(653)],s[e(303)])?Buffer.from(i[e(617)+e(653)],s[e(554)]):Buffer[e(729)](i[e(617)+"oad"]):await this[e(353)].api[e(186)+"Voice"](r.id,r.text,i[e(387)+"me"]);var n=file_box_1.FileBox[e(664)](a,e(736)+t+e(153)),o={attrNodeName:"$",attributeNamePrefix:"",ignoreAttributes:!1},o=XMLParser.parse(i.content,o),o=s[e(274)](parseInt,o[e(266)][e(429)].$[e(479)+"h"],10);return n.metadata={voiceLength:o},n}case PUPPET[e(124)][e(578)][e(335)]:o=await this[e(353)][e(496)][e(186)+e(335)](r.id,r.text,i[e(612)]);return file_box_1[e(717)].fromBase64(o,e(736)+t+e(432));case PUPPET[e(124)][e(578)][e(465)]:n=await(0,message_appmsg_js_1[e(399)+e(371)+e(190)])(i[e(599)]),o=await this[e(353)][e(496)]["getMessage"+e(351)](r.text,i[e(612)]);return file_box_1[e(717)].fromBase64(o,n[e(645)]);case PUPPET[e(124)][e(578)].Emoticon:o=await(0,message_emotion_js_1[e(704)+e(154)+e(701)])(i),n=file_box_1[e(717)].fromUrl(o[e(161)],{name:e(736)+t+(e(396)+e(577))});return n[e(548)]={payload:o,type:s[e(409)]},n;case PUPPET[e(124)][e(578)][e(181)+"m"]:try{var a=await this[e(353)][e(496)]["getMessage"+e(181)+e(480)](i[e(599)],i[e(612)]);return file_box_1.FileBox[e(664)](a,e(736)+t+("-miniprogr"+e(707))+"pg")}catch(a){return wechaty_puppet_1[e(204)][e(276)](e(219)+"t thumb fo"+e(613)+e(191)+"e:"+t+e(257)+" "+JSON[e(316)](i)),file_box_1[e(717)][e(677)](Buffer.from(new ArrayBuffer(0)),e(736)+t+(e(297)+e(328)))}case PUPPET.types.Message.Url:o=await(0,message_appmsg_js_1[e(399)+e(371)+e(190)])(i.content);if(o[e(422)])return file_box_1[e(717)][e(698)](o[e(422)]);try{var _=await this[e(353)][e(496)].getMessageAttachThumb(i[e(599)],i[e(612)]);return file_box_1.FileBox.fromBase64(_,"message-"+t+"-url-thumb"+e(328))}catch(a){return wechaty_puppet_1[e(204)][e(276)]("fail to ge"+e(340)+e(173)+"age:"+t+e(257)+" "+JSON[e(316)](o)),file_box_1[e(717)][e(677)](Buffer[e(729)](new ArrayBuffer(0)),e(736)+t+(e(297)+e(328)))}default:throw new Error(e(265)+e(622)+e(185)+t)}}async[_0x1a545a(199)+"ge"](a,t){var e=_0x1a545a,s=await this[e(278)+e(414)](a);return this[e(201)+e(463)+e(120)](a,s,t)}async[_0x1a545a(584)+"iProgram"](a){var t=_0x1a545a,e={TbnLn:t(135)+t(458)+t(445)+t(281)+t(481)+t(740)},a=await this[t(278)+t(414)](a);if((await this[t(278)+"PayloadPar"+t(287)](a))[t(658)]!==PUPPET[t(124)].Message.MiniProgram)throw new Error(e[t(195)]);return(0,message_miniprogram_js_1[t(336)+"rogramMess"+t(503)])(a)}async[_0x1a545a(167)](a){var t=_0x1a545a,e={QIhFa:function(a,t){return a!==t},YYJJH:t(265)+t(390)+t(275)+"ayload"},a=await this[t(278)+"Payload"](a),s=await this[t(278)+t(179)+t(287)](a);if(e.QIhFa(s[t(658)],PUPPET[t(124)].Message[t(742)]))throw new Error(e[t(610)]);s=await(0,message_appmsg_js_1["parseAppmsgMessagePa"+t(190)])(a[t(599)]);return{description:s[t(604)],thumbnailUrl:s.thumburl,title:s[t(645)],url:s[t(546)]}}async[_0x1a545a(192)+_0x1a545a(518)](a,t,e){var s=_0x1a545a,e=await this[s(611)][s(496)][s(619)](a,t,e||[]),i=(0,is_type_js_1[s(338)])(a)?this[s(353)][s(355)+"t"][s(502)+"e"]()+": "+t:t;return await this[s(558)+s(467)]((new PadPlus[s(578)]).setType(types_js_1[s(304)+s(134)][s(487)])[s(125)+s(654)](this[s(457)+s(721)])[s(718)+s(343)](a)[s(643)](t)[s(137)+"tent"](i),e.getMsgid(),e[s(186)+"revokeinfo"]()),e.getMsgid()}async[_0x1a545a(192)+_0x1a545a(386)](a,t){var e,s,i=_0x1a545a,r={bnBze:i(220),UBIuY:i(633),vPjCm:i(205),uqfgt:i(535)+"h",RYpoO:"video/",IDjHf:i(510)+i(486)+"img.com/20"+i(482)+i(166)+i(522)+"b5-437fc00569e3.png",jllNE:i(744)},n=t[i(548)];return(n.type===i(176)?(n=n.payload,e=await this._client.api[i(330)+i(597)](a,n[i(411)],n[i(323)]),s=(0,is_type_js_1.isRoomId)(a)?this._client.selfContact[i(502)+"e"]()+i(703):i(448),n=(0,message_emotion_js_1[i(435)+i(302)+"ad"])(n),await this[i(558)+i(467)]((new PadPlus[i(578)])[i(320)](types_js_1[i(304)+i(134)][i(727)])[i(125)+i(654)](this[i(457)+i(721)]).setTousername(a)[i(643)](n)[i(137)+i(530)](s),e.getMsgid(),e["getMessage"+i(359)]()),e):t[i(235)][i(369)](r[i(194)])?(n=await t[i(649)](),s=await this[i(353)][i(496)]["sendImageM"+i(425)](a,n),e=(0,is_type_js_1[i(338)])(a)?this[i(353)].selfContact[i(502)+"e"]()+i(671):r[i(400)],await this[i(558)+"sage"]((new PadPlus[i(578)]).setType(types_js_1[i(304)+"ageType"].Text)[i(125)+"rname"](this[i(457)+i(721)])[i(718)+"ame"](a)[i(643)](e).setPushcontent(e),s.getMsgid(),s[i(186)+i(359)]()),s):t.mediaType===r[i(437)]?(n=await t[i(649)](),e=await this[i(353)][i(496)][i(673)+"essage"](a,n,t[i(548)][r[i(625)]]),s=(0,is_type_js_1[i(338)])(a)?this._client[i(355)+"t"][i(502)+"e"]()+i(601):i(638),await this[i(558)+i(467)]((new PadPlus[i(578)])[i(320)](types_js_1[i(304)+i(134)][i(487)])[i(125)+"rname"](this[i(457)+i(721)])["setTousern"+i(343)](a)[i(643)](s)[i(137)+i(530)](s),e.getMsgid(),e[i(186)+i(359)]()),e):t.mediaType.startsWith(r[i(506)])?(n=await t.toBase64(),s=await file_box_1[i(717)][i(698)](r[i(628)])[i(649)](),e=await this[i(353)][i(496)][i(640)+i(425)](a,n,s),n=(0,is_type_js_1[i(338)])(a)?this[i(353)][i(355)+"t"][i(502)+"e"]()+i(583):r[i(311)],await this["_onSendMes"+i(467)]((new PadPlus[i(578)]).setType(types_js_1["WechatMess"+i(134)][i(487)])[i(125)+i(654)](this[i(457)+"rId"])[i(718)+i(343)](a)[i(643)](n).setPushcontent(n),e.getMsgid(),e[i(186)+"revokeinfo"]()),e):(s=await t[i(649)](),r=await this[i(353)][i(496)]["sendFileMe"+i(700)](i(690)+t[i(235)]+i(464)+s),n=(0,is_type_js_1[i(338)])(a)?this[i(353)][i(355)+"t"][i(502)+"e"]()+i(641):i(652),await this[i(558)+i(467)]((new PadPlus[i(578)])[i(320)](types_js_1[i(304)+i(134)][i(487)])[i(125)+i(654)](this[i(457)+i(721)])["setTousern"+i(343)](a)[i(643)](n)[i(137)+i(530)](n),r[i(131)](),r[i(186)+i(359)]()),r))[i(131)]()}async[_0x1a545a(192)+_0x1a545a(251)](a,t){var e=_0x1a545a,t=await this[e(655)+"Payload"](t),t=(new PadPlus.Contact)[e(556)+"e"](t[e(434)])[e(138)+"e"](t[e(588)])[e(218)](t.avatar)[e(620)](t[e(551)])[e(734)+"re"](t[e(630)])[e(569)](t[e(466)])[e(682)](t[e(180)])[e(679)](t[e(373)])[e(152)](t[e(423)])[e(267)+"e"](t[e(469)])[e(576)](t[e(309)])[e(659)+"addscene"](t[e(623)+e(231)])[e(209)+"r"](t[e(398)]),s=await this[e(353)][e(496)][e(559)+e(670)+"ge"](a,t),t=((0,is_type_js_1[e(338)])(a)?this._client[e(355)+"t"][e(502)+"e"]()+": ":"")+e(516)+t[e(502)+"e"]();return await this["_onSendMes"+e(467)]((new PadPlus[e(578)])[e(320)](types_js_1["WechatMess"+e(134)].Text)[e(125)+e(654)](this[e(457)+"rId"])[e(718)+e(343)](a).setContent(t).setPushcontent(t),s[e(131)](),s.getMessagerevokeinfo()),s[e(131)]()}async[_0x1a545a(192)+"dUrl"](a,t){var e=_0x1a545a,s=new PadPlus[e(730)+e(312)],s=(s[e(567)](t[e(645)])[e(221)](t[e(546)]),t.description&&s["setDescrip"+e(710)](t.description),t[e(449)+"rl"]&&s[e(214)+"l"](t[e(449)+"rl"]),await this[e(353)][e(496)][e(330)+e(595)]((0,Utils_js_1[e(118)+e(325)])(),a,s)),t=(0,is_type_js_1[e(338)])(a)?this[e(353)][e(355)+"t"][e(502)+"e"]()+e(216)+t[e(645)]:e(694)+t.title;return await this[e(558)+e(467)]((new PadPlus[e(578)])[e(320)](types_js_1["WechatMess"+e(134)][e(293)])["setFromuse"+e(654)](this[e(457)+"rId"])["setTousern"+e(343)](a)[e(643)](s[e(213)+"ent"]())["setPushcon"+e(530)](t),s[e(131)](),s[e(186)+e(359)]()),s[e(131)]()}async["messageSen"+_0x1a545a(228)+"am"](a,t){var e=_0x1a545a,s=await this[e(353)][e(496)][e(330)+e(446)+"am"](a,t),t=(0,is_type_js_1[e(338)])(a)?this[e(353)].selfContact[e(502)+"e"]()+e(126)+t[e(645)]:e(146)+t[e(645)];return await this["_onSendMes"+e(467)]((new PadPlus[e(578)])[e(320)](types_js_1[e(304)+"ageType"][e(293)])[e(125)+e(654)](this[e(457)+e(721)])[e(718)+e(343)](a)[e(643)](s.getMsgcontent())["setPushcon"+e(530)](t),s[e(131)](),s[e(186)+e(359)]()),s[e(131)]()}async[_0x1a545a(685)+_0x1a545a(380)](a){var t=_0x1a545a,e=await this[t(592)][t(186)](a),a=await this[t(592)][t(186)+t(719)](a);return await this._client.api["revokeMess"+t(222)](e[t(612)],a.clientmsgid,a[t(549)+"sgid"]),!0}async["forwardMessagewenjian"](a,t){var e=_0x1a545a;await this[e(353)][e(496)][e(662)+e(639)+"n"](a,t)}async["messageFor"+_0x1a545a(615)](t,a){var e=_0x1a545a,s=await this[e(278)+e(414)](a),i=await this[e(278)+e(179)+e(287)](s);let r;switch(i[e(658)]){case PUPPET[e(124)][e(578)].Text:r=await this["messageSen"+e(518)](t,i.text);break;case PUPPET[e(124)].Message[e(122)]:var n=await this[e(199)+"ge"](a,PUPPET.types[e(122)].HD);r=await this[e(192)+e(386)](t,n);break;case PUPPET[e(124)][e(578)][e(381)]:n=await this[e(143)+"e"](a);r=await this[e(192)+e(386)](t,n);break;case PUPPET.types[e(578)].Video:n=await this[e(143)+"e"](a);r=await this.messageSendFile(t,n);break;case PUPPET[e(124)][e(578)][e(465)]:{n=await this[e(353)][e(496)]["forwardMes"+e(639)+"n"](t,s.content);r=n[e(131)]();let a=s[e(331)+"t"];a&&-1!==a[e(160)](":")&&(a=a[e(252)](":")[1]),(0,is_type_js_1[e(338)])(t)&&(a=this[e(353)][e(355)+"t"][e(502)+"e"]()+":"+a),await this[e(558)+e(467)]((new PadPlus[e(578)])[e(320)](types_js_1["WechatMess"+e(134)][e(293)])[e(125)+e(654)](this[e(457)+e(721)])["setTousern"+e(343)](t).setContent(n[e(213)+"ent"]())["setPushcon"+e(530)](a),n[e(131)](),n["getMessage"+e(359)]());break}case PUPPET[e(124)][e(578)][e(181)+"m"]:case PUPPET.types[e(578)][e(742)]:{n=await this[e(353)].api[e(662)+"sage"](t,s[e(599)]);r=n[e(131)]();let a=s.pushcontent;a&&{cSSgB:function(a,t){return a!==t}}[e(350)](a[e(160)](":"),-1)&&(a=a[e(252)](":")[1]),(0,is_type_js_1[e(338)])(t)&&(a=this._client[e(355)+"t"].getNickname()+":"+a),await this[e(558)+e(467)]((new PadPlus[e(578)])[e(320)](types_js_1[e(304)+e(134)][e(293)])[e(125)+"rname"](this[e(457)+e(721)])[e(718)+e(343)](t)[e(643)](n[e(213)+e(555)]())[e(137)+e(530)](a),n[e(131)](),n[e(186)+e(359)]());break}case PUPPET.types[e(578)][e(727)]:n=await this[e(143)+"e"](a);r=await this[e(192)+e(386)](t,n);break;default:throw new Error(e(504)+"rwarding is unsuppor"+e(217)+e(528)+a+e(563)+i[e(658)])}return r}async[_0x1a545a(368)](a,t){var e=_0x1a545a;await this._client.api[e(631)+e(491)+"s"](a,t)}async[_0x1a545a(484)](a){var t=_0x1a545a,a=await this[t(284)+"load"](a);return a[t(443)]?file_box_1[t(717)][t(698)](a[t(443)]):file_box_1[t(717)][t(677)](Buffer.from(new ArrayBuffer(0)),t(324)+a[t(434)]+(t(532)+"g"))}async[_0x1a545a(357)](a){var t=_0x1a545a,a=await this[t(353)].api["getChatRoo"+t(536)](a);return file_box_1[t(717)][t(664)](""+a[t(271)][t(349)][t(497)],t(603)+this[t(457)+"rId"]+t(328))[t(288)]()}async["logout"](){var a=_0x1a545a;this[a(585)]&&(await this[a(353)][a(496)][a(307)](),this[a(688)]("logout",{contactId:this[a(457)+a(721)],data:"logout by self"}))}async[_0x1a545a(421)](a,t){var e=_0x1a545a;return(await this[e(353)][e(496)][e(243)+"Room"](a,t))[e(295)]()}async[_0x1a545a(253)](a,t){var e=_0x1a545a;await this[e(353)][e(496)][e(562)+e(156)](a,t)}async[_0x1a545a(223)](){var a=_0x1a545a;return this[a(592)][a(439)]()}async[_0x1a545a(509)](a){var t=_0x1a545a;await this[t(353)][t(496)][t(575)+"om"](a)}async["roomTopic"](a,t){var e=_0x1a545a;await this[e(353)].api[e(495)+e(264)](a,t||"")}async[_0x1a545a(395)+"ce"](a,t){var e=_0x1a545a;if({LiJod:function(a,t){return a===t}}[e(637)](t,void 0))return this[e(353)][e(496)][e(722)+e(745)+e(555)](a);await this._client[e(496)].setChatRoomAnnouncement(a,t)}async[_0x1a545a(491)+"List"](a){const t=_0x1a545a,e=await this[t(505)+t(263)](a);return Object[t(473)](e)[t(247)](a=>a[t(434)])}async[_0x1a545a(593)+"tionAccept"](a){var t=_0x1a545a,a=await this["roomInvita"+t(494)+t(644)](a);await this._client.api.acceptChatRoomInvitation(a[t(178)],a[t(391)])}async[_0x1a545a(189)+_0x1a545a(141)](a){var t=_0x1a545a,a=await this[t(189)+"RawPayload"](a),e=a.contactId;(0,is_type_js_1[t(321)+"tId"])(e)&&await this[t(405)+t(301)](e,a[t(363)]),await this[t(353)].api.acceptUser(e,a[t(363)],a.stranger,a[t(231)])}async["isFriend"](a){var t=_0x1a545a,a=await this[t(353)].api[t(420)+t(279)](a);return!!{irBOa:function(a,t){return a===t}}[t(566)](a[t(271)]?.[t(519)+t(710)],0)}async[_0x1a545a(189)+_0x1a545a(564)](a,t){var e=_0x1a545a,s={GcrrV:function(a,t){return a===t},lzwWo:e(132)};let i;t&&(i=s[e(215)](typeof t,s.lzwWo)?t:t[e(184)]);s=await this[e(353)].api[e(525)+e(241)](a);await this[e(353)][e(496)][e(686)](s[e(651)+"e"](),s[e(626)+e(427)](),i)}async[_0x1a545a(189)+_0x1a545a(531)+"e"](a){var t=_0x1a545a;return this[t(444)+t(452)](a)}async[_0x1a545a(189)+_0x1a545a(259)+"in"](a){return this["_friendshi"+_0x1a545a(452)](a)}async[_0x1a545a(444)+_0x1a545a(452)](a){var t,e=_0x1a545a;return await this._cacheMgr["getContact"+e(237)](a)||(t=await this[e(353)][e(496)][e(525)+e(241)](a),a=""+SEARCH_CONTACT_PREFIX+a,await this[e(592)][e(659)+e(237)](a,t[e(283)]())),a}async[_0x1a545a(315)+"dForUserName"](a){var t=_0x1a545a,e={tbngo:function(a,t){return a!==t}},s=[];for(const r of await this[t(592)]?.[t(439)]()||[]){var i=await this[t(592)]?.[t(375)+t(608)](r);i&&(i=Object[t(165)](i),e[t(678)](i[t(160)](a),-1))&&s[t(169)](r)}return s}async[_0x1a545a(269)+"ete"](a){var t=_0x1a545a;(await this[t(405)+t(301)](a))[t(211)+"r"]()?wechaty_puppet_1[t(204)].warn(t(193)+t(171)+"ct which i"+t(127)+t(413)+a):(await this._client[t(496)][t(737)+t(140)](a),await this[t(405)+t(301)](a))}async[_0x1a545a(521)+_0x1a545a(564)](a,t){var e=_0x1a545a,s=await this[e(511)+e(605)](a,!0),i=await this[e(655)+"Payload"](t),r=i[e(180)][e(252)](",")[e(150)](a=>a)[e(247)](a=>parseInt(a,10));!{CRaNS:function(a,t){return a!==t}}[e(232)](r[e(160)](s[e(254)]()),-1)?(r[e(169)](s[e(254)]()),await this._client[e(496)][e(659)+e(606)](t,r),i[e(180)]=r[e(292)](","),await this._updateContactCache(i)):wechaty_puppet_1.log[e(276)](e(680)+t+(" has alrea"+e(308))+"d tag: "+a)}async["tagContact"+_0x1a545a(743)](a,t){var e=_0x1a545a,s=await this[e(511)+"thName"](a);if(!s)throw new Error(e(725)+e(272)+e(401)+a);var i=await this[e(655)+e(414)](t),r=i[e(180)][e(252)](",")[e(150)](a=>a)[e(247)](a=>parseInt(a,10)),s=r.indexOf(s[e(254)]());-1===s?wechaty_puppet_1[e(204)][e(276)](PRE,"contact: "+t+(e(162)+e(417))+a):(r[e(277)](s,1),await this[e(353)].api[e(659)+"Label"](t,r),i[e(180)]=r[e(292)](","),await this["_updateCon"+e(456)](i))}async[_0x1a545a(521)+_0x1a545a(675)](a){var t=_0x1a545a,e=await this[t(511)+t(605)](a,!1);if(!e)throw new Error("tag:"+a+t(657)+"xist");await this._client[t(496)][t(550)+"l"](e[t(254)]()),await this._getTagList(!0)}async[_0x1a545a(521)+"List"](t){const e=_0x1a545a;if(t){var t=await this[e(655)+"Payload"](t);if(!t.label||!t[e(180)][e(270)])return[];const s=t[e(180)].split(",")[e(150)](a=>a)[e(247)](a=>parseInt(a,10)),{labelList:i,fromCache:r}=await this._getTagList();let a=i[e(150)](a=>-1!==s.indexOf(a.getId()));return{LCQjh:function(a,t){return a===t}}[e(170)](a[e(270)],s[e(270)])||!r?a[e(247)](a=>a[e(747)]()):(t=(await this[e(542)+"t"](!0))[e(632)],(a=t[e(150)](a=>-1!==s[e(160)](a.getId()))).map(a=>a[e(747)]()))}return t=(await this[e(542)+"t"](!0))["labelList"],t.map(a=>a[e(747)]())}async[_0x1a545a(655)+_0x1a545a(414)](t){const e=_0x1a545a;if(t.startsWith(SEARCH_CONTACT_PREFIX))return(await this[e(592)]?.[e(507)+e(237)](t))[e(233)];let a=await this._cacheMgr[e(507)](t);return a=a?a:await(0,cached_promise_js_1[e(224)+e(648)])("contactRaw"+e(393)+t,async()=>{var a=e;return(await this[a(405)+a(301)](t))[a(283)]()})}async[_0x1a545a(655)+_0x1a545a(179)+"ser"](a){var t=_0x1a545a;return(0,contact_js_1[t(739)+t(187)+t(378)])(a)}async[_0x1a545a(278)+"Payload"](a){var t=_0x1a545a,e=await this[t(592)][t(186)](a);if(e)return e;throw new Error("can not fi"+t(246)+t(667)+t(238)+t(508)+a)}async[_0x1a545a(278)+_0x1a545a(179)+"ser"](a){var t=_0x1a545a;return(0,message_js_1[t(492)+t(647)])(this,a)}async[_0x1a545a(284)+_0x1a545a(644)](a){var t=_0x1a545a;let e=await this[t(592)].getRoom(a);return e||(a=await this[t(405)+t(301)](a),e=a[t(283)]()),e}async[_0x1a545a(284)+_0x1a545a(346)](a){var t=_0x1a545a;return(0,room_js_1[t(203)+"mToWechaty"])(a)}async[_0x1a545a(491)+_0x1a545a(684)](a,t){return(await this[_0x1a545a(505)+"mberList"](a))[t]}async[_0x1a545a(491)+"RawPayloadParser"](a){var t=_0x1a545a;return(0,room_js_1["padPlusRoo"+t(250)+t(647)])(a)}async[_0x1a545a(593)+_0x1a545a(494)+"load"](a){var t=_0x1a545a,e=await this[t(592)][t(590)+t(177)](a);if(e)return e;throw new Error(t(624)+t(663)+t(313)+t(557)+a)}async[_0x1a545a(593)+_0x1a545a(494)+_0x1a545a(346)](a){return a}async["friendship"+_0x1a545a(684)](a){var t=_0x1a545a,e=await this._cacheMgr["getFriends"+t(361)+t(653)](a);if(e)return e;throw new Error(t(624)+t(538)+t(512)+": "+a)}async[_0x1a545a(189)+_0x1a545a(684)+_0x1a545a(147)](a){return a}async[_0x1a545a(408)+_0x1a545a(241)](a,t){var e=_0x1a545a;wechaty_puppet_1[e(204)][e(544)](PRE,e(424)+e(461)+JSON[e(316)](a[e(283)]())),await this[e(372)+"tactCache"](a[e(283)](),t),a[e(661)+"username"]()&&(t=await this[e(592)][e(507)+e(540)+e(454)](a[e(661)+e(434)]()))&&(await this[e(712)+"as"](a.getUsername(),t),await this[e(592)][e(737)+e(450)+"rAlias"](a.getEncryptusername()))}async[_0x1a545a(382)+"sage"](a){var t=_0x1a545a,e={GkdCA:t(708),riFdc:t(573)+"e",JBEAg:t(660),SmZrm:t(188),WMzyT:"room-topic"},s=a[t(254)]();if(wechaty_puppet_1[t(204)][t(544)](PRE,t(379)+t(665)+t(695)+JSON[t(316)]("")),!await this[t(592)][t(341)](s)){var i=a[t(283)](),r=(await this[t(592)].setMessage(a[t(254)](),i),await(0,mod_js_1[t(397)])(this,i));switch(r[t(658)]){case mod_js_1[t(596)][t(578)]:this.emit(e[t(412)],{messageId:s});break;case mod_js_1.EventType[t(602)]:var n=r[t(666)];await this[t(592)]["setFriends"+t(361)+"oad"](s,n),this.emit("friendship",{friendshipId:s});break;case mod_js_1[t(596)].RoomInvite:n=r[t(666)];await this[t(592)][t(669)+"itation"](s,n),this[t(688)](e[t(255)],{roomInvitationId:s});break;case mod_js_1.EventType[t(339)]:n=r[t(666)];this[t(688)](e.JBEAg,n),await this[t(415)+t(286)](n[t(499)]);break;case mod_js_1[t(596)][t(514)]:n=r[t(666)];this[t(688)](e[t(299)],n),await this[t(415)+t(286)](n.roomId);break;case mod_js_1[t(596)][t(136)]:n=r.payload;this[t(688)](e[t(273)],n)}}}async["_updateCon"+_0x1a545a(456)](e,a){const s=_0x1a545a,i={DRtBP:function(a,t){return a/t},oKJGw:function(a,t){return a<t},gMMWg:function(a,t){return a<t},TpAlf:function(a,t){return a-t}};if(e.username)if((0,is_type_js_1.isRoomId)(e[s(434)])){var t=await this[s(592)][s(716)](e[s(434)]);if(t&&!a&&(e[s(443)]||(e[s(443)]=t[s(443)]),i.oKJGw(e[s(348)+s(263)][s(270)],t[s(348)+"mberList"].length))&&i[s(587)](Math[s(289)](i[s(650)](t[s(348)+s(263)][s(270)],e["chatroomme"+s(263)][s(270)])),3)){const r=new Set(e[s(348)+s(263)][s(247)](a=>a.username)),n=t[s(348)+s(263)].filter(a=>!r.has(a[s(434)])).map(a=>a[s(434)])[s(150)](a=>!(0,event_room_leave_js_1["isRoomLeav"+s(724)+"g"])(e[s(434)],a));n.length&&n[s(723)](a=>{var t=s,a={removeeIdList:[a],removerId:a,roomId:e[t(434)],timestamp:Math[t(418)](i[t(332)](Date[t(607)](),1e3))};this.emit(t(188),a)})}a=e.username;await this._cacheMgr[s(142)](a,e),await this.dirtyPayload(PUPPET.types[s(414)][s(384)],a),await this[s(415)+s(286)](a)}else await this[s(592)][s(659)](e[s(434)],e),await this[s(581)+"ad"](PUPPET[s(124)][s(414)][s(526)],e[s(434)]);else wechaty_puppet_1.log.warn(PRE,s(537)+"s required for conta"+s(472)+JSON.stringify(e))}async[_0x1a545a(415)+_0x1a545a(286)](a,t){var e=_0x1a545a;t?await this._cacheMgr["setRoomMem"+e(608)](a,t):await this[e(592)][e(706)+e(501)](a),await this.dirtyPayload(PUPPET[e(124)][e(414)][e(156)],a)}async[_0x1a545a(405)+_0x1a545a(301)](a,t){var e=_0x1a545a,t=await this[e(353)][e(496)].getContact(a,t);return t[e(651)+"e"]()||t[e(556)+"e"](a),await this[e(372)+e(456)](t[e(283)]()),t}async[_0x1a545a(201)+"eImageFile"+_0x1a545a(120)](t,e,a){var s,i=_0x1a545a,r={hJwSf:function(a,t){return a===t},AkPQN:i(572),ScDGH:"normal"};if((await this["messageRaw"+i(179)+i(287)](e))[i(658)]!==PUPPET.types[i(578)].Image)throw new Error(i(239)+t+(i(460)+i(407)+"essage"));if(a===PUPPET[i(124)][i(122)][i(300)]&&(e[i(617)+i(653)]&&e[i(617)+"oad"][i(270)]))return s=Buffer[i(729)](e[i(617)+"oad"]),file_box_1[i(717)][i(677)](s,i(736)+t+(i(591)+i(149)));let n;n=r[i(570)](a,PUPPET[i(124)].Image[i(300)])?PadPlus[i(689)][i(227)]:(r[i(570)](a,PUPPET[i(124)][i(122)].HD),PadPlus[i(689)].HD);try{var o=await this._client[i(496)][i(186)+"Image"](e.content,e[i(612)],n);let a;return a=o.imageType===PadPlus[i(689)][i(227)]?r[i(478)]:o[i(636)]===PadPlus[i(689)].HD?"hd":r[i(561)],o[i(133)]?file_box_1[i(717)][i(664)](o[i(133)],i(736)+t+"-image-"+a+i(328)):file_box_1.FileBox[i(677)](Buffer[i(729)](new ArrayBuffer(0)),i(736)+t+i(383)+(new Date)[i(696)]()+i(328))}catch(a){return file_box_1[i(717)][i(677)](Buffer.from(new ArrayBuffer(0)),i(736)+t+i(383)+(new Date)[i(696)]()+i(328))}}async["_onSendMessage"](a,t,e){const s=_0x1a545a,i={nQTAO:s(708)};a[s(490)](t),a["setCreatet"+s(148)](e[s(741)+s(148)]()),await this[s(592)][s(493)](t,a.toObject()),await this[s(592)][s(493)+s(719)](t,e[s(283)]()),setImmediate(()=>{var a=s;this.emit(i[a(159)],{messageId:t})})}async[_0x1a545a(511)+_0x1a545a(605)](t,a){const e=_0x1a545a;let s=(await this[e(542)+"t"]())[e(632)],i=s.find(a=>a[e(747)]()===t);return i||(s=(await this[e(542)+"t"](!0))[e(632)],i=s[e(598)](a=>a.getName()===t)),!i&&a&&(a=await this._client[e(496)][e(282)](t),i=(new PadPlus.Label)[e(490)](a)[e(476)](t),await this[e(542)+"t"](!0)),{GXVSd:function(a,t){return a||t}}[e(326)](i,null)}async["_getTagList"](a){var t=_0x1a545a;let e=this[t(592)][t(119)+"st"](),s=!0;return e&&!a||(e=await this._client.api.getLabelList(),this[t(592)]?.setLabelList(e),s=!1),{fromCache:s,labelList:e}}async[_0x1a545a(505)+_0x1a545a(263)](a,t){var e,s=_0x1a545a;if(!this[s(592)])return{};let i=await this._cacheMgr["getRoomMem"+s(608)](a);if(e=!i,t=t,e||t){var r={};for(const o of await this[s(353)][s(496)][s(722)+s(574)](a)){var n=(0,room_js_1[s(683)+s(155)+s(140)])(o);await this._cacheMgr[s(404)](n[s(651)+"e"]())||await this._cacheMgr[s(659)](n[s(651)+"e"](),n.toObject()),r[o.getUsername()]=o[s(283)]()}i=r,await this["_updateRoo"+s(286)](a,r)}return i}async[_0x1a545a(533)+"nt"](){const r=_0x1a545a,i={BWrWZ:function(a,t){return a+t},teGNx:", with qrcode: ",LBjjx:r(130),ezErA:"login success: DONE",GNWSo:"on ready",MObwn:"ready",lbcfH:r(541),qKjNl:r(392),yqhFy:r(356),MioXb:"Scanned",qAUer:"Timeout"},n=((0,cleanup_js_1["addRunning"+r(728)])(this),await this[r(646)+"nt"](),{[PUPPET[r(124)][r(157)].Unknown]:i[r(474)],[PUPPET[r(124)][r(157)][r(392)]]:i.qKjNl,[PUPPET.types[r(157)][r(356)]]:i[r(451)],[PUPPET.types[r(157)].Scanned]:i.MioXb,[PUPPET[r(124)][r(157)][r(402)]]:r(402),[PUPPET[r(124)][r(157)][r(738)]]:i[r(553)]}),a=async a=>{var t=r;let e=PUPPET[t(124)][t(157)].Unknown,s;switch(a[t(208)]){case 1:s=a[t(225)],e=PUPPET.types.ScanStatus[t(356)];break;case 2:e=PUPPET.types[t(157)][t(158)];break;case 3:e=PUPPET[t(124)].ScanStatus[t(402)];break;case 4:e=PUPPET.types[t(157)][t(392)];break;case 5:e=PUPPET[t(124)][t(157)][t(738)]}wechaty_puppet_1[t(204)].silly(PRE,t(580)+t(447)+n[e]+(s?i[t(347)](i[t(197)],s):"")),this.emit(i[t(377)],{qrcode:s,status:e})};this[r(353)][r(496)][r(364)]("",{onLoginStart:a=>{var t=r;wechaty_puppet_1[t(204)][t(462)](PRE,t(226)+t(589)+"e")},onLoginSuccess:async a=>{const e=r,s={hWpmh:i.ezErA};this[e(139)](this[e(545)+"ialExecutor"][e(416)](async()=>{var a=e,t=this[a(353)][a(355)+"t"][a(651)+"e"]();wechaty_puppet_1[a(204)][a(544)](PRE,"login succ"+a(431)+t),await this[a(364)](this[a(353)][a(355)+"t"].getUsername()),wechaty_puppet_1.log[a(544)](PRE,s[a(699)])}))},onOneClickEvent:a,onQrCodeEvent:a,onSync:async s=>{const i=r;this[i(139)](this[i(545)+i(687)+"r"][i(416)](async()=>{var a=i;for(const t of s[a(507)+"List"]())await this[a(408)+a(241)](t,!0);for(const e of s[a(186)+a(621)]());}))}})[r(500)](()=>{const t=r;return this[t(139)](this[t(545)+t(687)+"r"][t(416)](async()=>{var a=t;wechaty_puppet_1[a(204)][a(544)](PRE,i[a(163)]),this[a(688)](i[a(565)],{data:"ready"})})),null})[r(600)](async a=>{var t=r;wechaty_puppet_1.log.error(t(168)+"nt failed: "+a[t(129)])})}async["_setupClient"](){const t=_0x1a545a,e={Adeaf:t(307),InnpF:t(117),XwjDG:t(674),fxnab:t(708),NTqsT:"contact"};this[t(353)]=new index_js_1[t(586)+"t"](this[t(672)]),this._client.on(e[t(681)],this.wrapAsync(async()=>{var a=t;this[a(457)+"rId"]&&this.emit(e[a(322)],{contactId:this[a(457)+a(721)],data:e.InnpF}),await this._stopClient(!0)})),this[t(353)].on(e[t(172)],async e=>{const s=t;await this[s(545)+s(687)+"r"][s(416)](async()=>{var a=s;for(const t of e)await this["_onPushMes"+a(467)](t)})}),this[t(353)].on(e[t(470)],this[t(139)](async e=>{const s=t;await this[s(545)+s(687)+"r"][s(416)](async()=>{var a=s;for(const t of e)await this["_onPushCon"+a(241)](t)})})),this["_printVers"+t(258)]&&(this[t(635)+t(258)]=!1,wechaty_puppet_1[t(204)][t(462)](t(560)+t(702)+t(702)+t(702)+t(702)+t(702)+t(714)+"     Welcome to Wech"+t(151)+"k Bot Fram"+t(123)+"    - Vers"+t(436)+VERSION+(t(560)+t(702)+t(702))+"=========="+t(702)+"=========="+t(714)+"  "))}}exports[_0x1a545a(627)+"ink"]=PuppetPadlink,exports[_0x1a545a(618)]=PuppetPadlink;