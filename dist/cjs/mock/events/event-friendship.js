"use strict";const _0x371615=_0x5f2d;function _0x5f2d(e,t){const r=_0x10e5();return(_0x5f2d=function(e,t){return e-=184,r[e]})(e,t)}!function(){for(var e=_0x5f2d,t=_0x10e5();;)try{if(245211==-parseInt(e(206))+parseInt(e(244))/2+-parseInt(e(223))/3+parseInt(e(231))/4*(parseInt(e(215))/5)+parseInt(e(202))/6+-parseInt(e(194))/7+-parseInt(e(233))/8*(-parseInt(e(232))/9))break;t.push(t.shift())}catch(e){t.push(t.shift())}}();var __createBinding=this&&this[_0x371615(225)+"nding"]||(Object[_0x371615(243)]?function(e,t,r,n){var i=_0x371615,s={ljmdz:function(e,t){return e===t},WVYgo:function(e,t){return e in t},oPYjH:i(241)},a=(s[i(228)](n,void 0)&&(n=r),Object[i(226)+i(237)+i(211)](t,r));a&&(s[i(186)](s[i(189)],a)?t[i(248)]:!a[i(240)]&&!a[i(242)+"le"])||(a={enumerable:!0,get:function(){return t[r]}}),Object[i(195)+i(192)](e,n,a)}:function(e,t,r,n){e[n=!{JRuol:function(e,t){return e===t}}[_0x371615(199)](n,void 0)?n:r]=t[r]}),__setModuleDefault=this&&this[_0x371615(209)+_0x371615(201)]||(Object[_0x371615(243)]?function(e,t){var r=_0x371615,n={RHifz:r(219)};Object[r(195)+r(192)](e,n[r(210)],{enumerable:!0,value:t})}:function(e,t){var r=_0x371615;e[{wFBlB:r(219)}[r(185)]]=t}),__importStar=this&&this[_0x371615(204)+"ar"]||function(e){var t=_0x371615,r={TBNnl:function(e,t){return e!=t},NuAWF:function(e,t){return e!==t},DMHXx:t(219),wzEWB:function(e,t,r){return e(t,r)}};if(e&&e.__esModule)return e;var n={};if(r[t(249)](e,null))for(var i in e)r[t(212)](i,r[t(188)])&&Object.prototype[t(193)+"erty"][t(229)](e,i)&&__createBinding(n,e,i);return r[t(252)](__setModuleDefault,n,e),n};Object[_0x371615(195)+_0x371615(192)](exports,_0x371615(248),{value:!0});const PUPPET=__importStar(require(_0x371615(190)+_0x371615(250))),is_type_js_1=require("../utils/i"+_0x371615(238)),xml_to_json_js_1=require("../utils/x"+_0x371615(230)+_0x371615(221)),types_js_1=require(_0x371615(239)+"s"),FRIENDSHIP_CONFIRM_REGEX_LIST=[/^You have added (.+) as your WeChat contact. Start chatting!$/,/^你已添加了(.+)，现在可以开始聊天了。$/,/I've accepted your friend request. Now let's chat!$/,/^(.+) just added you to his\/her contacts list. Send a message to him\/her now!$/,/^(.+)刚刚把你添加到通讯录，现在可以开始聊天了。$/,/^我通过了你的朋友验证请求，现在我们可以开始聊天了$/],FRIENDSHIP_VERIFY_REGEX_LIST=[/^(.+) has enabled Friend Confirmation/,/^(.+)开启了朋友验证，你还不是他（她）朋友。请先发送朋友验证请求，对方验证通过后，才能聊天。/],isConfirm=r=>{const n=_0x371615;return FRIENDSHIP_CONFIRM_REGEX_LIST[n(207)](e=>{var t=n;return!!r[t(236)].match(e)})},isNeedVerify=r=>{const n=_0x371615;return FRIENDSHIP_VERIFY_REGEX_LIST[n(207)](e=>{var t=n;return!!r.content[t(234)](e)})},isReceive=async e=>{var t=_0x371615;if(e[t(213)]===types_js_1["WechatMess"+t(222)].VerifyMsg||e[t(213)]===types_js_1[t(224)+t(222)]["VerifyMsgE"+t(246)])try{var r=await(0,xml_to_json_js_1[t(253)])(e[t(236)]),n=r[t(203)].$[t(251)+"me"];if((0,is_type_js_1[t(235)+"d"])(n)&&r[t(203)].$[t(184)+t(191)])return r;if((0,is_type_js_1["isIMContac"+t(208)])(n))return r}catch(e){}return null};function _0x10e5(){const e=["types","default","Verify",".js","ageType","966579pTcapy","WechatMess","__createBi","getOwnProp","createtime","ljmdz","call","ml-to-json","1346348uVqfVI","9LBfIbE","3729944gaXaIs","match","isContactI","content","ertyDescri","s-type.js","../types.j","writable","get","configurab","create","505398Yzneke","sourcenick","nterprise","scene","__esModule","TBNnl","ppet","fromuserna","wzEWB","xmlToJson","encryptuse","wFBlB","WVYgo","sharecardn","DMHXx","oPYjH","wechaty-pu","rname","erty","hasOwnProp","2594837FoEnNg","defineProp","Receive","name","sharecardu","JRuol","sourceuser","eDefault","1216938SYiYWf","msg","__importSt","Confirm","320257vlJpSI","some","tId","__setModul","RHifz","ptor","NuAWF","type","Friendship","5Qqeuwd","AkIur","ickname"];return(_0x10e5=function(){return e})()}exports[_0x371615(219)]=async(e,t)=>{var r,n=_0x371615,i={lgCQQ:function(e,t){return e(t)},AkIur:function(e,t){return e(t)},YFnKt:function(e,t,r){return e(t,r)}};return i.lgCQQ(isConfirm,t)?{contactId:t[n(251)+"me"],id:t.id,timestamp:t[n(227)],type:PUPPET[n(218)][n(214)][n(205)]}:isNeedVerify(t)?{contactId:t[n(251)+"me"],id:t.id,timestamp:t.createtime,type:PUPPET.types[n(214)][n(220)]}:(r=await i[n(216)](isReceive,t))?{contactId:r[n(203)].$[n(251)+"me"],hello:r[n(203)].$[n(236)],id:t.id,scene:i.YFnKt(parseInt,r[n(203)].$[n(247)],10),shareCardContactId:r[n(203)].$[n(198)+"sername"],shareCardNickName:r[n(203)].$[n(187)+n(217)],sourceContactId:r[n(203)].$[n(200)+"name"],sourceNickName:r[n(203)].$[n(245)+n(197)],stranger:r[n(203)].$["encryptuse"+n(191)],ticket:r[n(203)].$.ticket,timestamp:t[n(227)],type:PUPPET[n(218)][n(214)][n(196)]}:null};