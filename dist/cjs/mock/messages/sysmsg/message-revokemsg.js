"use strict";const _0x3b7558=_0x3b81;function _0x1371(){const e=["Other","getRevokeO","You","rch","roomMember","age","s/runner.j","isRoomId","oPTnp","eMsgMessag","parseRevok","5uQNYZK","530lbmjLK","ePayload","660196ssujXx","peratorIdF","8QaNqti","831XhGrtJ","newmsgid","replacemsg","s/regex.js","ners","12086310FfUZUz","session","parseTextW","144186QCfqjX","ssageId","riginalMes","573040faocDB","orRoomMess","ithRegexLi","executeRun","messageSea","__esModule","3166989egRxJl","2260044GcLVqe","length","operatorNi"];return(_0x1371=function(){return e})()}!function(){for(var e=_0x3b81,s=_0x1371();;)try{if(330437==+parseInt(e(276))+-parseInt(e(260))/2*(-parseInt(e(265))/3)+parseInt(e(262))/4*(parseInt(e(259))/5)+parseInt(e(273))/6+-parseInt(e(282))/7*(-parseInt(e(264))/8)+parseInt(e(283))/9+-parseInt(e(270))/10)break;s.push(s.shift())}catch(e){s.push(s.shift())}}(),Object.defineProperty(exports,_0x3b7558(281),{value:!0}),exports[_0x3b7558(249)+"peratorIdF"+_0x3b7558(277)+_0x3b7558(253)]=exports["getRevokeO"+_0x3b7558(275)+"sage"]=exports[_0x3b7558(258)+_0x3b7558(257)+_0x3b7558(261)]=void 0;const regex_js_1=require("../../util"+_0x3b7558(268)),runner_js_1=require("../../util"+_0x3b7558(254)+"s"),is_type_js_1=require("../../utils/is-type.js"),YOU_REVOKE_REGEX_LIST=[/你撤回了一条消息/,/You recalled a message/],OTHER_REVOKE_REGEX_LIST=[/"(.+)" 撤回了一条消息/,/"(.+)" has recalled a message./];async function parseRevokeMsgMessagePayload(e){const t=_0x3b7558,a={oPTnp:t(248)};let n;var s=await(0,runner_js_1[t(279)+t(269)])([async()=>(0,regex_js_1[t(272)+"ithRegexList"])(e[t(267)],YOU_REVOKE_REGEX_LIST,async()=>t(250)),async()=>(0,regex_js_1[t(272)+t(278)+"st"])(e[t(267)],OTHER_REVOKE_REGEX_LIST,async(e,s)=>{var r=t;return n=s[1],a[r(256)]})]);return{content:e[t(267)],operatorNickName:n,originalMessageId:e[t(266)],session:e[t(271)],type:s}}function _0x3b81(e,s){const r=_0x1371();return(_0x3b81=function(e,s){return e-=246,r[e]})(e,s)}async function getRevokeOriginalMessage(e,s){var r=_0x3b7558,s=await e[r(280)+r(251)]({id:s["originalMe"+r(274)]});return s.length?e.messagePayload(s[0]):null}async function getRevokeOperatorIdForRoomMessage(e,s){var r=_0x3b7558;if((0,is_type_js_1[r(255)])(s[r(271)])||(0,is_type_js_1.isIMRoomId)(s.session)){e=await e[r(252)+"Search"](s[r(271)],s[r(247)+"ckName"]);if(e[r(246)])return e[0]}return null}exports[_0x3b7558(258)+_0x3b7558(257)+_0x3b7558(261)]=parseRevokeMsgMessagePayload,exports[_0x3b7558(249)+_0x3b7558(275)+"sage"]=getRevokeOriginalMessage,exports[_0x3b7558(249)+_0x3b7558(263)+_0x3b7558(277)+_0x3b7558(253)]=getRevokeOperatorIdForRoomMessage;